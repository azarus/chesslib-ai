{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/@chesslib/core/build/ChessAI/BoardEvals.js","node_modules/@chesslib/core/build/ChessAI/ChessAI.js","node_modules/@chesslib/core/build/ChessAI/ChessAIWorker.js","node_modules/@chesslib/core/build/ChessAI/index.js","node_modules/@chesslib/core/build/Chess/Chessboard.js","node_modules/@chesslib/core/build/Chess/Events.js","node_modules/@chesslib/core/build/Chess/Piece.js","node_modules/@chesslib/core/build/Chess/Pieces/Bishop.js","node_modules/@chesslib/core/build/Chess/Pieces/King.js","node_modules/@chesslib/core/build/Chess/Pieces/Knight.js","node_modules/@chesslib/core/build/Chess/Pieces/Pawn.js","node_modules/@chesslib/core/build/Chess/Pieces/Queen.js","node_modules/@chesslib/core/build/Chess/Pieces/Rook.js","node_modules/@chesslib/core/build/Chess/Positions.js","node_modules/@chesslib/core/build/Chess/Square.js","node_modules/@chesslib/core/build/Chess/Utils.js","node_modules/@chesslib/core/build/Chess/index.js","node_modules/@chesslib/core/index.js","source/ChessAI/BoardEvals.ts","source/ChessAI/ChessAI.ts","source/ChessAI/ChessAIWorker.ts","source/ChessAI/index.ts","source/client.ts"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","file":"client.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction reverseArray(array) {\n    return array.slice().reverse();\n}\n;\nexports.boardEvalsWhite = {\n    P: [\n        [10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0],\n        [5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0],\n        [1.0, 1.0, 2.0, 3.0, 3.0, 2.0, 1.0, 1.0],\n        [0.5, 0.5, 1.0, 2.5, 2.5, 1.0, 0.5, 0.5],\n        [0.0, 0.0, 0.0, 2.0, 2.0, 0.0, 0.0, 0.0],\n        [0.5, -0.5, -1.0, 0.0, 0.0, -1.0, -0.5, 0.5],\n        [0.5, 1.0, 1.0, -2.0, -2.0, 1.0, 1.0, 0.5],\n        [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]\n    ],\n    N: [\n        [-5.0, -4.0, -3.0, -3.0, -3.0, -3.0, -4.0, -5.0],\n        [-4.0, -2.0, 0.0, 0.0, 0.0, 0.0, -2.0, -4.0],\n        [-3.0, 0.0, 1.0, 1.5, 1.5, 1.0, 0.0, -3.0],\n        [-3.0, 0.5, 1.5, 2.0, 2.0, 1.5, 0.5, -3.0],\n        [-3.0, 0.0, 1.5, 2.0, 2.0, 1.5, 0.0, -3.0],\n        [-3.0, 0.5, 1.0, 1.5, 1.5, 1.0, 0.5, -3.0],\n        [-4.0, -2.0, 0.0, 0.5, 0.5, 0.0, -2.0, -4.0],\n        [-5.0, -4.0, -3.0, -3.0, -3.0, -3.0, -4.0, -5.0]\n    ],\n    B: [\n        [-2.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -2.0],\n        [-1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -1.0],\n        [-1.0, 0.0, 0.5, 1.0, 1.0, 0.5, 0.0, -1.0],\n        [-1.0, 0.5, 0.5, 1.0, 1.0, 0.5, 0.5, -1.0],\n        [-1.0, 0.0, 1.0, 1.0, 1.0, 1.0, 0.0, -1.0],\n        [-1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, -1.0],\n        [-1.0, 0.5, 0.0, 0.0, 0.0, 0.0, 0.5, -1.0],\n        [-2.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -2.0]\n    ],\n    R: [\n        [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],\n        [0.5, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.5],\n        [-0.5, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -0.5],\n        [-0.5, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -0.5],\n        [-0.5, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -0.5],\n        [-0.5, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -0.5],\n        [-0.5, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -0.5],\n        [0.0, 0.0, 0.0, 0.5, 0.5, 0.0, 0.0, 0.0]\n    ],\n    Q: [\n        [-2.0, -1.0, -1.0, -0.5, -0.5, -1.0, -1.0, -2.0],\n        [-1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -1.0],\n        [-1.0, 0.0, 0.5, 0.5, 0.5, 0.5, 0.0, -1.0],\n        [-0.5, 0.0, 0.5, 0.5, 0.5, 0.5, 0.0, -0.5],\n        [0.0, 0.0, 0.5, 0.5, 0.5, 0.5, 0.0, -0.5],\n        [-1.0, 0.5, 0.5, 0.5, 0.5, 0.5, 0.0, -1.0],\n        [-1.0, 0.0, 0.5, 0.0, 0.0, 0.0, 0.0, -1.0],\n        [-2.0, -1.0, -1.0, -0.5, -0.5, -1.0, -1.0, -2.0]\n    ],\n    K: [\n        [-3.0, -4.0, -4.0, -5.0, -5.0, -4.0, -4.0, -3.0],\n        [-3.0, -4.0, -4.0, -5.0, -5.0, -4.0, -4.0, -3.0],\n        [-3.0, -4.0, -4.0, -5.0, -5.0, -4.0, -4.0, -3.0],\n        [-3.0, -4.0, -4.0, -5.0, -5.0, -4.0, -4.0, -3.0],\n        [-2.0, -3.0, -3.0, -4.0, -4.0, -3.0, -3.0, -2.0],\n        [-1.0, -2.0, -2.0, -2.0, -2.0, -2.0, -2.0, -1.0],\n        [2.0, 2.0, 0.0, 0.0, 0.0, 0.0, 2.0, 2.0],\n        [2.0, 3.0, 1.0, 0.0, 0.0, 1.0, 3.0, 2.0]\n    ]\n};\nexports.boardEvalsBlack = {\n    P: reverseArray(exports.boardEvalsWhite.P),\n    N: reverseArray(exports.boardEvalsWhite.N),\n    B: reverseArray(exports.boardEvalsWhite.B),\n    R: reverseArray(exports.boardEvalsWhite.R),\n    Q: reverseArray(exports.boardEvalsWhite.Q),\n    K: reverseArray(exports.boardEvalsWhite.K),\n};\nexports.BoardEvaluations = [\n    exports.boardEvalsBlack,\n    exports.boardEvalsWhite,\n];\n\n//# sourceMappingURL=BoardEvals.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Chess_1 = require(\"../Chess\");\nvar BoardEvals_1 = require(\"./BoardEvals\");\nvar PIECE_VALUES = {\n    P: 10,\n    B: 30,\n    N: 30,\n    R: 50,\n    Q: 80,\n    K: 900,\n};\nvar ChessAI = /** @class */ (function () {\n    function ChessAI(chessboard, playingSide, playerCount) {\n        this.chessboard = null;\n        this.moves = [];\n        this.playingSide = 0;\n        this.playerCount = 2;\n        this.searchTime = 0;\n        this.chessboard = chessboard;\n        this.playingSide = playingSide;\n        this.playerCount = playerCount;\n    }\n    ChessAI.prototype.setBoard = function (chessboard) {\n        this.chessboard = chessboard;\n    };\n    ChessAI.prototype.loadBoard = function (positions) {\n        this.chessboard = Chess_1.Chessboard.fromPosition(positions);\n    };\n    ChessAI.prototype.doMove = function (move) {\n        if (!this.chessboard.doMove(move)) {\n            return false;\n        }\n        return true;\n    };\n    ChessAI.prototype.doMoveFEN = function (move) {\n        if (!this.chessboard.doMoveFEN(move)) {\n            return false;\n        }\n        return true;\n    };\n    ChessAI.prototype.makeMoves = function (searchDepth, amount) {\n        if (searchDepth === void 0) { searchDepth = 4; }\n        if (amount === void 0) { amount = 1; }\n        var bestMoves = this.getBestMoves(searchDepth, amount);\n        if (!bestMoves.length) {\n            return null;\n        }\n        for (var _i = 0, bestMoves_1 = bestMoves; _i < bestMoves_1.length; _i++) {\n            var bestMove = bestMoves_1[_i];\n            this.doMove(bestMove);\n        }\n        return bestMoves;\n    };\n    ChessAI.prototype.getBestMove = function (side, searchDepth) {\n        var bestMoves = this.getBestMoves(searchDepth);\n        if (!bestMoves.length) {\n            return this.getRandomMove();\n        }\n        // var bestMove = null;\n        // var bestValue = -9999;\n        // if(move.score > bestValue)\n        // {\n        // \tbestMove = move;\n        // \tbestValue = move.score;\n        // }\n        return bestMoves[0];\n    };\n    ChessAI.prototype.getBestMoves = function (searchDepth, limit) {\n        if (limit === void 0) { limit = 5; }\n        this.searchTime = Date.now() + 100;\n        var moves = this.chessboard.getMovesFEN(this.playingSide);\n        for (var _i = 0, moves_1 = moves; _i < moves_1.length; _i++) {\n            var move = moves_1[_i];\n            this.chessboard.moveFEN(move.from, move.to);\n            // Do not allow the king to be killed?\n            move.score = this.evaluateBestMove(this.playingSide, searchDepth - 1, -10000, 10000, false);\n            this.chessboard.undo();\n        }\n        return moves.sort(function (a, b) {\n            if (a.score < b.score)\n                return 1;\n            if (a.score > b.score)\n                return -1;\n            return 0;\n        }).slice(0, limit);\n    };\n    ChessAI.prototype.getNextPlayerSide = function (playerSide) {\n        return (playerSide + 1) % this.playerCount;\n    };\n    ChessAI.prototype.evaluateBestMove = function (playerSide, depth, alpha, beta, isMaximisingPlayer) {\n        if (depth === 0) {\n            return this.evaluateBoard(this.playingSide);\n        }\n        var currentPlayer = this.getNextPlayerSide(playerSide);\n        var moves = this.chessboard.getMoves(currentPlayer);\n        if (isMaximisingPlayer) {\n            var bestValue = -9999;\n            for (var _i = 0, moves_2 = moves; _i < moves_2.length; _i++) {\n                var move = moves_2[_i];\n                this.chessboard.move(move.from, move.to);\n                bestValue = Math.max(bestValue, this.evaluateBestMove(currentPlayer, depth - 1, alpha, beta, !isMaximisingPlayer));\n                this.chessboard.undo();\n                alpha = Math.max(alpha, bestValue);\n                if (beta <= alpha) {\n                    return bestValue;\n                }\n            }\n            return bestValue;\n        }\n        else {\n            var bestValue = 9999;\n            for (var _a = 0, moves_3 = moves; _a < moves_3.length; _a++) {\n                var move = moves_3[_a];\n                this.chessboard.move(move.from, move.to);\n                bestValue = Math.min(bestValue, this.evaluateBestMove(currentPlayer, depth - 1, alpha, beta, !isMaximisingPlayer));\n                this.chessboard.undo();\n                beta = Math.min(beta, bestValue);\n                if (beta <= alpha) {\n                    return bestValue;\n                }\n            }\n            return bestValue;\n        }\n    };\n    ChessAI.prototype.getRandomMove = function () {\n        var moves = this.chessboard.getMovesFEN(this.playingSide);\n        if (!moves.length)\n            return null;\n        var randMove = moves[Math.floor(Math.random() * moves.length)];\n        randMove.score = 0;\n        return randMove;\n    };\n    ChessAI.prototype.evaluateBoard = function (side) {\n        var boardValue = 0;\n        this.chessboard.forEachPiece(function (piece) {\n            if (side == piece.color) {\n                boardValue += PIECE_VALUES[piece.type] + BoardEvals_1.BoardEvaluations[piece.color][piece.type][piece.square.y][piece.square.x];\n            }\n            else {\n                boardValue -= PIECE_VALUES[piece.type] + BoardEvals_1.BoardEvaluations[piece.color][piece.type][piece.square.y][piece.square.x];\n            }\n        });\n        return boardValue;\n    };\n    return ChessAI;\n}());\nexports.ChessAI = ChessAI;\n;\n\n//# sourceMappingURL=ChessAI.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ChessAIWorker = /** @class */ (function () {\n    function ChessAIWorker(workerPath) {\n        var _this = this;\n        this.worker = null;\n        this.listeners = [];\n        this.worker = new Worker(workerPath);\n        this.worker.onmessage = function (message) {\n            if (_this.listeners[message.data.event]) {\n                for (var _i = 0, _a = _this.listeners[message.data.event]; _i < _a.length; _i++) {\n                    var event = _a[_i];\n                    event.apply(event, message.data.arguments);\n                }\n            }\n        };\n    }\n    ChessAIWorker.prototype.emit = function (event, data) {\n        this.worker.postMessage(event);\n    };\n    ChessAIWorker.prototype.on = function (type, callback) {\n        if (!this.listeners[type]) {\n            this.listeners[type] = [];\n        }\n        this.listeners[type].push(callback);\n    };\n    ChessAIWorker.prototype.exec = function (method) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        this.worker.postMessage({\n            method: method,\n            arguments: Array.prototype.slice.call(arguments).slice(1)\n        });\n    };\n    ChessAIWorker.prototype.destroy = function () {\n        this.worker.terminate();\n    };\n    return ChessAIWorker;\n}());\nexports.ChessAIWorker = ChessAIWorker;\n;\n\n//# sourceMappingURL=ChessAIWorker.js.map\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./ChessAI\"));\n__export(require(\"./ChessAIWorker\"));\n\n//# sourceMappingURL=index.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Square_1 = require(\"./Square\");\nvar Piece_1 = require(\"./Piece\");\n// Pieces\nvar Pawn_1 = require(\"./Pieces/Pawn\");\nvar Bishop_1 = require(\"./Pieces/Bishop\");\nvar Knight_1 = require(\"./Pieces/Knight\");\nvar Rook_1 = require(\"./Pieces/Rook\");\nvar Queen_1 = require(\"./Pieces/Queen\");\nvar King_1 = require(\"./Pieces/King\");\n// Third Party\nvar Utils_1 = require(\"./Utils\");\nvar Chessboard = /** @class */ (function () {\n    function Chessboard(sizeX, sizeY) {\n        if (sizeX === void 0) { sizeX = 8; }\n        if (sizeY === void 0) { sizeY = 8; }\n        this.boardSize = {\n            x: 8,\n            y: 8,\n        };\n        this.history = [];\n        this.squares = new Array();\n        this.onPromote = new Utils_1.ChessEventEmitter();\n        this.boardSize.x = sizeX;\n        this.boardSize.y = sizeY;\n        this.reset();\n    }\n    Chessboard.fromPosition = function (position) {\n        var sizeY = position.length;\n        var sizeX = position[0].length;\n        var board = new Chessboard(sizeX, sizeY);\n        board.loadPositions(position);\n        return board;\n    };\n    Chessboard.prototype.clone = function () {\n        return Chessboard.fromPosition(this.savePositions());\n    };\n    Chessboard.prototype.reset = function () {\n        this.squares = new Array();\n        for (var y = 0; y < this.boardSize.y; ++y) {\n            this.squares[y] = new Array();\n            for (var x = 0; x < this.boardSize.x; ++x) {\n                this.squares[y][x] = new Square_1.Square(this, x, y);\n            }\n        }\n        this.history = [];\n    };\n    Chessboard.prototype.forEach = function (callback) {\n        for (var y = 0; y < this.boardSize.y; ++y) {\n            for (var x = 0; x < this.boardSize.x; ++x) {\n                callback(this.squares[y][x], x, y);\n            }\n        }\n    };\n    Chessboard.prototype.forEachPiece = function (callback) {\n        this.forEach(function (square, x, y) {\n            if (square.piece) {\n                callback(square.piece, x, y, square);\n            }\n        });\n    };\n    Chessboard.prototype.findPieces = function (pieceType, color) {\n        if (pieceType === void 0) { pieceType = null; }\n        if (color === void 0) { color = null; }\n        var pieces = [];\n        this.forEachPiece(function (piece) {\n            if (pieceType && piece.type != pieceType)\n                return;\n            if (color && piece.color != color)\n                return;\n            pieces.push(piece);\n        });\n        return pieces;\n    };\n    Chessboard.prototype.map = function (callback) {\n        var newSquares = new Array();\n        for (var y = 0; y < this.boardSize.y; ++y) {\n            newSquares[y] = new Array();\n            for (var x = 0; x < this.boardSize.x; ++x) {\n                newSquares[y][x] = callback(this.squares[y][x], x, y);\n            }\n        }\n        return newSquares;\n    };\n    Chessboard.prototype.loadPositions = function (positions) {\n        this.reset();\n        if (positions.length > this.boardSize.y || positions[0].length > this.boardSize.x) {\n            return false;\n        }\n        for (var y = 0; y < positions.length; ++y) {\n            for (var x = 0; x < positions[y].length; ++x) {\n                var square = this.getSquare(x, y);\n                this.setSquare(square, positions[y][x][1], Piece_1.COLORS.getColor(positions[y][x][0]));\n            }\n        }\n        return true;\n    };\n    Chessboard.prototype.savePositions = function () {\n        var positions = [];\n        for (var y = 0; y < this.boardSize.y; ++y) {\n            positions[y] = [];\n            for (var x = 0; x < this.boardSize.x; ++x) {\n                if (this.squares[y][x].piece) {\n                    positions[y][x] = Piece_1.COLORS.getName(this.squares[y][x].piece.color) + this.squares[y][x].piece.type;\n                }\n                else {\n                    positions[y][x] = \"\";\n                }\n            }\n        }\n        return positions;\n    };\n    Chessboard.prototype.setBoard = function (board) {\n        this.reset();\n        var keys = Object.keys(board);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var key = keys_1[_i];\n            var square = this.FENToSquare(key);\n            if (!square)\n                return;\n            var color = board[key][0];\n            var piece = board[key][1];\n            this.setSquare(square, piece, Piece_1.COLORS.getColor(color));\n        }\n    };\n    Chessboard.prototype.getBoard = function () {\n        var _this = this;\n        var positions = {};\n        this.forEach(function (square) {\n            if (square.piece) {\n                positions[_this.SquareToFEN(square)] = square.piece.getSymbol();\n            }\n        });\n        return positions;\n    };\n    Chessboard.prototype.getSquare = function (x, y) {\n        if (x >= (this.boardSize.x) || x < 0 || y >= (this.boardSize.y) || y < 0)\n            return null;\n        return this.squares[y][x];\n    };\n    Chessboard.prototype.setSquare = function (square, type, color) {\n        if (!square)\n            return null;\n        if (!type)\n            return this.clearSquare(square);\n        if (!Chessboard.PIECES[type])\n            return null;\n        return this.createPiece(type, color, square);\n    };\n    Chessboard.prototype.createPiece = function (type, color, square) {\n        var newPiece = new Chessboard.PIECES[type](this, square);\n        newPiece.setColor(color);\n        newPiece.initialize();\n        return newPiece;\n    };\n    Chessboard.prototype.setPiece = function (square, piece) {\n        if (!square)\n            return false;\n        // Remove the old piece from the square\n        if (square.piece) {\n            square.piece.square = null;\n        }\n        // Set the new piece\n        square.piece = piece;\n        if (piece) {\n            piece.square = square;\n        }\n        return true;\n    };\n    Chessboard.prototype.clearSquare = function (square) {\n        if (square.piece) {\n            square.piece.setSquare(null);\n            square.setPiece(null);\n        }\n    };\n    Chessboard.prototype.isValidMoveFEN = function (from, to) {\n        var fromSquare = this.FENToSquare(from);\n        var toSquare = this.FENToSquare(to);\n        return this.isValidMove(fromSquare, toSquare);\n    };\n    Chessboard.prototype.isValidMove = function (from, to) {\n        if (!from || !to)\n            return false;\n        if (!from.piece)\n            return false;\n        return !!this.getAllowedMovesOf(from.piece).find(function (move) {\n            if (from == move.from && to == move.to)\n                return true;\n            return false;\n        });\n    };\n    Chessboard.prototype.doMove = function (move) {\n        this.move(move.from, move.to);\n    };\n    Chessboard.prototype.doMoveFEN = function (move) {\n        this.tryMoveFEN(move.from, move.to);\n    };\n    Chessboard.prototype.move = function (from, to, simulatedMove) {\n        if (simulatedMove === void 0) { simulatedMove = false; }\n        if (!from || !to)\n            return false;\n        if (!from.piece)\n            return false;\n        var movingPiece = from.piece;\n        // Add the move to the history\n        this.history.push([]);\n        // this.forEachPiece( piece => {\n        // \tpiece.BeforePieceMoved(movingPiece, to);\n        // });\n        var result = movingPiece.move(to);\n        // this.forEachPiece( piece => {\n        // \tpiece.AfterPieceMoved(movingPiece, to);\n        // });\n        return result;\n    };\n    Chessboard.prototype.addHistory = function (piece, data) {\n        var history = {\n            piece: piece,\n            data: data,\n        };\n        this.history[this.history.length - 1].push(history);\n    };\n    // pushHistory(piece, data)\n    // {\n    // \tvar historyEvent = {\n    // \t\tpiece: piece,\n    // \t\ttype: type,\n    // \t\tdata: data,\n    // \t};\n    // \tthis.history[this.history.length - 1].push(historyEvent);\n    // }\n    // popHistory()\n    // {\n    // \tvar history = this.history.pop()\n    // \thistory.piece.undo(history.data);\n    // \treturn history;\n    // }\n    // newHistory()\n    // {\n    // \tthis.history.push([]);\n    // }\n    // Undo the last actions.\n    Chessboard.prototype.undo = function () {\n        var history = this.history.pop();\n        if (!history) {\n            return null;\n        }\n        var historySize = history.length;\n        for (var i = 0; i < historySize; ++i) {\n            var event = history.pop();\n            event.piece.undo(event.data);\n        }\n        return history;\n    };\n    Chessboard.prototype.moveFEN = function (from, to, simulatedMove) {\n        if (simulatedMove === void 0) { simulatedMove = false; }\n        var fromSquare = this.FENToSquare(from);\n        var toSquare = this.FENToSquare(to);\n        return this.move(fromSquare, toSquare, simulatedMove);\n    };\n    Chessboard.prototype.tryMove = function (from, to, simulatedMove) {\n        if (simulatedMove === void 0) { simulatedMove = false; }\n        if (!this.isValidMove(from, to))\n            return false;\n        return this.move(from, to, simulatedMove);\n    };\n    Chessboard.prototype.tryMoveFEN = function (from, to, simulatedMove) {\n        if (simulatedMove === void 0) { simulatedMove = false; }\n        var fromSquare = this.FENToSquare(from);\n        var toSquare = this.FENToSquare(to);\n        if (!this.isValidMove(fromSquare, toSquare)) {\n            return false;\n        }\n        return this.move(fromSquare, toSquare, simulatedMove);\n    };\n    Chessboard.prototype.getAllowedMovesOf = function (piece) {\n        return piece.getAllowedMoves().map(function (toSquare) {\n            return {\n                from: piece.square,\n                to: toSquare,\n            };\n        });\n    };\n    Chessboard.prototype.getMovesOf = function (piece) {\n        return piece.getLegalMoves().map(function (toSquare) {\n            return {\n                from: piece.square,\n                to: toSquare,\n            };\n        });\n    };\n    Chessboard.prototype.getMovesAtFEN = function (fen) {\n        var square = this.FENToSquare(fen);\n        if (square && square.piece) {\n            return this.getAllowedMovesOf(square.piece);\n        }\n        return [];\n    };\n    Chessboard.prototype.getFENMovesatFEN = function (fen) {\n        var _this = this;\n        return this.getMovesAtFEN(fen).map(function (move) {\n            move.from = _this.PositionToFEN(move.from.x, move.from.y);\n            move.to = _this.PositionToFEN(move.to.x, move.to.y);\n            return move;\n        });\n    };\n    Chessboard.prototype.getMoves = function (color) {\n        var _this = this;\n        if (color === void 0) { color = null; }\n        var moves = [];\n        this.forEachPiece(function (piece) {\n            if (color !== null && color != piece.color) {\n                //console.log(\"not same color?\");\n                return;\n            }\n            moves.push.apply(moves, _this.getAllowedMovesOf(piece));\n        });\n        return moves;\n    };\n    Chessboard.prototype.getMovesFEN = function (color) {\n        var _this = this;\n        if (color === void 0) { color = null; }\n        return this.getMoves(color).map(function (move) {\n            move.from = _this.PositionToFEN(move.from.x, move.from.y);\n            move.to = _this.PositionToFEN(move.to.x, move.to.y);\n            return move;\n        });\n    };\n    Chessboard.prototype.PositionToFEN = function (x, y) {\n        return this.charIndex(x) + (this.boardSize.y - y);\n    };\n    Chessboard.prototype.FENtoPosition = function (fen) {\n        return {\n            x: this.indexOfChar(fen[0]),\n            y: (this.boardSize.y - fen[1])\n        };\n    };\n    Chessboard.prototype.FENToSquare = function (fen) {\n        var position = this.FENtoPosition(fen);\n        return this.getSquare(position.x, position.y);\n    };\n    Chessboard.prototype.SquareToFEN = function (square) {\n        var position = square.getPosition();\n        return this.PositionToFEN(position.x, position.y);\n    };\n    Chessboard.prototype.charIndex = function (index) {\n        return Chessboard.SIDE[index];\n    };\n    Chessboard.prototype.indexOfChar = function (char) {\n        return Chessboard.SIDE.indexOf(char);\n    };\n    Chessboard.prototype.clearDebug = function () {\n        this.forEach(function (square) {\n            square.debug = false;\n        });\n    };\n    Chessboard.prototype.debugSquare = function (square, debugColor) {\n        square.debug = debugColor;\n    };\n    Chessboard.prototype.debugFEN = function (fen, debugColor) {\n        var square = this.FENToSquare(fen);\n        if (square) {\n            square.debug = debugColor;\n        }\n    };\n    Chessboard.prototype.debugMoves = function (fen, debugColor) {\n        var square = this.FENToSquare(fen);\n        if (square && square.piece) {\n            var piece = square.getPiece();\n            var moves = piece.getLegalMoves();\n            moves.forEach(function (square) {\n                square.debug = debugColor;\n            });\n            return true;\n        }\n        return false;\n    };\n    Chessboard.SIDE = \"abcdefghijklmnopqrstuvwxyz\";\n    Chessboard.RANKS = [\"Pawn\", \"Knight\", \"Bishop\", \"Rook\", \"Queen\", \"King\"];\n    Chessboard.PIECES = {\n        P: Pawn_1.PawnPiece,\n        B: Bishop_1.BishopPiece,\n        N: Knight_1.KnightPiece,\n        R: Rook_1.RookPiece,\n        Q: Queen_1.QueenPiece,\n        K: King_1.KingPiece,\n    };\n    return Chessboard;\n}());\nexports.Chessboard = Chessboard;\n;\n\n//# sourceMappingURL=Chessboard.js.map\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Utils_1 = require(\"./Utils\");\nvar ChessMoveEvent = /** @class */ (function (_super) {\n    __extends(ChessMoveEvent, _super);\n    function ChessMoveEvent(from, to) {\n        var _this = _super.call(this) || this;\n        _this.from = null;\n        _this.to = null;\n        _this.from = from;\n        _this.to = to;\n        return _this;\n    }\n    return ChessMoveEvent;\n}(Utils_1.ChessEvent));\nexports.ChessMoveEvent = ChessMoveEvent;\n;\nvar ChessPromoteEvent = /** @class */ (function (_super) {\n    __extends(ChessPromoteEvent, _super);\n    function ChessPromoteEvent(square, piece, fen) {\n        var _this = _super.call(this) || this;\n        _this.fen = null;\n        _this.piece = null;\n        _this.square = null;\n        _this.fen = fen;\n        _this.piece = piece;\n        _this.square = square;\n        return _this;\n    }\n    return ChessPromoteEvent;\n}(Utils_1.ChessEvent));\nexports.ChessPromoteEvent = ChessPromoteEvent;\n;\n\n//# sourceMappingURL=Events.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Define Movement Vectors\nvar MovementVectors = /** @class */ (function () {\n    function MovementVectors() {\n    }\n    MovementVectors.Diagonal = [[1, 1], [1, -1], [-1, -1], [-1, 1]];\n    MovementVectors.Lateral = [[0, 1], [0, -1], [1, 0], [-1, 0]];\n    MovementVectors.Omni = MovementVectors.Diagonal.concat(MovementVectors.Lateral);\n    return MovementVectors;\n}());\nexports.MovementVectors = MovementVectors;\n;\nvar COLORS = /** @class */ (function () {\n    function COLORS() {\n    }\n    COLORS.getColor = function (color) {\n        return COLORMAP[color];\n    };\n    COLORS.getName = function (color) {\n        var keys = Object.keys(COLORMAP);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var key = keys_1[_i];\n            if (COLORMAP[key] == color)\n                return key;\n        }\n        return \"\";\n    };\n    COLORS.BLACK = 0;\n    COLORS.WHITE = 1;\n    COLORS.GREEN = 2;\n    COLORS.ORANGE = 3;\n    return COLORS;\n}());\nexports.COLORS = COLORS;\n;\nvar COLORMAP = {\n    w: COLORS.WHITE,\n    b: COLORS.BLACK,\n    g: COLORS.GREEN,\n    o: COLORS.ORANGE\n};\n// Simploe Piece inmplementation\nvar Piece = /** @class */ (function () {\n    function Piece(board, square) {\n        // Board & Square \n        this.board = null;\n        this.square = null;\n        // Piece description\n        this.name = \"Piece\";\n        this.color = null;\n        this.type = null;\n        // Movement information\n        this.moves = 0;\n        this.index = null;\n        this.pieceTimer = null;\n        this.moveDelay = 5000;\n        this.lastMoved = 0;\n        this.board = board;\n        this.setSquare(square);\n    }\n    Piece.prototype.initialize = function () {\n        // Not implemented\n    };\n    Piece.prototype.setSquare = function (square) {\n        if (this.square) {\n            this.square.piece = null;\n        }\n        if (square) {\n            square.piece = this;\n        }\n        this.square = square;\n    };\n    Piece.prototype.setColor = function (color) {\n        this.color = color;\n    };\n    Piece.prototype.getColor = function () {\n        return this.color;\n    };\n    // Moves piece to a new square\n    Piece.prototype.move = function (square) {\n        if (!square)\n            return false;\n        // If square has piece capture it.\n        this.capture(square);\n        this.addHistory({\n            move: {\n                from: this.square,\n                to: square,\n            },\n            lastMoved: this.lastMoved\n        });\n        // Change positions\n        this.moves++;\n        // Clear previous square\n        this.square.setPiece(null);\n        // set new position\n        this.setSquare(square);\n        this.lastMoved = Date.now();\n        return true;\n    };\n    Piece.prototype.undo = function (event) {\n        if (event.move) {\n            this.square.setPiece(null);\n            this.setSquare(event.move.from);\n            this.lastMoved = event.lastMoved;\n            this.moves--;\n        }\n        if (event.captured) {\n            event.square.setPiece(event.captured);\n        }\n    };\n    Piece.prototype.capture = function (square) {\n        if (!square)\n            return;\n        if (square.piece) {\n            // Add capture to the history\n            this.addHistory({\n                captured: square.piece,\n                square: square,\n            });\n        }\n        square.setPiece(null);\n    };\n    Piece.prototype.getAllowedMoves = function () {\n        if (this.lastMoved > Date.now() - this.moveDelay)\n            return [];\n        return this.getLegalMoves();\n    };\n    Piece.prototype.getLegalMoves = function () {\n        var _this = this;\n        return this.getMoves().filter(function (square) {\n            if (square.piece && square.piece.color == _this.color)\n                return false;\n            return true;\n        });\n    };\n    Piece.prototype.getMoves = function () {\n        throw new Error(\"Not implemented\");\n    };\n    Piece.prototype.getMovesByVectors = function (vectors, limit) {\n        if (limit === void 0) { limit = undefined; }\n        var moves = [], steps, vector, square;\n        for (var i = 0, l = vectors.length; i < l; i++) {\n            steps = 0;\n            vector = vectors[i];\n            square = this.square;\n            // Add all squares in path\n            while (square = square.getSibling(vector[0], vector[1])) {\n                if (square.getPiece()) {\n                    // Square is occupied by opponent\n                    if (square.getPiece().color != this.color) {\n                        // Occupied by other player - piece can be captured\n                        moves.push(square);\n                    }\n                    break;\n                }\n                moves.push(square);\n                steps++;\n                // Check if steps limit exceeded\n                if (limit && steps >= limit)\n                    break;\n            }\n        }\n        return moves;\n    };\n    Piece.prototype.getSymbol = function () {\n        return COLORS.getName(this.color) + this.type;\n    };\n    Piece.prototype.BeforePieceMoved = function (piece, square) {\n        // Not implemented\n    };\n    Piece.prototype.AfterPieceMoved = function (piece, square) {\n        // Not implemented\n    };\n    Piece.prototype.addHistory = function (data) {\n        this.board.addHistory(this, data);\n    };\n    return Piece;\n}());\nexports.Piece = Piece;\n;\n\n//# sourceMappingURL=Piece.js.map\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Piece_1 = require(\"../Piece\");\nvar BishopPiece = /** @class */ (function (_super) {\n    __extends(BishopPiece, _super);\n    function BishopPiece() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.name = \"Bishop\";\n        _this.type = \"B\";\n        return _this;\n    }\n    BishopPiece.prototype.getMoves = function () {\n        return this.getMovesByVectors(Piece_1.MovementVectors.Diagonal);\n    };\n    return BishopPiece;\n}(Piece_1.Piece));\nexports.BishopPiece = BishopPiece;\n;\n\n//# sourceMappingURL=Bishop.js.map\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Piece_1 = require(\"../Piece\");\nvar KingPiece = /** @class */ (function (_super) {\n    __extends(KingPiece, _super);\n    function KingPiece() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.name = \"King\";\n        _this.type = \"K\";\n        return _this;\n        // setCastling(from, to, castledFrom, castledTo)\n        // {\n        // \tthis.castling = {\n        // \t\tcastlingfrom: from,\n        // \t\tcastlingTo: to,\n        // \t\tcastledPiece: this,\n        // \t\tcastledFrom: castledFrom,\n        // \t\tcastledTo: castledTo,\n        // \t};\n        // }\n    }\n    KingPiece.prototype.move = function (square) {\n        if (Math.abs(square.getPosition().x - this.square.getPosition().x) > 1) {\n            // Castle Left rook\n            if (square.getPosition().x - this.square.getPosition().x < 0) {\n                return this.castle(-4, -1, -2);\n            }\n            // Castle Right rook\n            if (square.getPosition().x - this.square.getPosition().x > 0) {\n                return this.castle(3, 1, 2);\n            }\n        }\n        if (!_super.prototype.move.call(this, square))\n            return false;\n        return true;\n    };\n    KingPiece.prototype.getMoves = function () {\n        return this.getCastlingMoves([[-1, 0, 4], [1, 0, 3]], 2, 'R');\n    };\n    KingPiece.prototype.getCastlingMoves = function (vectors, distance, castlingPieceType) {\n        var moves = this.getMovesByVectors(Piece_1.MovementVectors.Omni, 1);\n        if (this.moves > 0)\n            return moves;\n        var steps, vector, square;\n        for (var i = 0, l = vectors.length; i < l; i++) {\n            steps = 0;\n            vector = vectors[i];\n            square = this.square;\n            // Check if the castling piece is available\n            var castlingTarget = this.square.getSibling(vector[0] * vector[2], vector[1] * vector[2]);\n            if (castlingTarget && castlingTarget.piece && castlingTarget.piece.type == castlingPieceType && castlingTarget.piece.color == this.color && castlingTarget.piece.moves == 0) {\n                // Add all squares in path\n                while (square = square.getSibling(vector[0], vector[1])) {\n                    // Square is occupied\n                    if (square.getPiece()) {\n                        break;\n                    }\n                    moves.push(square);\n                    steps++;\n                    // Check if steps limit exceeded\n                    if (distance && steps >= distance)\n                        break;\n                }\n            }\n        }\n        return moves;\n    };\n    KingPiece.prototype.castle = function (rookPosition, kingPosition, castlePosition) {\n        var rookSquare = this.square.getSibling(rookPosition, 0);\n        var kingSquare = this.square.getSibling(kingPosition, 0);\n        var castlingSquare = this.square.getSibling(castlePosition, 0);\n        // this.addHistory({\n        // \tcastling: {\n        // \t\trookSquare: rookSquare,\n        // \t\tkingSquare: kingSquare,\n        // \t\tcastlingSquare: castlingSquare,\n        // \t},\n        // \tcastling: this.canCastle,\n        // });\n        //this.setCastling(rookSquare, kingSquare, current, castlingSquare);\n        rookSquare.piece.move(kingSquare);\n        return _super.prototype.move.call(this, castlingSquare);\n    };\n    return KingPiece;\n}(Piece_1.Piece));\nexports.KingPiece = KingPiece;\n;\n\n//# sourceMappingURL=King.js.map\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Piece_1 = require(\"../Piece\");\nvar KnightPiece = /** @class */ (function (_super) {\n    __extends(KnightPiece, _super);\n    function KnightPiece() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.name = \"Knight\";\n        _this.type = \"N\";\n        return _this;\n    }\n    KnightPiece.prototype.getMoves = function () {\n        return this.getMovesByVectors(KnightPiece.MovementVectors, 1);\n    };\n    KnightPiece.MovementVectors = [[1, 2], [1, -2], [-1, 2], [-1, -2], [2, 1], [2, -1], [-2, 1], [-2, -1]];\n    return KnightPiece;\n}(Piece_1.Piece));\nexports.KnightPiece = KnightPiece;\n;\n\n//# sourceMappingURL=Knight.js.map\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Piece_1 = require(\"../Piece\");\nvar Events_1 = require(\"../Events\");\nvar PawnPiece = /** @class */ (function (_super) {\n    __extends(PawnPiece, _super);\n    function PawnPiece() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.name = \"Pawn\";\n        _this.type = \"P\";\n        _this.enpassant = false;\n        return _this;\n    }\n    PawnPiece.prototype.move = function (square) {\n        var current = this.square;\n        // Set enpassant flag if it was a big move\n        if (Math.abs(current.getPosition().y - square.getPosition().y) > 1) {\n            this.enpassant = true;\n        }\n        else {\n            this.enpassant = false;\n        }\n        if (!_super.prototype.move.call(this, square))\n            return false;\n        // Check if the move was enpassant capture\n        var back = this.square.getSibling(0, (this.color == Piece_1.COLORS.WHITE ? 1 : -1));\n        if (back && back.piece && back.piece.color != this.color && back.piece.enpassant) {\n            this.capture(back);\n        }\n        // Queening\n        var forwardSquare = this.square.getSibling(0, (this.color == Piece_1.COLORS.WHITE ? -1 : 1));\n        if (!forwardSquare) {\n            var newPiece = this.board.createPiece(\"Q\", this.color);\n            newPiece.setSquare(this.square);\n            this.board.onPromote.emit(new Events_1.ChessPromoteEvent(this.square, newPiece, this.board.SquareToFEN(this.square)));\n        }\n        return true;\n    };\n    PawnPiece.prototype.onMoved = function (square) {\n        this.board.addToHistory(\"move\", {\n            lastMoved: this.lastMoved,\n            moves: this.moves,\n            enpassant: this.enpassant,\n            piece: this,\n            from: this.square,\n            to: square\n        });\n    };\n    PawnPiece.prototype.undoMove = function (move) {\n        this.enpassant = move.enpassant;\n        this.lastMoved = move.lastMoved;\n        this.moves = move.moves;\n        this.setSquare(move.from);\n    };\n    PawnPiece.prototype.AfterPieceMoved = function (piece, square) {\n        // If any piece is moved no enpassant moves are allowed\n        // if(piece.color != this.color)\n        // {\n        // \tthis.enpassant = false;\n        // }\n    };\n    PawnPiece.prototype.getMoves = function () {\n        var moves = [];\n        var direction = (this.color == Piece_1.COLORS.WHITE ? -1 : 1);\n        // 1 Forward\n        var square1 = this.square.getSibling(0, direction);\n        if (square1 && !square1.piece) {\n            moves.push(square1);\n        }\n        // 2 Forward (if didn't move yet)\n        var square2 = this.square.getSibling(0, direction * 2);\n        if (square2 && !square2.piece && this.moves == 0 && !square1.piece) {\n            moves.push(square2);\n        }\n        // Capture 1\n        var capture1 = this.square.getSibling(1, direction);\n        if (capture1 && capture1.piece && capture1.piece.color != this.color) {\n            moves.push(capture1);\n        }\n        // Capture 2\n        var capture2 = this.square.getSibling(-1, direction);\n        if (capture2 && capture2.piece && capture2.piece.color != this.color) {\n            moves.push(capture2);\n        }\n        // En passant capture 1\n        var enpassant1 = this.square.getSibling(1, 0);\n        if (enpassant1 && enpassant1.piece && enpassant1.piece.color != this.color && enpassant1.piece.moves == 1 && enpassant1.piece.enpassant) {\n            moves.push(this.square.getSibling(1, direction));\n        }\n        /// En passant capture 2\n        var enpassant2 = this.square.getSibling(-1, 0);\n        if (enpassant2 && enpassant2.piece && enpassant2.piece.color != this.color && enpassant2.piece.moves == 1 && enpassant2.piece.enpassant) {\n            moves.push(this.square.getSibling(-1, direction));\n        }\n        return moves;\n    };\n    return PawnPiece;\n}(Piece_1.Piece));\nexports.PawnPiece = PawnPiece;\n;\n\n//# sourceMappingURL=Pawn.js.map\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Piece_1 = require(\"../Piece\");\nvar QueenPiece = /** @class */ (function (_super) {\n    __extends(QueenPiece, _super);\n    function QueenPiece() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.name = \"Queen\";\n        _this.type = \"Q\";\n        return _this;\n    }\n    QueenPiece.prototype.getMoves = function () {\n        return this.getMovesByVectors(Piece_1.MovementVectors.Omni);\n    };\n    return QueenPiece;\n}(Piece_1.Piece));\nexports.QueenPiece = QueenPiece;\n;\n\n//# sourceMappingURL=Queen.js.map\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Piece_1 = require(\"../Piece\");\nvar RookPiece = /** @class */ (function (_super) {\n    __extends(RookPiece, _super);\n    function RookPiece() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.name = \"Rook\";\n        _this.type = \"R\";\n        return _this;\n    }\n    RookPiece.prototype.getMoves = function () {\n        return this.getMovesByVectors(Piece_1.MovementVectors.Lateral);\n    };\n    return RookPiece;\n}(Piece_1.Piece));\nexports.RookPiece = RookPiece;\n;\n\n//# sourceMappingURL=Rook.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Positions = /** @class */ (function () {\n    function Positions() {\n    }\n    Positions.default = [\n        [\"bR\", \"bN\", \"bB\", \"bQ\", \"bK\", \"bB\", \"bN\", \"bR\"],\n        [\"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\"],\n        [\"wR\", \"wN\", \"wB\", \"wQ\", \"wK\", \"wB\", \"wN\", \"wR\"],\n    ];\n    Positions.castling = [\n        [\"bR\", \"\", \"\", \"\", \"bK\", \"\", \"\", \"bR\"],\n        [\"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\"],\n        [\"wR\", \"\", \"\", \"\", \"wK\", \"\", \"\", \"wR\"],\n    ];\n    Positions.singlePawn = [\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"wP\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n    ];\n    Positions.pawnSacrafice = [\n        [\"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\"],\n        [\"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\"],\n        [\"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\"],\n    ];\n    Positions.singleQueen = [\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"wQ\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n    ];\n    Positions.queenSacrafice = [\n        [\"bQ\", \"bQ\", \"bQ\", \"bQ\", \"bQ\", \"bQ\", \"bQ\", \"bQ\"],\n        [\"bQ\", \"bQ\", \"bQ\", \"bQ\", \"bQ\", \"bQ\", \"bQ\", \"bQ\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"wQ\", \"wQ\", \"wQ\", \"wQ\", \"wQ\", \"wQ\", \"wQ\", \"wQ\"],\n        [\"wQ\", \"wQ\", \"wQ\", \"wQ\", \"wQ\", \"wQ\", \"wQ\", \"wQ\"],\n    ];\n    Positions.singleBishop = [\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"bP\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"bP\", \"wB\", \"bP\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"bP\", \"\", \"\", \"\", \"\"],\n        [\"\", \"bP\", \"\", \"bP\", \"\", \"bP\", \"\", \"bP\"],\n        [\"bP\", \"\", \"bP\", \"\", \"bP\", \"\", \"bP\", \"\"],\n        [\"\", \"bP\", \"\", \"bP\", \"\", \"bP\", \"\", \"bP\"],\n    ];\n    Positions.singleRook = [\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"wR\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n    ];\n    Positions.singleKing = [\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"wK\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n    ];\n    Positions.singleKnight = [\n        [\"\", \"\", \"bP\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"bP\", \"\", \"bP\", \"\", \"\", \"\", \"\"],\n        [\"\", \"bP\", \"bP\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"wN\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n    ];\n    return Positions;\n}());\nexports.Positions = Positions;\n;\n\n//# sourceMappingURL=Positions.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Square = /** @class */ (function () {\n    function Square(board, x, y) {\n        this.piece = null;\n        this.board = null;\n        this.x = -1;\n        this.y = -1;\n        this.board = board;\n        this.x = x;\n        this.y = y;\n    }\n    Square.prototype.setPiece = function (piece) {\n        this.piece = piece;\n    };\n    Square.prototype.getPiece = function () {\n        return this.piece;\n    };\n    Square.prototype.getSibling = function (offsetX, offsetY) {\n        return this.board.getSquare(this.x + offsetX, this.y + offsetY);\n    };\n    Square.prototype.getColor = function () {\n        var xor = function (a, b) { return !a != !b; };\n        return xor(this.x % 2, this.y % 2) ? 'w' : 'b';\n    };\n    Square.prototype.getPosition = function () {\n        return {\n            x: this.x,\n            y: this.y\n        };\n    };\n    Square.prototype.getFENPosition = function () {\n        return this.board.PositionToFEN(this.x, this.y);\n    };\n    return Square;\n}());\nexports.Square = Square;\n\n//# sourceMappingURL=Square.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ChessEvent = /** @class */ (function () {\n    function ChessEvent() {\n        this.messageObject = null;\n        this._defaultPervented = false;\n        this._shouldPropagate = true;\n    }\n    ChessEvent.prototype.preventDefault = function () {\n        this._defaultPervented = true;\n    };\n    ChessEvent.prototype.isPrevented = function () {\n        return this._defaultPervented;\n    };\n    ChessEvent.prototype.trigger = function () {\n        if (this.messageObject) {\n            this.messageObject();\n        }\n    };\n    ChessEvent.prototype.stopPropagation = function () {\n        this._shouldPropagate = false;\n    };\n    ChessEvent.prototype.shouldPropagate = function () {\n        return this._shouldPropagate;\n    };\n    return ChessEvent;\n}());\nexports.ChessEvent = ChessEvent;\n;\nvar ChessEventEmitter = /** @class */ (function () {\n    function ChessEventEmitter() {\n        this.listeners = [];\n    }\n    ChessEventEmitter.prototype.emit = function (event, messageObject) {\n        if (messageObject === void 0) { messageObject = null; }\n        event.messageObject = messageObject;\n        this.listeners.forEach(function (callback) {\n            if (event.shouldPropagate()) {\n                callback(event);\n            }\n        });\n    };\n    ChessEventEmitter.prototype.broadcast = function (messsage) {\n        this.listeners.forEach(function (callback) {\n            callback(event);\n        });\n    };\n    ChessEventEmitter.prototype.on = function (callback) {\n        this.listeners.push(callback);\n    };\n    ChessEventEmitter.prototype.off = function (callback) {\n        this.listeners.splice(this.listeners.indexOf(callback), 1);\n    };\n    return ChessEventEmitter;\n}());\nexports.ChessEventEmitter = ChessEventEmitter;\n;\n\n//# sourceMappingURL=Utils.js.map\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./Chessboard\"));\n__export(require(\"./Square\"));\n__export(require(\"./Piece\"));\n__export(require(\"./Positions\"));\n__export(require(\"./Events\"));\n\n//# sourceMappingURL=index.js.map\n","exports.Chess = {\r\n\tChess: require(\"./build/Chess/index.js\"),\r\n\tChessAI: require(\"./build/ChessAI/index.js\"),\r\n};","\r\nfunction reverseArray(array)\r\n{\r\n    return array.slice().reverse();\r\n};\r\n\r\nexport var boardEvalsWhite = {\r\n\tP: [\r\n\t\t[10.0,  10.0,  10.0,  10.0,  10.0,  10.0,  10.0,  10.0],\r\n\t\t[5.0,  5.0,  5.0,  5.0,  5.0,  5.0,  5.0,  5.0],\r\n\t\t[1.0,  1.0,  2.0,  3.0,  3.0,  2.0,  1.0,  1.0],\r\n\t\t[0.5,  0.5,  1.0,  2.5,  2.5,  1.0,  0.5,  0.5],\r\n\t\t[0.0,  0.0,  0.0,  2.0,  2.0,  0.0,  0.0,  0.0],\r\n\t\t[0.5, -0.5, -1.0,  0.0,  0.0, -1.0, -0.5,  0.5],\r\n\t\t[0.5,  1.0, 1.0,  -2.0, -2.0,  1.0,  1.0,  0.5],\r\n\t\t[0.0,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0]\r\n\t],\r\n\r\n\tN: [\r\n\t\t[-5.0, -4.0, -3.0, -3.0, -3.0, -3.0, -4.0, -5.0],\r\n\t\t[-4.0, -2.0,  0.0,  0.0,  0.0,  0.0, -2.0, -4.0],\r\n\t\t[-3.0,  0.0,  1.0,  1.5,  1.5,  1.0,  0.0, -3.0],\r\n\t\t[-3.0,  0.5,  1.5,  2.0,  2.0,  1.5,  0.5, -3.0],\r\n\t\t[-3.0,  0.0,  1.5,  2.0,  2.0,  1.5,  0.0, -3.0],\r\n\t\t[-3.0,  0.5,  1.0,  1.5,  1.5,  1.0,  0.5, -3.0],\r\n\t\t[-4.0, -2.0,  0.0,  0.5,  0.5,  0.0, -2.0, -4.0],\r\n\t\t[-5.0, -4.0, -3.0, -3.0, -3.0, -3.0, -4.0, -5.0]\r\n\t\t],\r\n\r\n\tB: [\r\n\t\t[ -2.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -2.0],\r\n\t\t[ -1.0,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0, -1.0],\r\n\t\t[ -1.0,  0.0,  0.5,  1.0,  1.0,  0.5,  0.0, -1.0],\r\n\t\t[ -1.0,  0.5,  0.5,  1.0,  1.0,  0.5,  0.5, -1.0],\r\n\t\t[ -1.0,  0.0,  1.0,  1.0,  1.0,  1.0,  0.0, -1.0],\r\n\t\t[ -1.0,  1.0,  1.0,  1.0,  1.0,  1.0,  1.0, -1.0],\r\n\t\t[ -1.0,  0.5,  0.0,  0.0,  0.0,  0.0,  0.5, -1.0],\r\n\t\t[ -2.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -2.0]\r\n\t],\r\n\r\n\r\n\tR: [\r\n\t\t[  0.0,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0],\r\n\t\t[  0.5,  1.0,  1.0,  1.0,  1.0,  1.0,  1.0,  0.5],\r\n\t\t[ -0.5,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0, -0.5],\r\n\t\t[ -0.5,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0, -0.5],\r\n\t\t[ -0.5,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0, -0.5],\r\n\t\t[ -0.5,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0, -0.5],\r\n\t\t[ -0.5,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0, -0.5],\r\n\t\t[  0.0,   0.0, 0.0,  0.5,  0.5,  0.0,  0.0,  0.0]\r\n\t],\r\n\r\n\r\n\tQ: [\r\n\t\t[ -2.0, -1.0, -1.0, -0.5, -0.5, -1.0, -1.0, -2.0],\r\n\t\t[ -1.0,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0, -1.0],\r\n\t\t[ -1.0,  0.0,  0.5,  0.5,  0.5,  0.5,  0.0, -1.0],\r\n\t\t[ -0.5,  0.0,  0.5,  0.5,  0.5,  0.5,  0.0, -0.5],\r\n\t\t[  0.0,  0.0,  0.5,  0.5,  0.5,  0.5,  0.0, -0.5],\r\n\t\t[ -1.0,  0.5,  0.5,  0.5,  0.5,  0.5,  0.0, -1.0],\r\n\t\t[ -1.0,  0.0,  0.5,  0.0,  0.0,  0.0,  0.0, -1.0],\r\n\t\t[ -2.0, -1.0, -1.0, -0.5, -0.5, -1.0, -1.0, -2.0]\r\n\t],\r\n\r\n\tK: [\r\n\r\n\t\t[ -3.0, -4.0, -4.0, -5.0, -5.0, -4.0, -4.0, -3.0],\r\n\t\t[ -3.0, -4.0, -4.0, -5.0, -5.0, -4.0, -4.0, -3.0],\r\n\t\t[ -3.0, -4.0, -4.0, -5.0, -5.0, -4.0, -4.0, -3.0],\r\n\t\t[ -3.0, -4.0, -4.0, -5.0, -5.0, -4.0, -4.0, -3.0],\r\n\t\t[ -2.0, -3.0, -3.0, -4.0, -4.0, -3.0, -3.0, -2.0],\r\n\t\t[ -1.0, -2.0, -2.0, -2.0, -2.0, -2.0, -2.0, -1.0],\r\n\t\t[  2.0,  2.0,  0.0,  0.0,  0.0,  0.0,  2.0,  2.0 ],\r\n\t\t[  2.0,  3.0,  1.0,  0.0,  0.0,  1.0,  3.0,  2.0 ]\r\n\t]\r\n};\r\n\r\nexport var boardEvalsBlack = {\r\n\tP: reverseArray(boardEvalsWhite.P),\r\n\tN: reverseArray(boardEvalsWhite.N),\r\n\tB: reverseArray(boardEvalsWhite.B),\r\n\tR: reverseArray(boardEvalsWhite.R),\r\n\tQ: reverseArray(boardEvalsWhite.Q),\r\n\tK: reverseArray(boardEvalsWhite.K),\r\n};\r\n\r\nexport var BoardEvaluations = [\r\n\tboardEvalsBlack,\r\n\tboardEvalsWhite,\r\n];","import { Chessboard, Positions, COLORS } from \"@chesslib/core\";\r\nimport { BoardEvaluations } from \"./BoardEvals\";\r\n\r\nconst PIECE_VALUES = {\r\n\tP: 10,\r\n\tB: 30,\r\n\tN: 30,\r\n\tR: 50,\r\n\tQ: 80,\r\n\tK: 900,\r\n};\r\n\r\nexport class ChessAI\r\n{\r\n\tchessboard:Chessboard = null;\r\n\r\n\tmoves = [];\r\n\tplayingSide = 0;\r\n\tplayerCount = 2;\r\n\tsearchTime = 0;\r\n\r\n\tconstructor(chessboard, playingSide, playerCount)\r\n\t{\r\n\t\tthis.chessboard = chessboard;\r\n\t\tthis.playingSide = playingSide;\r\n\t\tthis.playerCount = playerCount;\r\n\t}\r\n\r\n\tsetBoard(chessboard)\r\n\t{\r\n\t\tthis.chessboard = chessboard;\r\n\t}\r\n\r\n\tloadBoard(positions)\r\n\t{\r\n\t\tthis.chessboard = Chessboard.fromPosition(positions);\r\n\t}\r\n\r\n\tdoMove(move)\r\n\t{\r\n\t\tif(!this.chessboard.doMove(move))\r\n\t\t{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tdoMoveFEN(move)\r\n\t{\r\n\t\tif(!this.chessboard.doMoveFEN(move))\r\n\t\t{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tmakeMoves(searchDepth=4, amount = 1)\r\n\t{\r\n\t\tvar bestMoves = this.getBestMoves(searchDepth, amount);\r\n\t\tif(!bestMoves.length)\r\n\t\t{\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tfor(var bestMove of bestMoves)\r\n\t\t{\r\n\t\t\tthis.doMove(bestMove);\r\n\t\t}\r\n\t\treturn bestMoves;\r\n\t}\r\n\r\n\tgetBestMove(side, searchDepth)\r\n\t{\r\n\t\t\r\n\t\tvar bestMoves = this.getBestMoves(searchDepth);\r\n\r\n\t\tif(!bestMoves.length)\r\n\t\t{\r\n\t\t \treturn this.getRandomMove();\r\n\t\t}\r\n\t\t\r\n\t\t// var bestMove = null;\r\n\t\t// var bestValue = -9999;\r\n\t\t// if(move.score > bestValue)\r\n\t\t// {\r\n\t\t// \tbestMove = move;\r\n\t\t// \tbestValue = move.score;\r\n\t\t// }\r\n\t\t\r\n\t\treturn bestMoves[0];\r\n\t}\r\n\r\n\tgetBestMoves(searchDepth, limit=5)\r\n\t{\r\n\t\tthis.searchTime = Date.now() + 100;\r\n\t\tvar moves = this.chessboard.getMovesFEN(this.playingSide);\r\n\t\t\r\n\t\tfor(let move of moves)\r\n\t\t{\r\n\t\t\tthis.chessboard.moveFEN(move.from, move.to);\r\n\t\t\t\r\n\t\t\t// Do not allow the king to be killed?\r\n\t\t\tmove.score = this.evaluateBestMove(this.playingSide, searchDepth - 1, -10000, 10000, false);\r\n\t\t\tthis.chessboard.undo();\r\n\r\n\t\t}\r\n\r\n\t\treturn moves.sort( (a, b) => {\r\n\t\t\tif(a.score < b.score)\r\n\t\t\t\treturn 1;\r\n\t\t\tif(a.score > b.score)\r\n\t\t\t\treturn -1;\r\n\t\t\treturn 0;\r\n\t\t}).slice(0, limit);\r\n\t}\r\n\t\r\n\tgetNextPlayerSide(playerSide)\r\n\t{\r\n\t\treturn (playerSide + 1) % this.playerCount;\r\n\t}\r\n\r\n\tevaluateBestMove(playerSide, depth, alpha, beta, isMaximisingPlayer)\r\n\t{\r\n\t\tif (depth === 0)\r\n\t\t{\r\n\t\t\treturn this.evaluateBoard(this.playingSide);\r\n\t\t}\r\n\t\tvar currentPlayer = this.getNextPlayerSide(playerSide);\r\n\t\tvar moves = this.chessboard.getMoves(currentPlayer);\r\n\r\n\t\tif (isMaximisingPlayer)\r\n\t\t{\r\n\t\t\tvar bestValue = -9999;\r\n\t\t\tfor (let move of moves)\r\n\t\t\t{\r\n\t\t\t\tthis.chessboard.move(move.from, move.to);\r\n\t\t\t\tbestValue = Math.max(bestValue, this.evaluateBestMove(currentPlayer, depth - 1, alpha, beta, !isMaximisingPlayer));\r\n\t\t\t\tthis.chessboard.undo();\r\n\t\t\t\talpha = Math.max(alpha, bestValue);\r\n\t\t\t\tif (beta <= alpha)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn bestValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn bestValue;\r\n\t\t} else {\r\n\t\t\tvar bestValue = 9999;\r\n\t\t\tfor (let move of moves)\r\n\t\t\t{\r\n\t\t\t\tthis.chessboard.move(move.from, move.to);\r\n\t\t\t\tbestValue = Math.min(bestValue, this.evaluateBestMove(currentPlayer, depth - 1, alpha, beta, !isMaximisingPlayer));\r\n\t\t\t\tthis.chessboard.undo();\r\n\t\t\t\t\r\n\t\t\t\tbeta = Math.min(beta, bestValue);\r\n\t\t\t\tif (beta <= alpha)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn bestValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn bestValue;\r\n\t\t}\r\n\t}\r\n\r\n\tgetRandomMove()\r\n\t{\r\n\t\tvar moves = this.chessboard.getMovesFEN(this.playingSide);\r\n\t\tif(!moves.length)\r\n\t\t\treturn null;\r\n\t\tvar randMove = moves[Math.floor(Math.random() * moves.length)];\r\n\t\trandMove.score = 0;\r\n\t\treturn randMove;\r\n\t}\r\n\r\n\tevaluateBoard(side)\r\n\t{\r\n\t\tvar boardValue = 0;\r\n\t\tthis.chessboard.forEachPiece( piece => {\r\n\t\t\tif(side == piece.color)\r\n\t\t\t{\r\n\t\t\t\tboardValue += PIECE_VALUES[piece.type] + BoardEvaluations[piece.color][piece.type][piece.square.y][piece.square.x];\r\n\t\t\t}else{\r\n\t\t\t\tboardValue -= PIECE_VALUES[piece.type] + BoardEvaluations[piece.color][piece.type][piece.square.y][piece.square.x];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t});\r\n\t\treturn boardValue;\r\n\t}\r\n\t\r\n};","export class ChessAIWorker\r\n{\r\n\tworker: Worker = null;\r\n\t\r\n\tlisteners = [];\r\n\tconstructor(workerPath)\r\n\t{\r\n\t\tthis.worker = new Worker( workerPath );\r\n\t\tthis.worker.onmessage = (message) => {\r\n\t\t\t\r\n\t\t\tif(this.listeners[message.data.event])\r\n\t\t\t{\r\n\t\t\t\tfor(var event of this.listeners[message.data.event])\r\n\t\t\t\t{\r\n\t\t\t\t\tevent.apply(event, message.data.arguments);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\temit(event, data)\r\n\t{\r\n\t\tthis.worker.postMessage(event);\r\n\t}\r\n\t\r\n\ton(type, callback)\r\n\t{\r\n\t\tif(!this.listeners[type])\r\n\t\t{\r\n\t\t\tthis.listeners[type] = [];\r\n\t\t}\r\n\r\n\t\tthis.listeners[type].push(callback);\r\n\t}\r\n\t\r\n\texec(method, ...args: any[])\r\n\t{\r\n\t\tthis.worker.postMessage({\r\n\t\t\tmethod: method,\r\n\t\t\targuments: Array.prototype.slice.call(arguments).slice(1)\r\n\t\t});\r\n\t}\r\n\r\n\tdestroy()\r\n\t{\r\n\t\tthis.worker.terminate();\r\n\t}\r\n};\r\n\r\n","export * from \"./ChessAI\";\r\nexport * from \"./ChessAIWorker\";","import * as ChessAI from \"./ChessAI\";\r\n\r\ndeclare let window:any;\r\nwindow.ChessAI = ChessAI;\r\n\r\nexport * from \"./ChessAI\";\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvQGNoZXNzbGliL2NvcmUvYnVpbGQvQ2hlc3NBSS9Cb2FyZEV2YWxzLmpzIiwibm9kZV9tb2R1bGVzL0BjaGVzc2xpYi9jb3JlL2J1aWxkL0NoZXNzQUkvQ2hlc3NBSS5qcyIsIm5vZGVfbW9kdWxlcy9AY2hlc3NsaWIvY29yZS9idWlsZC9DaGVzc0FJL0NoZXNzQUlXb3JrZXIuanMiLCJub2RlX21vZHVsZXMvQGNoZXNzbGliL2NvcmUvYnVpbGQvQ2hlc3NBSS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9AY2hlc3NsaWIvY29yZS9idWlsZC9DaGVzcy9DaGVzc2JvYXJkLmpzIiwibm9kZV9tb2R1bGVzL0BjaGVzc2xpYi9jb3JlL2J1aWxkL0NoZXNzL0V2ZW50cy5qcyIsIm5vZGVfbW9kdWxlcy9AY2hlc3NsaWIvY29yZS9idWlsZC9DaGVzcy9QaWVjZS5qcyIsIm5vZGVfbW9kdWxlcy9AY2hlc3NsaWIvY29yZS9idWlsZC9DaGVzcy9QaWVjZXMvQmlzaG9wLmpzIiwibm9kZV9tb2R1bGVzL0BjaGVzc2xpYi9jb3JlL2J1aWxkL0NoZXNzL1BpZWNlcy9LaW5nLmpzIiwibm9kZV9tb2R1bGVzL0BjaGVzc2xpYi9jb3JlL2J1aWxkL0NoZXNzL1BpZWNlcy9LbmlnaHQuanMiLCJub2RlX21vZHVsZXMvQGNoZXNzbGliL2NvcmUvYnVpbGQvQ2hlc3MvUGllY2VzL1Bhd24uanMiLCJub2RlX21vZHVsZXMvQGNoZXNzbGliL2NvcmUvYnVpbGQvQ2hlc3MvUGllY2VzL1F1ZWVuLmpzIiwibm9kZV9tb2R1bGVzL0BjaGVzc2xpYi9jb3JlL2J1aWxkL0NoZXNzL1BpZWNlcy9Sb29rLmpzIiwibm9kZV9tb2R1bGVzL0BjaGVzc2xpYi9jb3JlL2J1aWxkL0NoZXNzL1Bvc2l0aW9ucy5qcyIsIm5vZGVfbW9kdWxlcy9AY2hlc3NsaWIvY29yZS9idWlsZC9DaGVzcy9TcXVhcmUuanMiLCJub2RlX21vZHVsZXMvQGNoZXNzbGliL2NvcmUvYnVpbGQvQ2hlc3MvVXRpbHMuanMiLCJub2RlX21vZHVsZXMvQGNoZXNzbGliL2NvcmUvYnVpbGQvQ2hlc3MvaW5kZXguanMiLCJub2RlX21vZHVsZXMvQGNoZXNzbGliL2NvcmUvaW5kZXguanMiLCJzb3VyY2UvQ2hlc3NBSS9Cb2FyZEV2YWxzLnRzIiwic291cmNlL0NoZXNzQUkvQ2hlc3NBSS50cyIsInNvdXJjZS9DaGVzc0FJL0NoZXNzQUlXb3JrZXIudHMiLCJzb3VyY2UvQ2hlc3NBSS9pbmRleC50cyIsInNvdXJjZS9jbGllbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNGQSxzQkFBc0IsS0FBSztJQUV2QixNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ25DLENBQUM7QUFBQSxDQUFDO0FBRVMsUUFBQSxlQUFlLEdBQUc7SUFDNUIsQ0FBQyxFQUFFO1FBQ0YsQ0FBQyxJQUFJLEVBQUcsSUFBSSxFQUFHLElBQUksRUFBRyxJQUFJLEVBQUcsSUFBSSxFQUFHLElBQUksRUFBRyxJQUFJLEVBQUcsSUFBSSxDQUFDO1FBQ3ZELENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsQ0FBQztRQUMvQyxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLENBQUM7UUFDL0MsQ0FBQyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxDQUFDO1FBQy9DLENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsQ0FBQztRQUMvQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFHLEdBQUcsQ0FBQztRQUMvQyxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUUsR0FBRyxFQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxDQUFDO1FBQy9DLENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsQ0FBQztLQUMvQztJQUVELENBQUMsRUFBRTtRQUNGLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDaEQsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDaEQsQ0FBQyxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNoRCxDQUFDLENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2hELENBQUMsQ0FBQyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDaEQsQ0FBQyxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNoRCxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNoRCxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO0tBQy9DO0lBRUYsQ0FBQyxFQUFFO1FBQ0YsQ0FBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNqRCxDQUFFLENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2pELENBQUUsQ0FBQyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDakQsQ0FBRSxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNqRCxDQUFFLENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2pELENBQUUsQ0FBQyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDakQsQ0FBRSxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNqRCxDQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO0tBQ2pEO0lBR0QsQ0FBQyxFQUFFO1FBQ0YsQ0FBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxDQUFDO1FBQ2pELENBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsQ0FBQztRQUNqRCxDQUFFLENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2pELENBQUUsQ0FBQyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDakQsQ0FBRSxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNqRCxDQUFFLENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2pELENBQUUsQ0FBQyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDakQsQ0FBRyxHQUFHLEVBQUksR0FBRyxFQUFFLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxDQUFDO0tBQ2pEO0lBR0QsQ0FBQyxFQUFFO1FBQ0YsQ0FBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNqRCxDQUFFLENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2pELENBQUUsQ0FBQyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDakQsQ0FBRSxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNqRCxDQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNqRCxDQUFFLENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2pELENBQUUsQ0FBQyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDakQsQ0FBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztLQUNqRDtJQUVELENBQUMsRUFBRTtRQUVGLENBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDakQsQ0FBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNqRCxDQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2pELENBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDakQsQ0FBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNqRCxDQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2pELENBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsQ0FBRTtRQUNsRCxDQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLENBQUU7S0FDbEQ7Q0FDRCxDQUFDO0FBRVMsUUFBQSxlQUFlLEdBQUc7SUFDNUIsQ0FBQyxFQUFFLFlBQVksQ0FBQyx1QkFBZSxDQUFDLENBQUMsQ0FBQztJQUNsQyxDQUFDLEVBQUUsWUFBWSxDQUFDLHVCQUFlLENBQUMsQ0FBQyxDQUFDO0lBQ2xDLENBQUMsRUFBRSxZQUFZLENBQUMsdUJBQWUsQ0FBQyxDQUFDLENBQUM7SUFDbEMsQ0FBQyxFQUFFLFlBQVksQ0FBQyx1QkFBZSxDQUFDLENBQUMsQ0FBQztJQUNsQyxDQUFDLEVBQUUsWUFBWSxDQUFDLHVCQUFlLENBQUMsQ0FBQyxDQUFDO0lBQ2xDLENBQUMsRUFBRSxZQUFZLENBQUMsdUJBQWUsQ0FBQyxDQUFDLENBQUM7Q0FDbEMsQ0FBQztBQUVTLFFBQUEsZ0JBQWdCLEdBQUc7SUFDN0IsdUJBQWU7SUFDZix1QkFBZTtDQUNmLENB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U0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztTQUN6RCxDQUFDLENBQUM7SUFDSixDQUFDO0lBRUQsK0JBQU8sR0FBUDtRQUVDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDekIsQ0FBQztJQUNGLG9CQUFDO0FBQUQsQ0EvQ0EsQUErQ0MsSUFBQTtBQS9DWSxzQ0FBYTtBQStDekIsQ0FBQzs7Ozs7OztBQy9DRiwrQkFBMEI7QUFDMUIscUNBQWdDOzs7Ozs7O0FDRGhDLG1DQUFxQztBQUdyQyxNQUFNLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztBQUV6QiwrQkFBMEIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5mdW5jdGlvbiByZXZlcnNlQXJyYXkoYXJyYXkpIHtcbiAgICByZXR1cm4gYXJyYXkuc2xpY2UoKS5yZXZlcnNlKCk7XG59XG47XG5leHBvcnRzLmJvYXJkRXZhbHNXaGl0ZSA9IHtcbiAgICBQOiBbXG4gICAgICAgIFsxMC4wLCAxMC4wLCAxMC4wLCAxMC4wLCAxMC4wLCAxMC4wLCAxMC4wLCAxMC4wXSxcbiAgICAgICAgWzUuMCwgNS4wLCA1LjAsIDUuMCwgNS4wLCA1LjAsIDUuMCwgNS4wXSxcbiAgICAgICAgWzEuMCwgMS4wLCAyLjAsIDMuMCwgMy4wLCAyLjAsIDEuMCwgMS4wXSxcbiAgICAgICAgWzAuNSwgMC41LCAxLjAsIDIuNSwgMi41LCAxLjAsIDAuNSwgMC41XSxcbiAgICAgICAgWzAuMCwgMC4wLCAwLjAsIDIuMCwgMi4wLCAwLjAsIDAuMCwgMC4wXSxcbiAgICAgICAgWzAuNSwgLTAuNSwgLTEuMCwgMC4wLCAwLjAsIC0xLjAsIC0wLjUsIDAuNV0sXG4gICAgICAgIFswLjUsIDEuMCwgMS4wLCAtMi4wLCAtMi4wLCAxLjAsIDEuMCwgMC41XSxcbiAgICAgICAgWzAuMCwgMC4wLCAwLjAsIDAuMCwgMC4wLCAwLjAsIDAuMCwgMC4wXVxuICAgIF0sXG4gICAgTjogW1xuICAgICAgICBbLTUuMCwgLTQuMCwgLTMuMCwgLTMuMCwgLTMuMCwgLTMuMCwgLTQuMCwgLTUuMF0sXG4gICAgICAgIFstNC4wLCAtMi4wLCAwLjAsIDAuMCwgMC4wLCAwLjAsIC0yLjAsIC00LjBdLFxuICAgICAgICBbLTMuMCwgMC4wLCAxLjAsIDEuNSwgMS41LCAxLjAsIDAuMCwgLTMuMF0sXG4gICAgICAgIFstMy4wLCAwLjUsIDEuNSwgMi4wLCAyLjAsIDEuNSwgMC41LCAtMy4wXSxcbiAgICAgICAgWy0zLjAsIDAuMCwgMS41LCAyLjAsIDIuMCwgMS41LCAwLjAsIC0zLjBdLFxuICAgICAgICBbLTMuMCwgMC41LCAxLjAsIDEuNSwgMS41LCAxLjAsIDAuNSwgLTMuMF0sXG4gICAgICAgIFstNC4wLCAtMi4wLCAwLjAsIDAuNSwgMC41LCAwLjAsIC0yLjAsIC00LjBdLFxuICAgICAgICBbLTUuMCwgLTQuMCwgLTMuMCwgLTMuMCwgLTMuMCwgLTMuMCwgLTQuMCwgLTUuMF1cbiAgICBdLFxuICAgIEI6IFtcbiAgICAgICAgWy0yLjAsIC0xLjAsIC0xLjAsIC0xLjAsIC0xLjAsIC0xLjAsIC0xLjAsIC0yLjBdLFxuICAgICAgICBbLTEuMCwgMC4wLCAwLjAsIDAuMCwgMC4wLCAwLjAsIDAuMCwgLTEuMF0sXG4gICAgICAgIFstMS4wLCAwLjAsIDAuNSwgMS4wLCAxLjAsIDAuNSwgMC4wLCAtMS4wXSxcbiAgICAgICAgWy0xLjAsIDAuNSwgMC41LCAxLjAsIDEuMCwgMC41LCAwLjUsIC0xLjBdLFxuICAgICAgICBbLTEuMCwgMC4wLCAxLjAsIDEuMCwgMS4wLCAxLjAsIDAuMCwgLTEuMF0sXG4gICAgICAgIFstMS4wLCAxLjAsIDEuMCwgMS4wLCAxLjAsIDEuMCwgMS4wLCAtMS4wXSxcbiAgICAgICAgWy0xLjAsIDAuNSwgMC4wLCAwLjAsIDAuMCwgMC4wLCAwLjUsIC0xLjBdLFxuICAgICAgICBbLTIuMCwgLTEuMCwgLTEuMCwgLTEuMCwgLTEuMCwgLTEuMCwgLTEuMCwgLTIuMF1cbiAgICBdLFxuICAgIFI6IFtcbiAgICAgICAgWzAuMCwgMC4wLCAwLjAsIDAuMCwgMC4wLCAwLjAsIDAuMCwgMC4wXSxcbiAgICAgICAgWzAuNSwgMS4wLCAxLjAsIDEuMCwgMS4wLCAxLjAsIDEuMCwgMC41XSxcbiAgICAgICAgWy0wLjUsIDAuMCwgMC4wLCAwLjAsIDAuMCwgMC4wLCAwLjAsIC0wLjVdLFxuICAgICAgICBbLTAuNSwgMC4wLCAwLjAsIDAuMCwgMC4wLCAwLjAsIDAuMCwgLTAuNV0sXG4gICAgICAgIFstMC41LCAwLjAsIDAuMCwgMC4wLCAwLjAsIDAuMCwgMC4wLCAtMC41XSxcbiAgICAgICAgWy0wLjUsIDAuMCwgMC4wLCAwLjAsIDAuMCwgMC4wLCAwLjAsIC0wLjVdLFxuICAgICAgICBbLTAuNSwgMC4wLCAwLjAsIDAuMCwgMC4wLCAwLjAsIDAuMCwgLTAuNV0sXG4gICAgICAgIFswLjAsIDAuMCwgMC4wLCAwLjUsIDAuNSwgMC4wLCAwLjAsIDAuMF1cbiAgICBdLFxuICAgIFE6IFtcbiAgICAgICAgWy0yLjAsIC0xLjAsIC0xLjAsIC0wLjUsIC0wLjUsIC0xLjAsIC0xLjAsIC0yLjBdLFxuICAgICAgICBbLTEuMCwgMC4wLCAwLjAsIDAuMCwgMC4wLCAwLjAsIDAuMCwgLTEuMF0sXG4gICAgICAgIFstMS4wLCAwLjAsIDAuNSwgMC41LCAwLjUsIDAuNSwgMC4wLCAtMS4wXSxcbiAgICAgICAgWy0wLjUsIDAuMCwgMC41LCAwLjUsIDAuNSwgMC41LCAwLjAsIC0wLjVdLFxuICAgICAgICBbMC4wLCAwLjAsIDAuNSwgMC41LCAwLjUsIDAuNSwgMC4wLCAtMC41XSxcbiAgICAgICAgWy0xLjAsIDAuNSwgMC41LCAwLjUsIDAuNSwgMC41LCAwLjAsIC0xLjBdLFxuICAgICAgICBbLTEuMCwgMC4wLCAwLjUsIDAuMCwgMC4wLCAwLjAsIDAuMCwgLTEuMF0sXG4gICAgICAgIFstMi4wLCAtMS4wLCAtMS4wLCAtMC41LCAtMC41LCAtMS4wLCAtMS4wLCAtMi4wXVxuICAgIF0sXG4gICAgSzogW1xuICAgICAgICBbLTMuMCwgLTQuMCwgLTQuMCwgLTUuMCwgLTUuMCwgLTQuMCwgLTQuMCwgLTMuMF0sXG4gICAgICAgIFstMy4wLCAtNC4wLCAtNC4wLCAtNS4wLCAtNS4wLCAtNC4wLCAtNC4wLCAtMy4wXSxcbiAgICAgICAgWy0zLjAsIC00LjAsIC00LjAsIC01LjAsIC01LjAsIC00LjAsIC00LjAsIC0zLjBdLFxuICAgICAgICBbLTMuMCwgLTQuMCwgLTQuMCwgLTUuMCwgLTUuMCwgLTQuMCwgLTQuMCwgLTMuMF0sXG4gICAgICAgIFstMi4wLCAtMy4wLCAtMy4wLCAtNC4wLCAtNC4wLCAtMy4wLCAtMy4wLCAtMi4wXSxcbiAgICAgICAgWy0xLjAsIC0yLjAsIC0yLjAsIC0yLjAsIC0yLjAsIC0yLjAsIC0yLjAsIC0xLjBdLFxuICAgICAgICBbMi4wLCAyLjAsIDAuMCwgMC4wLCAwLjAsIDAuMCwgMi4wLCAyLjBdLFxuICAgICAgICBbMi4wLCAzLjAsIDEuMCwgMC4wLCAwLjAsIDEuMCwgMy4wLCAyLjBdXG4gICAgXVxufTtcbmV4cG9ydHMuYm9hcmRFdmFsc0JsYWNrID0ge1xuICAgIFA6IHJldmVyc2VBcnJheShleHBvcnRzLmJvYXJkRXZhbHNXaGl0ZS5QKSxcbiAgICBOOiByZXZlcnNlQXJyYXkoZXhwb3J0cy5ib2FyZEV2YWxzV2hpdGUuTiksXG4gICAgQjogcmV2ZXJzZUFycmF5KGV4cG9ydHMuYm9hcmRFdmFsc1doaXRlLkIpLFxuICAgIFI6IHJldmVyc2VBcnJheShleHBvcnRzLmJvYXJkRXZhbHNXaGl0ZS5SKSxcbiAgICBROiByZXZlcnNlQXJyYXkoZXhwb3J0cy5ib2FyZEV2YWxzV2hpdGUuUSksXG4gICAgSzogcmV2ZXJzZUFycmF5KGV4cG9ydHMuYm9hcmRFdmFsc1doaXRlLkspLFxufTtcbmV4cG9ydHMuQm9hcmRFdmFsdWF0aW9ucyA9IFtcbiAgICBleHBvcnRzLmJvYXJkRXZhbHNCbGFjayxcbiAgICBleHBvcnRzLmJvYXJkRXZhbHNXaGl0ZSxcbl07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJvYXJkRXZhbHMuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBDaGVzc18xID0gcmVxdWlyZShcIi4uL0NoZXNzXCIpO1xudmFyIEJvYXJkRXZhbHNfMSA9IHJlcXVpcmUoXCIuL0JvYXJkRXZhbHNcIik7XG52YXIgUElFQ0VfVkFMVUVTID0ge1xuICAgIFA6IDEwLFxuICAgIEI6IDMwLFxuICAgIE46IDMwLFxuICAgIFI6IDUwLFxuICAgIFE6IDgwLFxuICAgIEs6IDkwMCxcbn07XG52YXIgQ2hlc3NBSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDaGVzc0FJKGNoZXNzYm9hcmQsIHBsYXlpbmdTaWRlLCBwbGF5ZXJDb3VudCkge1xuICAgICAgICB0aGlzLmNoZXNzYm9hcmQgPSBudWxsO1xuICAgICAgICB0aGlzLm1vdmVzID0gW107XG4gICAgICAgIHRoaXMucGxheWluZ1NpZGUgPSAwO1xuICAgICAgICB0aGlzLnBsYXllckNvdW50ID0gMjtcbiAgICAgICAgdGhpcy5zZWFyY2hUaW1lID0gMDtcbiAgICAgICAgdGhpcy5jaGVzc2JvYXJkID0gY2hlc3Nib2FyZDtcbiAgICAgICAgdGhpcy5wbGF5aW5nU2lkZSA9IHBsYXlpbmdTaWRlO1xuICAgICAgICB0aGlzLnBsYXllckNvdW50ID0gcGxheWVyQ291bnQ7XG4gICAgfVxuICAgIENoZXNzQUkucHJvdG90eXBlLnNldEJvYXJkID0gZnVuY3Rpb24gKGNoZXNzYm9hcmQpIHtcbiAgICAgICAgdGhpcy5jaGVzc2JvYXJkID0gY2hlc3Nib2FyZDtcbiAgICB9O1xuICAgIENoZXNzQUkucHJvdG90eXBlLmxvYWRCb2FyZCA9IGZ1bmN0aW9uIChwb3NpdGlvbnMpIHtcbiAgICAgICAgdGhpcy5jaGVzc2JvYXJkID0gQ2hlc3NfMS5DaGVzc2JvYXJkLmZyb21Qb3NpdGlvbihwb3NpdGlvbnMpO1xuICAgIH07XG4gICAgQ2hlc3NBSS5wcm90b3R5cGUuZG9Nb3ZlID0gZnVuY3Rpb24gKG1vdmUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNoZXNzYm9hcmQuZG9Nb3ZlKG1vdmUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBDaGVzc0FJLnByb3RvdHlwZS5kb01vdmVGRU4gPSBmdW5jdGlvbiAobW92ZSkge1xuICAgICAgICBpZiAoIXRoaXMuY2hlc3Nib2FyZC5kb01vdmVGRU4obW92ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIENoZXNzQUkucHJvdG90eXBlLm1ha2VNb3ZlcyA9IGZ1bmN0aW9uIChzZWFyY2hEZXB0aCwgYW1vdW50KSB7XG4gICAgICAgIGlmIChzZWFyY2hEZXB0aCA9PT0gdm9pZCAwKSB7IHNlYXJjaERlcHRoID0gNDsgfVxuICAgICAgICBpZiAoYW1vdW50ID09PSB2b2lkIDApIHsgYW1vdW50ID0gMTsgfVxuICAgICAgICB2YXIgYmVzdE1vdmVzID0gdGhpcy5nZXRCZXN0TW92ZXMoc2VhcmNoRGVwdGgsIGFtb3VudCk7XG4gICAgICAgIGlmICghYmVzdE1vdmVzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBiZXN0TW92ZXNfMSA9IGJlc3RNb3ZlczsgX2kgPCBiZXN0TW92ZXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBiZXN0TW92ZSA9IGJlc3RNb3Zlc18xW19pXTtcbiAgICAgICAgICAgIHRoaXMuZG9Nb3ZlKGJlc3RNb3ZlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmVzdE1vdmVzO1xuICAgIH07XG4gICAgQ2hlc3NBSS5wcm90b3R5cGUuZ2V0QmVzdE1vdmUgPSBmdW5jdGlvbiAoc2lkZSwgc2VhcmNoRGVwdGgpIHtcbiAgICAgICAgdmFyIGJlc3RNb3ZlcyA9IHRoaXMuZ2V0QmVzdE1vdmVzKHNlYXJjaERlcHRoKTtcbiAgICAgICAgaWYgKCFiZXN0TW92ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRSYW5kb21Nb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdmFyIGJlc3RNb3ZlID0gbnVsbDtcbiAgICAgICAgLy8gdmFyIGJlc3RWYWx1ZSA9IC05OTk5O1xuICAgICAgICAvLyBpZihtb3ZlLnNjb3JlID4gYmVzdFZhbHVlKVxuICAgICAgICAvLyB7XG4gICAgICAgIC8vIFx0YmVzdE1vdmUgPSBtb3ZlO1xuICAgICAgICAvLyBcdGJlc3RWYWx1ZSA9IG1vdmUuc2NvcmU7XG4gICAgICAgIC8vIH1cbiAgICAgICAgcmV0dXJuIGJlc3RNb3Zlc1swXTtcbiAgICB9O1xuICAgIENoZXNzQUkucHJvdG90eXBlLmdldEJlc3RNb3ZlcyA9IGZ1bmN0aW9uIChzZWFyY2hEZXB0aCwgbGltaXQpIHtcbiAgICAgICAgaWYgKGxpbWl0ID09PSB2b2lkIDApIHsgbGltaXQgPSA1OyB9XG4gICAgICAgIHRoaXMuc2VhcmNoVGltZSA9IERhdGUubm93KCkgKyAxMDA7XG4gICAgICAgIHZhciBtb3ZlcyA9IHRoaXMuY2hlc3Nib2FyZC5nZXRNb3Zlc0ZFTih0aGlzLnBsYXlpbmdTaWRlKTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBtb3Zlc18xID0gbW92ZXM7IF9pIDwgbW92ZXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBtb3ZlID0gbW92ZXNfMVtfaV07XG4gICAgICAgICAgICB0aGlzLmNoZXNzYm9hcmQubW92ZUZFTihtb3ZlLmZyb20sIG1vdmUudG8pO1xuICAgICAgICAgICAgLy8gRG8gbm90IGFsbG93IHRoZSBraW5nIHRvIGJlIGtpbGxlZD9cbiAgICAgICAgICAgIG1vdmUuc2NvcmUgPSB0aGlzLmV2YWx1YXRlQmVzdE1vdmUodGhpcy5wbGF5aW5nU2lkZSwgc2VhcmNoRGVwdGggLSAxLCAtMTAwMDAsIDEwMDAwLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmNoZXNzYm9hcmQudW5kbygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtb3Zlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICBpZiAoYS5zY29yZSA8IGIuc2NvcmUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICBpZiAoYS5zY29yZSA+IGIuc2NvcmUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0pLnNsaWNlKDAsIGxpbWl0KTtcbiAgICB9O1xuICAgIENoZXNzQUkucHJvdG90eXBlLmdldE5leHRQbGF5ZXJTaWRlID0gZnVuY3Rpb24gKHBsYXllclNpZGUpIHtcbiAgICAgICAgcmV0dXJuIChwbGF5ZXJTaWRlICsgMSkgJSB0aGlzLnBsYXllckNvdW50O1xuICAgIH07XG4gICAgQ2hlc3NBSS5wcm90b3R5cGUuZXZhbHVhdGVCZXN0TW92ZSA9IGZ1bmN0aW9uIChwbGF5ZXJTaWRlLCBkZXB0aCwgYWxwaGEsIGJldGEsIGlzTWF4aW1pc2luZ1BsYXllcikge1xuICAgICAgICBpZiAoZGVwdGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV2YWx1YXRlQm9hcmQodGhpcy5wbGF5aW5nU2lkZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGN1cnJlbnRQbGF5ZXIgPSB0aGlzLmdldE5leHRQbGF5ZXJTaWRlKHBsYXllclNpZGUpO1xuICAgICAgICB2YXIgbW92ZXMgPSB0aGlzLmNoZXNzYm9hcmQuZ2V0TW92ZXMoY3VycmVudFBsYXllcik7XG4gICAgICAgIGlmIChpc01heGltaXNpbmdQbGF5ZXIpIHtcbiAgICAgICAgICAgIHZhciBiZXN0VmFsdWUgPSAtOTk5OTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgbW92ZXNfMiA9IG1vdmVzOyBfaSA8IG1vdmVzXzIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1vdmUgPSBtb3Zlc18yW19pXTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZXNzYm9hcmQubW92ZShtb3ZlLmZyb20sIG1vdmUudG8pO1xuICAgICAgICAgICAgICAgIGJlc3RWYWx1ZSA9IE1hdGgubWF4KGJlc3RWYWx1ZSwgdGhpcy5ldmFsdWF0ZUJlc3RNb3ZlKGN1cnJlbnRQbGF5ZXIsIGRlcHRoIC0gMSwgYWxwaGEsIGJldGEsICFpc01heGltaXNpbmdQbGF5ZXIpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZXNzYm9hcmQudW5kbygpO1xuICAgICAgICAgICAgICAgIGFscGhhID0gTWF0aC5tYXgoYWxwaGEsIGJlc3RWYWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGJldGEgPD0gYWxwaGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJlc3RWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYmVzdFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGJlc3RWYWx1ZSA9IDk5OTk7XG4gICAgICAgICAgICBmb3IgKHZhciBfYSA9IDAsIG1vdmVzXzMgPSBtb3ZlczsgX2EgPCBtb3Zlc18zLmxlbmd0aDsgX2ErKykge1xuICAgICAgICAgICAgICAgIHZhciBtb3ZlID0gbW92ZXNfM1tfYV07XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVzc2JvYXJkLm1vdmUobW92ZS5mcm9tLCBtb3ZlLnRvKTtcbiAgICAgICAgICAgICAgICBiZXN0VmFsdWUgPSBNYXRoLm1pbihiZXN0VmFsdWUsIHRoaXMuZXZhbHVhdGVCZXN0TW92ZShjdXJyZW50UGxheWVyLCBkZXB0aCAtIDEsIGFscGhhLCBiZXRhLCAhaXNNYXhpbWlzaW5nUGxheWVyKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVzc2JvYXJkLnVuZG8oKTtcbiAgICAgICAgICAgICAgICBiZXRhID0gTWF0aC5taW4oYmV0YSwgYmVzdFZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAoYmV0YSA8PSBhbHBoYSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmVzdFZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBiZXN0VmFsdWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENoZXNzQUkucHJvdG90eXBlLmdldFJhbmRvbU1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtb3ZlcyA9IHRoaXMuY2hlc3Nib2FyZC5nZXRNb3Zlc0ZFTih0aGlzLnBsYXlpbmdTaWRlKTtcbiAgICAgICAgaWYgKCFtb3Zlcy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgdmFyIHJhbmRNb3ZlID0gbW92ZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbW92ZXMubGVuZ3RoKV07XG4gICAgICAgIHJhbmRNb3ZlLnNjb3JlID0gMDtcbiAgICAgICAgcmV0dXJuIHJhbmRNb3ZlO1xuICAgIH07XG4gICAgQ2hlc3NBSS5wcm90b3R5cGUuZXZhbHVhdGVCb2FyZCA9IGZ1bmN0aW9uIChzaWRlKSB7XG4gICAgICAgIHZhciBib2FyZFZhbHVlID0gMDtcbiAgICAgICAgdGhpcy5jaGVzc2JvYXJkLmZvckVhY2hQaWVjZShmdW5jdGlvbiAocGllY2UpIHtcbiAgICAgICAgICAgIGlmIChzaWRlID09IHBpZWNlLmNvbG9yKSB7XG4gICAgICAgICAgICAgICAgYm9hcmRWYWx1ZSArPSBQSUVDRV9WQUxVRVNbcGllY2UudHlwZV0gKyBCb2FyZEV2YWxzXzEuQm9hcmRFdmFsdWF0aW9uc1twaWVjZS5jb2xvcl1bcGllY2UudHlwZV1bcGllY2Uuc3F1YXJlLnldW3BpZWNlLnNxdWFyZS54XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJvYXJkVmFsdWUgLT0gUElFQ0VfVkFMVUVTW3BpZWNlLnR5cGVdICsgQm9hcmRFdmFsc18xLkJvYXJkRXZhbHVhdGlvbnNbcGllY2UuY29sb3JdW3BpZWNlLnR5cGVdW3BpZWNlLnNxdWFyZS55XVtwaWVjZS5zcXVhcmUueF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYm9hcmRWYWx1ZTtcbiAgICB9O1xuICAgIHJldHVybiBDaGVzc0FJO1xufSgpKTtcbmV4cG9ydHMuQ2hlc3NBSSA9IENoZXNzQUk7XG47XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNoZXNzQUkuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBDaGVzc0FJV29ya2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENoZXNzQUlXb3JrZXIod29ya2VyUGF0aCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLndvcmtlciA9IG51bGw7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gW107XG4gICAgICAgIHRoaXMud29ya2VyID0gbmV3IFdvcmtlcih3b3JrZXJQYXRoKTtcbiAgICAgICAgdGhpcy53b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5saXN0ZW5lcnNbbWVzc2FnZS5kYXRhLmV2ZW50XSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy5saXN0ZW5lcnNbbWVzc2FnZS5kYXRhLmV2ZW50XTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV2ZW50ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICBldmVudC5hcHBseShldmVudCwgbWVzc2FnZS5kYXRhLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBDaGVzc0FJV29ya2VyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gKGV2ZW50LCBkYXRhKSB7XG4gICAgICAgIHRoaXMud29ya2VyLnBvc3RNZXNzYWdlKGV2ZW50KTtcbiAgICB9O1xuICAgIENoZXNzQUlXb3JrZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKHR5cGUsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICghdGhpcy5saXN0ZW5lcnNbdHlwZV0pIHtcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW3R5cGVdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5saXN0ZW5lcnNbdHlwZV0ucHVzaChjYWxsYmFjayk7XG4gICAgfTtcbiAgICBDaGVzc0FJV29ya2VyLnByb3RvdHlwZS5leGVjID0gZnVuY3Rpb24gKG1ldGhvZCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgICAgIGFyZ3VtZW50czogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKS5zbGljZSgxKVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENoZXNzQUlXb3JrZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMud29ya2VyLnRlcm1pbmF0ZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIENoZXNzQUlXb3JrZXI7XG59KCkpO1xuZXhwb3J0cy5DaGVzc0FJV29ya2VyID0gQ2hlc3NBSVdvcmtlcjtcbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q2hlc3NBSVdvcmtlci5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbn1cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL0NoZXNzQUlcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vQ2hlc3NBSVdvcmtlclwiKSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgU3F1YXJlXzEgPSByZXF1aXJlKFwiLi9TcXVhcmVcIik7XG52YXIgUGllY2VfMSA9IHJlcXVpcmUoXCIuL1BpZWNlXCIpO1xuLy8gUGllY2VzXG52YXIgUGF3bl8xID0gcmVxdWlyZShcIi4vUGllY2VzL1Bhd25cIik7XG52YXIgQmlzaG9wXzEgPSByZXF1aXJlKFwiLi9QaWVjZXMvQmlzaG9wXCIpO1xudmFyIEtuaWdodF8xID0gcmVxdWlyZShcIi4vUGllY2VzL0tuaWdodFwiKTtcbnZhciBSb29rXzEgPSByZXF1aXJlKFwiLi9QaWVjZXMvUm9va1wiKTtcbnZhciBRdWVlbl8xID0gcmVxdWlyZShcIi4vUGllY2VzL1F1ZWVuXCIpO1xudmFyIEtpbmdfMSA9IHJlcXVpcmUoXCIuL1BpZWNlcy9LaW5nXCIpO1xuLy8gVGhpcmQgUGFydHlcbnZhciBVdGlsc18xID0gcmVxdWlyZShcIi4vVXRpbHNcIik7XG52YXIgQ2hlc3Nib2FyZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDaGVzc2JvYXJkKHNpemVYLCBzaXplWSkge1xuICAgICAgICBpZiAoc2l6ZVggPT09IHZvaWQgMCkgeyBzaXplWCA9IDg7IH1cbiAgICAgICAgaWYgKHNpemVZID09PSB2b2lkIDApIHsgc2l6ZVkgPSA4OyB9XG4gICAgICAgIHRoaXMuYm9hcmRTaXplID0ge1xuICAgICAgICAgICAgeDogOCxcbiAgICAgICAgICAgIHk6IDgsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGlzdG9yeSA9IFtdO1xuICAgICAgICB0aGlzLnNxdWFyZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdGhpcy5vblByb21vdGUgPSBuZXcgVXRpbHNfMS5DaGVzc0V2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmJvYXJkU2l6ZS54ID0gc2l6ZVg7XG4gICAgICAgIHRoaXMuYm9hcmRTaXplLnkgPSBzaXplWTtcbiAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgIH1cbiAgICBDaGVzc2JvYXJkLmZyb21Qb3NpdGlvbiA9IGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICB2YXIgc2l6ZVkgPSBwb3NpdGlvbi5sZW5ndGg7XG4gICAgICAgIHZhciBzaXplWCA9IHBvc2l0aW9uWzBdLmxlbmd0aDtcbiAgICAgICAgdmFyIGJvYXJkID0gbmV3IENoZXNzYm9hcmQoc2l6ZVgsIHNpemVZKTtcbiAgICAgICAgYm9hcmQubG9hZFBvc2l0aW9ucyhwb3NpdGlvbik7XG4gICAgICAgIHJldHVybiBib2FyZDtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gQ2hlc3Nib2FyZC5mcm9tUG9zaXRpb24odGhpcy5zYXZlUG9zaXRpb25zKCkpO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc3F1YXJlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IHRoaXMuYm9hcmRTaXplLnk7ICsreSkge1xuICAgICAgICAgICAgdGhpcy5zcXVhcmVzW3ldID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHRoaXMuYm9hcmRTaXplLng7ICsreCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3F1YXJlc1t5XVt4XSA9IG5ldyBTcXVhcmVfMS5TcXVhcmUodGhpcywgeCwgeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oaXN0b3J5ID0gW107XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgdGhpcy5ib2FyZFNpemUueTsgKyt5KSB7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHRoaXMuYm9hcmRTaXplLng7ICsreCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMuc3F1YXJlc1t5XVt4XSwgeCwgeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLmZvckVhY2hQaWVjZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHNxdWFyZSwgeCwgeSkge1xuICAgICAgICAgICAgaWYgKHNxdWFyZS5waWVjZSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHNxdWFyZS5waWVjZSwgeCwgeSwgc3F1YXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5maW5kUGllY2VzID0gZnVuY3Rpb24gKHBpZWNlVHlwZSwgY29sb3IpIHtcbiAgICAgICAgaWYgKHBpZWNlVHlwZSA9PT0gdm9pZCAwKSB7IHBpZWNlVHlwZSA9IG51bGw7IH1cbiAgICAgICAgaWYgKGNvbG9yID09PSB2b2lkIDApIHsgY29sb3IgPSBudWxsOyB9XG4gICAgICAgIHZhciBwaWVjZXMgPSBbXTtcbiAgICAgICAgdGhpcy5mb3JFYWNoUGllY2UoZnVuY3Rpb24gKHBpZWNlKSB7XG4gICAgICAgICAgICBpZiAocGllY2VUeXBlICYmIHBpZWNlLnR5cGUgIT0gcGllY2VUeXBlKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmIChjb2xvciAmJiBwaWVjZS5jb2xvciAhPSBjb2xvcilcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBwaWVjZXMucHVzaChwaWVjZSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGllY2VzO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBuZXdTcXVhcmVzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgdGhpcy5ib2FyZFNpemUueTsgKyt5KSB7XG4gICAgICAgICAgICBuZXdTcXVhcmVzW3ldID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHRoaXMuYm9hcmRTaXplLng7ICsreCkge1xuICAgICAgICAgICAgICAgIG5ld1NxdWFyZXNbeV1beF0gPSBjYWxsYmFjayh0aGlzLnNxdWFyZXNbeV1beF0sIHgsIHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdTcXVhcmVzO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUubG9hZFBvc2l0aW9ucyA9IGZ1bmN0aW9uIChwb3NpdGlvbnMpIHtcbiAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICBpZiAocG9zaXRpb25zLmxlbmd0aCA+IHRoaXMuYm9hcmRTaXplLnkgfHwgcG9zaXRpb25zWzBdLmxlbmd0aCA+IHRoaXMuYm9hcmRTaXplLngpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IHBvc2l0aW9ucy5sZW5ndGg7ICsreSkge1xuICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBwb3NpdGlvbnNbeV0ubGVuZ3RoOyArK3gpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3F1YXJlID0gdGhpcy5nZXRTcXVhcmUoeCwgeSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTcXVhcmUoc3F1YXJlLCBwb3NpdGlvbnNbeV1beF1bMV0sIFBpZWNlXzEuQ09MT1JTLmdldENvbG9yKHBvc2l0aW9uc1t5XVt4XVswXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuc2F2ZVBvc2l0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBvc2l0aW9ucyA9IFtdO1xuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IHRoaXMuYm9hcmRTaXplLnk7ICsreSkge1xuICAgICAgICAgICAgcG9zaXRpb25zW3ldID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHRoaXMuYm9hcmRTaXplLng7ICsreCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNxdWFyZXNbeV1beF0ucGllY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25zW3ldW3hdID0gUGllY2VfMS5DT0xPUlMuZ2V0TmFtZSh0aGlzLnNxdWFyZXNbeV1beF0ucGllY2UuY29sb3IpICsgdGhpcy5zcXVhcmVzW3ldW3hdLnBpZWNlLnR5cGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbnNbeV1beF0gPSBcIlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcG9zaXRpb25zO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuc2V0Qm9hcmQgPSBmdW5jdGlvbiAoYm9hcmQpIHtcbiAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGJvYXJkKTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBrZXlzXzEgPSBrZXlzOyBfaSA8IGtleXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzXzFbX2ldO1xuICAgICAgICAgICAgdmFyIHNxdWFyZSA9IHRoaXMuRkVOVG9TcXVhcmUoa2V5KTtcbiAgICAgICAgICAgIGlmICghc3F1YXJlKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHZhciBjb2xvciA9IGJvYXJkW2tleV1bMF07XG4gICAgICAgICAgICB2YXIgcGllY2UgPSBib2FyZFtrZXldWzFdO1xuICAgICAgICAgICAgdGhpcy5zZXRTcXVhcmUoc3F1YXJlLCBwaWVjZSwgUGllY2VfMS5DT0xPUlMuZ2V0Q29sb3IoY29sb3IpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuZ2V0Qm9hcmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBwb3NpdGlvbnMgPSB7fTtcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChzcXVhcmUpIHtcbiAgICAgICAgICAgIGlmIChzcXVhcmUucGllY2UpIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbnNbX3RoaXMuU3F1YXJlVG9GRU4oc3F1YXJlKV0gPSBzcXVhcmUucGllY2UuZ2V0U3ltYm9sKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcG9zaXRpb25zO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuZ2V0U3F1YXJlID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgaWYgKHggPj0gKHRoaXMuYm9hcmRTaXplLngpIHx8IHggPCAwIHx8IHkgPj0gKHRoaXMuYm9hcmRTaXplLnkpIHx8IHkgPCAwKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLnNxdWFyZXNbeV1beF07XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5zZXRTcXVhcmUgPSBmdW5jdGlvbiAoc3F1YXJlLCB0eXBlLCBjb2xvcikge1xuICAgICAgICBpZiAoIXNxdWFyZSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoIXR5cGUpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jbGVhclNxdWFyZShzcXVhcmUpO1xuICAgICAgICBpZiAoIUNoZXNzYm9hcmQuUElFQ0VTW3R5cGVdKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVBpZWNlKHR5cGUsIGNvbG9yLCBzcXVhcmUpO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuY3JlYXRlUGllY2UgPSBmdW5jdGlvbiAodHlwZSwgY29sb3IsIHNxdWFyZSkge1xuICAgICAgICB2YXIgbmV3UGllY2UgPSBuZXcgQ2hlc3Nib2FyZC5QSUVDRVNbdHlwZV0odGhpcywgc3F1YXJlKTtcbiAgICAgICAgbmV3UGllY2Uuc2V0Q29sb3IoY29sb3IpO1xuICAgICAgICBuZXdQaWVjZS5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiBuZXdQaWVjZTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLnNldFBpZWNlID0gZnVuY3Rpb24gKHNxdWFyZSwgcGllY2UpIHtcbiAgICAgICAgaWYgKCFzcXVhcmUpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgb2xkIHBpZWNlIGZyb20gdGhlIHNxdWFyZVxuICAgICAgICBpZiAoc3F1YXJlLnBpZWNlKSB7XG4gICAgICAgICAgICBzcXVhcmUucGllY2Uuc3F1YXJlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgdGhlIG5ldyBwaWVjZVxuICAgICAgICBzcXVhcmUucGllY2UgPSBwaWVjZTtcbiAgICAgICAgaWYgKHBpZWNlKSB7XG4gICAgICAgICAgICBwaWVjZS5zcXVhcmUgPSBzcXVhcmU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5jbGVhclNxdWFyZSA9IGZ1bmN0aW9uIChzcXVhcmUpIHtcbiAgICAgICAgaWYgKHNxdWFyZS5waWVjZSkge1xuICAgICAgICAgICAgc3F1YXJlLnBpZWNlLnNldFNxdWFyZShudWxsKTtcbiAgICAgICAgICAgIHNxdWFyZS5zZXRQaWVjZShudWxsKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuaXNWYWxpZE1vdmVGRU4gPSBmdW5jdGlvbiAoZnJvbSwgdG8pIHtcbiAgICAgICAgdmFyIGZyb21TcXVhcmUgPSB0aGlzLkZFTlRvU3F1YXJlKGZyb20pO1xuICAgICAgICB2YXIgdG9TcXVhcmUgPSB0aGlzLkZFTlRvU3F1YXJlKHRvKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZE1vdmUoZnJvbVNxdWFyZSwgdG9TcXVhcmUpO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuaXNWYWxpZE1vdmUgPSBmdW5jdGlvbiAoZnJvbSwgdG8pIHtcbiAgICAgICAgaWYgKCFmcm9tIHx8ICF0bylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCFmcm9tLnBpZWNlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gISF0aGlzLmdldEFsbG93ZWRNb3Zlc09mKGZyb20ucGllY2UpLmZpbmQoZnVuY3Rpb24gKG1vdmUpIHtcbiAgICAgICAgICAgIGlmIChmcm9tID09IG1vdmUuZnJvbSAmJiB0byA9PSBtb3ZlLnRvKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLmRvTW92ZSA9IGZ1bmN0aW9uIChtb3ZlKSB7XG4gICAgICAgIHRoaXMubW92ZShtb3ZlLmZyb20sIG1vdmUudG8pO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuZG9Nb3ZlRkVOID0gZnVuY3Rpb24gKG1vdmUpIHtcbiAgICAgICAgdGhpcy50cnlNb3ZlRkVOKG1vdmUuZnJvbSwgbW92ZS50byk7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5tb3ZlID0gZnVuY3Rpb24gKGZyb20sIHRvLCBzaW11bGF0ZWRNb3ZlKSB7XG4gICAgICAgIGlmIChzaW11bGF0ZWRNb3ZlID09PSB2b2lkIDApIHsgc2ltdWxhdGVkTW92ZSA9IGZhbHNlOyB9XG4gICAgICAgIGlmICghZnJvbSB8fCAhdG8pXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghZnJvbS5waWVjZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIG1vdmluZ1BpZWNlID0gZnJvbS5waWVjZTtcbiAgICAgICAgLy8gQWRkIHRoZSBtb3ZlIHRvIHRoZSBoaXN0b3J5XG4gICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKFtdKTtcbiAgICAgICAgLy8gdGhpcy5mb3JFYWNoUGllY2UoIHBpZWNlID0+IHtcbiAgICAgICAgLy8gXHRwaWVjZS5CZWZvcmVQaWVjZU1vdmVkKG1vdmluZ1BpZWNlLCB0byk7XG4gICAgICAgIC8vIH0pO1xuICAgICAgICB2YXIgcmVzdWx0ID0gbW92aW5nUGllY2UubW92ZSh0byk7XG4gICAgICAgIC8vIHRoaXMuZm9yRWFjaFBpZWNlKCBwaWVjZSA9PiB7XG4gICAgICAgIC8vIFx0cGllY2UuQWZ0ZXJQaWVjZU1vdmVkKG1vdmluZ1BpZWNlLCB0byk7XG4gICAgICAgIC8vIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuYWRkSGlzdG9yeSA9IGZ1bmN0aW9uIChwaWVjZSwgZGF0YSkge1xuICAgICAgICB2YXIgaGlzdG9yeSA9IHtcbiAgICAgICAgICAgIHBpZWNlOiBwaWVjZSxcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMV0ucHVzaChoaXN0b3J5KTtcbiAgICB9O1xuICAgIC8vIHB1c2hIaXN0b3J5KHBpZWNlLCBkYXRhKVxuICAgIC8vIHtcbiAgICAvLyBcdHZhciBoaXN0b3J5RXZlbnQgPSB7XG4gICAgLy8gXHRcdHBpZWNlOiBwaWVjZSxcbiAgICAvLyBcdFx0dHlwZTogdHlwZSxcbiAgICAvLyBcdFx0ZGF0YTogZGF0YSxcbiAgICAvLyBcdH07XG4gICAgLy8gXHR0aGlzLmhpc3RvcnlbdGhpcy5oaXN0b3J5Lmxlbmd0aCAtIDFdLnB1c2goaGlzdG9yeUV2ZW50KTtcbiAgICAvLyB9XG4gICAgLy8gcG9wSGlzdG9yeSgpXG4gICAgLy8ge1xuICAgIC8vIFx0dmFyIGhpc3RvcnkgPSB0aGlzLmhpc3RvcnkucG9wKClcbiAgICAvLyBcdGhpc3RvcnkucGllY2UudW5kbyhoaXN0b3J5LmRhdGEpO1xuICAgIC8vIFx0cmV0dXJuIGhpc3Rvcnk7XG4gICAgLy8gfVxuICAgIC8vIG5ld0hpc3RvcnkoKVxuICAgIC8vIHtcbiAgICAvLyBcdHRoaXMuaGlzdG9yeS5wdXNoKFtdKTtcbiAgICAvLyB9XG4gICAgLy8gVW5kbyB0aGUgbGFzdCBhY3Rpb25zLlxuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLnVuZG8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBoaXN0b3J5ID0gdGhpcy5oaXN0b3J5LnBvcCgpO1xuICAgICAgICBpZiAoIWhpc3RvcnkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBoaXN0b3J5U2l6ZSA9IGhpc3RvcnkubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhpc3RvcnlTaXplOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBldmVudCA9IGhpc3RvcnkucG9wKCk7XG4gICAgICAgICAgICBldmVudC5waWVjZS51bmRvKGV2ZW50LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoaXN0b3J5O1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUubW92ZUZFTiA9IGZ1bmN0aW9uIChmcm9tLCB0bywgc2ltdWxhdGVkTW92ZSkge1xuICAgICAgICBpZiAoc2ltdWxhdGVkTW92ZSA9PT0gdm9pZCAwKSB7IHNpbXVsYXRlZE1vdmUgPSBmYWxzZTsgfVxuICAgICAgICB2YXIgZnJvbVNxdWFyZSA9IHRoaXMuRkVOVG9TcXVhcmUoZnJvbSk7XG4gICAgICAgIHZhciB0b1NxdWFyZSA9IHRoaXMuRkVOVG9TcXVhcmUodG8pO1xuICAgICAgICByZXR1cm4gdGhpcy5tb3ZlKGZyb21TcXVhcmUsIHRvU3F1YXJlLCBzaW11bGF0ZWRNb3ZlKTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLnRyeU1vdmUgPSBmdW5jdGlvbiAoZnJvbSwgdG8sIHNpbXVsYXRlZE1vdmUpIHtcbiAgICAgICAgaWYgKHNpbXVsYXRlZE1vdmUgPT09IHZvaWQgMCkgeyBzaW11bGF0ZWRNb3ZlID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWRNb3ZlKGZyb20sIHRvKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMubW92ZShmcm9tLCB0bywgc2ltdWxhdGVkTW92ZSk7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS50cnlNb3ZlRkVOID0gZnVuY3Rpb24gKGZyb20sIHRvLCBzaW11bGF0ZWRNb3ZlKSB7XG4gICAgICAgIGlmIChzaW11bGF0ZWRNb3ZlID09PSB2b2lkIDApIHsgc2ltdWxhdGVkTW92ZSA9IGZhbHNlOyB9XG4gICAgICAgIHZhciBmcm9tU3F1YXJlID0gdGhpcy5GRU5Ub1NxdWFyZShmcm9tKTtcbiAgICAgICAgdmFyIHRvU3F1YXJlID0gdGhpcy5GRU5Ub1NxdWFyZSh0byk7XG4gICAgICAgIGlmICghdGhpcy5pc1ZhbGlkTW92ZShmcm9tU3F1YXJlLCB0b1NxdWFyZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5tb3ZlKGZyb21TcXVhcmUsIHRvU3F1YXJlLCBzaW11bGF0ZWRNb3ZlKTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLmdldEFsbG93ZWRNb3Zlc09mID0gZnVuY3Rpb24gKHBpZWNlKSB7XG4gICAgICAgIHJldHVybiBwaWVjZS5nZXRBbGxvd2VkTW92ZXMoKS5tYXAoZnVuY3Rpb24gKHRvU3F1YXJlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZyb206IHBpZWNlLnNxdWFyZSxcbiAgICAgICAgICAgICAgICB0bzogdG9TcXVhcmUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLmdldE1vdmVzT2YgPSBmdW5jdGlvbiAocGllY2UpIHtcbiAgICAgICAgcmV0dXJuIHBpZWNlLmdldExlZ2FsTW92ZXMoKS5tYXAoZnVuY3Rpb24gKHRvU3F1YXJlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZyb206IHBpZWNlLnNxdWFyZSxcbiAgICAgICAgICAgICAgICB0bzogdG9TcXVhcmUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLmdldE1vdmVzQXRGRU4gPSBmdW5jdGlvbiAoZmVuKSB7XG4gICAgICAgIHZhciBzcXVhcmUgPSB0aGlzLkZFTlRvU3F1YXJlKGZlbik7XG4gICAgICAgIGlmIChzcXVhcmUgJiYgc3F1YXJlLnBpZWNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRBbGxvd2VkTW92ZXNPZihzcXVhcmUucGllY2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLmdldEZFTk1vdmVzYXRGRU4gPSBmdW5jdGlvbiAoZmVuKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1vdmVzQXRGRU4oZmVuKS5tYXAoZnVuY3Rpb24gKG1vdmUpIHtcbiAgICAgICAgICAgIG1vdmUuZnJvbSA9IF90aGlzLlBvc2l0aW9uVG9GRU4obW92ZS5mcm9tLngsIG1vdmUuZnJvbS55KTtcbiAgICAgICAgICAgIG1vdmUudG8gPSBfdGhpcy5Qb3NpdGlvblRvRkVOKG1vdmUudG8ueCwgbW92ZS50by55KTtcbiAgICAgICAgICAgIHJldHVybiBtb3ZlO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLmdldE1vdmVzID0gZnVuY3Rpb24gKGNvbG9yKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChjb2xvciA9PT0gdm9pZCAwKSB7IGNvbG9yID0gbnVsbDsgfVxuICAgICAgICB2YXIgbW92ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5mb3JFYWNoUGllY2UoZnVuY3Rpb24gKHBpZWNlKSB7XG4gICAgICAgICAgICBpZiAoY29sb3IgIT09IG51bGwgJiYgY29sb3IgIT0gcGllY2UuY29sb3IpIHtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwibm90IHNhbWUgY29sb3I/XCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vdmVzLnB1c2guYXBwbHkobW92ZXMsIF90aGlzLmdldEFsbG93ZWRNb3Zlc09mKHBpZWNlKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbW92ZXM7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5nZXRNb3Zlc0ZFTiA9IGZ1bmN0aW9uIChjb2xvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoY29sb3IgPT09IHZvaWQgMCkgeyBjb2xvciA9IG51bGw7IH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TW92ZXMoY29sb3IpLm1hcChmdW5jdGlvbiAobW92ZSkge1xuICAgICAgICAgICAgbW92ZS5mcm9tID0gX3RoaXMuUG9zaXRpb25Ub0ZFTihtb3ZlLmZyb20ueCwgbW92ZS5mcm9tLnkpO1xuICAgICAgICAgICAgbW92ZS50byA9IF90aGlzLlBvc2l0aW9uVG9GRU4obW92ZS50by54LCBtb3ZlLnRvLnkpO1xuICAgICAgICAgICAgcmV0dXJuIG1vdmU7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuUG9zaXRpb25Ub0ZFTiA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYXJJbmRleCh4KSArICh0aGlzLmJvYXJkU2l6ZS55IC0geSk7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5GRU50b1Bvc2l0aW9uID0gZnVuY3Rpb24gKGZlbikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogdGhpcy5pbmRleE9mQ2hhcihmZW5bMF0pLFxuICAgICAgICAgICAgeTogKHRoaXMuYm9hcmRTaXplLnkgLSBmZW5bMV0pXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5GRU5Ub1NxdWFyZSA9IGZ1bmN0aW9uIChmZW4pIHtcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5GRU50b1Bvc2l0aW9uKGZlbik7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNxdWFyZShwb3NpdGlvbi54LCBwb3NpdGlvbi55KTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLlNxdWFyZVRvRkVOID0gZnVuY3Rpb24gKHNxdWFyZSkge1xuICAgICAgICB2YXIgcG9zaXRpb24gPSBzcXVhcmUuZ2V0UG9zaXRpb24oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuUG9zaXRpb25Ub0ZFTihwb3NpdGlvbi54LCBwb3NpdGlvbi55KTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLmNoYXJJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICByZXR1cm4gQ2hlc3Nib2FyZC5TSURFW2luZGV4XTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLmluZGV4T2ZDaGFyID0gZnVuY3Rpb24gKGNoYXIpIHtcbiAgICAgICAgcmV0dXJuIENoZXNzYm9hcmQuU0lERS5pbmRleE9mKGNoYXIpO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuY2xlYXJEZWJ1ZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChzcXVhcmUpIHtcbiAgICAgICAgICAgIHNxdWFyZS5kZWJ1ZyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLmRlYnVnU3F1YXJlID0gZnVuY3Rpb24gKHNxdWFyZSwgZGVidWdDb2xvcikge1xuICAgICAgICBzcXVhcmUuZGVidWcgPSBkZWJ1Z0NvbG9yO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuZGVidWdGRU4gPSBmdW5jdGlvbiAoZmVuLCBkZWJ1Z0NvbG9yKSB7XG4gICAgICAgIHZhciBzcXVhcmUgPSB0aGlzLkZFTlRvU3F1YXJlKGZlbik7XG4gICAgICAgIGlmIChzcXVhcmUpIHtcbiAgICAgICAgICAgIHNxdWFyZS5kZWJ1ZyA9IGRlYnVnQ29sb3I7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLmRlYnVnTW92ZXMgPSBmdW5jdGlvbiAoZmVuLCBkZWJ1Z0NvbG9yKSB7XG4gICAgICAgIHZhciBzcXVhcmUgPSB0aGlzLkZFTlRvU3F1YXJlKGZlbik7XG4gICAgICAgIGlmIChzcXVhcmUgJiYgc3F1YXJlLnBpZWNlKSB7XG4gICAgICAgICAgICB2YXIgcGllY2UgPSBzcXVhcmUuZ2V0UGllY2UoKTtcbiAgICAgICAgICAgIHZhciBtb3ZlcyA9IHBpZWNlLmdldExlZ2FsTW92ZXMoKTtcbiAgICAgICAgICAgIG1vdmVzLmZvckVhY2goZnVuY3Rpb24gKHNxdWFyZSkge1xuICAgICAgICAgICAgICAgIHNxdWFyZS5kZWJ1ZyA9IGRlYnVnQ29sb3I7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQuU0lERSA9IFwiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIjtcbiAgICBDaGVzc2JvYXJkLlJBTktTID0gW1wiUGF3blwiLCBcIktuaWdodFwiLCBcIkJpc2hvcFwiLCBcIlJvb2tcIiwgXCJRdWVlblwiLCBcIktpbmdcIl07XG4gICAgQ2hlc3Nib2FyZC5QSUVDRVMgPSB7XG4gICAgICAgIFA6IFBhd25fMS5QYXduUGllY2UsXG4gICAgICAgIEI6IEJpc2hvcF8xLkJpc2hvcFBpZWNlLFxuICAgICAgICBOOiBLbmlnaHRfMS5LbmlnaHRQaWVjZSxcbiAgICAgICAgUjogUm9va18xLlJvb2tQaWVjZSxcbiAgICAgICAgUTogUXVlZW5fMS5RdWVlblBpZWNlLFxuICAgICAgICBLOiBLaW5nXzEuS2luZ1BpZWNlLFxuICAgIH07XG4gICAgcmV0dXJuIENoZXNzYm9hcmQ7XG59KCkpO1xuZXhwb3J0cy5DaGVzc2JvYXJkID0gQ2hlc3Nib2FyZDtcbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q2hlc3Nib2FyZC5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgVXRpbHNfMSA9IHJlcXVpcmUoXCIuL1V0aWxzXCIpO1xudmFyIENoZXNzTW92ZUV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDaGVzc01vdmVFdmVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDaGVzc01vdmVFdmVudChmcm9tLCB0bykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5mcm9tID0gbnVsbDtcbiAgICAgICAgX3RoaXMudG8gPSBudWxsO1xuICAgICAgICBfdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgX3RoaXMudG8gPSB0bztcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gQ2hlc3NNb3ZlRXZlbnQ7XG59KFV0aWxzXzEuQ2hlc3NFdmVudCkpO1xuZXhwb3J0cy5DaGVzc01vdmVFdmVudCA9IENoZXNzTW92ZUV2ZW50O1xuO1xudmFyIENoZXNzUHJvbW90ZUV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDaGVzc1Byb21vdGVFdmVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDaGVzc1Byb21vdGVFdmVudChzcXVhcmUsIHBpZWNlLCBmZW4pIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuZmVuID0gbnVsbDtcbiAgICAgICAgX3RoaXMucGllY2UgPSBudWxsO1xuICAgICAgICBfdGhpcy5zcXVhcmUgPSBudWxsO1xuICAgICAgICBfdGhpcy5mZW4gPSBmZW47XG4gICAgICAgIF90aGlzLnBpZWNlID0gcGllY2U7XG4gICAgICAgIF90aGlzLnNxdWFyZSA9IHNxdWFyZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gQ2hlc3NQcm9tb3RlRXZlbnQ7XG59KFV0aWxzXzEuQ2hlc3NFdmVudCkpO1xuZXhwb3J0cy5DaGVzc1Byb21vdGVFdmVudCA9IENoZXNzUHJvbW90ZUV2ZW50O1xuO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudHMuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIERlZmluZSBNb3ZlbWVudCBWZWN0b3JzXG52YXIgTW92ZW1lbnRWZWN0b3JzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1vdmVtZW50VmVjdG9ycygpIHtcbiAgICB9XG4gICAgTW92ZW1lbnRWZWN0b3JzLkRpYWdvbmFsID0gW1sxLCAxXSwgWzEsIC0xXSwgWy0xLCAtMV0sIFstMSwgMV1dO1xuICAgIE1vdmVtZW50VmVjdG9ycy5MYXRlcmFsID0gW1swLCAxXSwgWzAsIC0xXSwgWzEsIDBdLCBbLTEsIDBdXTtcbiAgICBNb3ZlbWVudFZlY3RvcnMuT21uaSA9IE1vdmVtZW50VmVjdG9ycy5EaWFnb25hbC5jb25jYXQoTW92ZW1lbnRWZWN0b3JzLkxhdGVyYWwpO1xuICAgIHJldHVybiBNb3ZlbWVudFZlY3RvcnM7XG59KCkpO1xuZXhwb3J0cy5Nb3ZlbWVudFZlY3RvcnMgPSBNb3ZlbWVudFZlY3RvcnM7XG47XG52YXIgQ09MT1JTID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENPTE9SUygpIHtcbiAgICB9XG4gICAgQ09MT1JTLmdldENvbG9yID0gZnVuY3Rpb24gKGNvbG9yKSB7XG4gICAgICAgIHJldHVybiBDT0xPUk1BUFtjb2xvcl07XG4gICAgfTtcbiAgICBDT0xPUlMuZ2V0TmFtZSA9IGZ1bmN0aW9uIChjb2xvcikge1xuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKENPTE9STUFQKTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBrZXlzXzEgPSBrZXlzOyBfaSA8IGtleXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzXzFbX2ldO1xuICAgICAgICAgICAgaWYgKENPTE9STUFQW2tleV0gPT0gY29sb3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGtleTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9O1xuICAgIENPTE9SUy5CTEFDSyA9IDA7XG4gICAgQ09MT1JTLldISVRFID0gMTtcbiAgICBDT0xPUlMuR1JFRU4gPSAyO1xuICAgIENPTE9SUy5PUkFOR0UgPSAzO1xuICAgIHJldHVybiBDT0xPUlM7XG59KCkpO1xuZXhwb3J0cy5DT0xPUlMgPSBDT0xPUlM7XG47XG52YXIgQ09MT1JNQVAgPSB7XG4gICAgdzogQ09MT1JTLldISVRFLFxuICAgIGI6IENPTE9SUy5CTEFDSyxcbiAgICBnOiBDT0xPUlMuR1JFRU4sXG4gICAgbzogQ09MT1JTLk9SQU5HRVxufTtcbi8vIFNpbXBsb2UgUGllY2UgaW5tcGxlbWVudGF0aW9uXG52YXIgUGllY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUGllY2UoYm9hcmQsIHNxdWFyZSkge1xuICAgICAgICAvLyBCb2FyZCAmIFNxdWFyZSBcbiAgICAgICAgdGhpcy5ib2FyZCA9IG51bGw7XG4gICAgICAgIHRoaXMuc3F1YXJlID0gbnVsbDtcbiAgICAgICAgLy8gUGllY2UgZGVzY3JpcHRpb25cbiAgICAgICAgdGhpcy5uYW1lID0gXCJQaWVjZVwiO1xuICAgICAgICB0aGlzLmNvbG9yID0gbnVsbDtcbiAgICAgICAgdGhpcy50eXBlID0gbnVsbDtcbiAgICAgICAgLy8gTW92ZW1lbnQgaW5mb3JtYXRpb25cbiAgICAgICAgdGhpcy5tb3ZlcyA9IDA7XG4gICAgICAgIHRoaXMuaW5kZXggPSBudWxsO1xuICAgICAgICB0aGlzLnBpZWNlVGltZXIgPSBudWxsO1xuICAgICAgICB0aGlzLm1vdmVEZWxheSA9IDUwMDA7XG4gICAgICAgIHRoaXMubGFzdE1vdmVkID0gMDtcbiAgICAgICAgdGhpcy5ib2FyZCA9IGJvYXJkO1xuICAgICAgICB0aGlzLnNldFNxdWFyZShzcXVhcmUpO1xuICAgIH1cbiAgICBQaWVjZS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gTm90IGltcGxlbWVudGVkXG4gICAgfTtcbiAgICBQaWVjZS5wcm90b3R5cGUuc2V0U3F1YXJlID0gZnVuY3Rpb24gKHNxdWFyZSkge1xuICAgICAgICBpZiAodGhpcy5zcXVhcmUpIHtcbiAgICAgICAgICAgIHRoaXMuc3F1YXJlLnBpZWNlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3F1YXJlKSB7XG4gICAgICAgICAgICBzcXVhcmUucGllY2UgPSB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3F1YXJlID0gc3F1YXJlO1xuICAgIH07XG4gICAgUGllY2UucHJvdG90eXBlLnNldENvbG9yID0gZnVuY3Rpb24gKGNvbG9yKSB7XG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgICB9O1xuICAgIFBpZWNlLnByb3RvdHlwZS5nZXRDb2xvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3I7XG4gICAgfTtcbiAgICAvLyBNb3ZlcyBwaWVjZSB0byBhIG5ldyBzcXVhcmVcbiAgICBQaWVjZS5wcm90b3R5cGUubW92ZSA9IGZ1bmN0aW9uIChzcXVhcmUpIHtcbiAgICAgICAgaWYgKCFzcXVhcmUpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIElmIHNxdWFyZSBoYXMgcGllY2UgY2FwdHVyZSBpdC5cbiAgICAgICAgdGhpcy5jYXB0dXJlKHNxdWFyZSk7XG4gICAgICAgIHRoaXMuYWRkSGlzdG9yeSh7XG4gICAgICAgICAgICBtb3ZlOiB7XG4gICAgICAgICAgICAgICAgZnJvbTogdGhpcy5zcXVhcmUsXG4gICAgICAgICAgICAgICAgdG86IHNxdWFyZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsYXN0TW92ZWQ6IHRoaXMubGFzdE1vdmVkXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBDaGFuZ2UgcG9zaXRpb25zXG4gICAgICAgIHRoaXMubW92ZXMrKztcbiAgICAgICAgLy8gQ2xlYXIgcHJldmlvdXMgc3F1YXJlXG4gICAgICAgIHRoaXMuc3F1YXJlLnNldFBpZWNlKG51bGwpO1xuICAgICAgICAvLyBzZXQgbmV3IHBvc2l0aW9uXG4gICAgICAgIHRoaXMuc2V0U3F1YXJlKHNxdWFyZSk7XG4gICAgICAgIHRoaXMubGFzdE1vdmVkID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBQaWVjZS5wcm90b3R5cGUudW5kbyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQubW92ZSkge1xuICAgICAgICAgICAgdGhpcy5zcXVhcmUuc2V0UGllY2UobnVsbCk7XG4gICAgICAgICAgICB0aGlzLnNldFNxdWFyZShldmVudC5tb3ZlLmZyb20pO1xuICAgICAgICAgICAgdGhpcy5sYXN0TW92ZWQgPSBldmVudC5sYXN0TW92ZWQ7XG4gICAgICAgICAgICB0aGlzLm1vdmVzLS07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50LmNhcHR1cmVkKSB7XG4gICAgICAgICAgICBldmVudC5zcXVhcmUuc2V0UGllY2UoZXZlbnQuY2FwdHVyZWQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBQaWVjZS5wcm90b3R5cGUuY2FwdHVyZSA9IGZ1bmN0aW9uIChzcXVhcmUpIHtcbiAgICAgICAgaWYgKCFzcXVhcmUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChzcXVhcmUucGllY2UpIHtcbiAgICAgICAgICAgIC8vIEFkZCBjYXB0dXJlIHRvIHRoZSBoaXN0b3J5XG4gICAgICAgICAgICB0aGlzLmFkZEhpc3Rvcnkoe1xuICAgICAgICAgICAgICAgIGNhcHR1cmVkOiBzcXVhcmUucGllY2UsXG4gICAgICAgICAgICAgICAgc3F1YXJlOiBzcXVhcmUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBzcXVhcmUuc2V0UGllY2UobnVsbCk7XG4gICAgfTtcbiAgICBQaWVjZS5wcm90b3R5cGUuZ2V0QWxsb3dlZE1vdmVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5sYXN0TW92ZWQgPiBEYXRlLm5vdygpIC0gdGhpcy5tb3ZlRGVsYXkpXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIHJldHVybiB0aGlzLmdldExlZ2FsTW92ZXMoKTtcbiAgICB9O1xuICAgIFBpZWNlLnByb3RvdHlwZS5nZXRMZWdhbE1vdmVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNb3ZlcygpLmZpbHRlcihmdW5jdGlvbiAoc3F1YXJlKSB7XG4gICAgICAgICAgICBpZiAoc3F1YXJlLnBpZWNlICYmIHNxdWFyZS5waWVjZS5jb2xvciA9PSBfdGhpcy5jb2xvcilcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBQaWVjZS5wcm90b3R5cGUuZ2V0TW92ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9O1xuICAgIFBpZWNlLnByb3RvdHlwZS5nZXRNb3Zlc0J5VmVjdG9ycyA9IGZ1bmN0aW9uICh2ZWN0b3JzLCBsaW1pdCkge1xuICAgICAgICBpZiAobGltaXQgPT09IHZvaWQgMCkgeyBsaW1pdCA9IHVuZGVmaW5lZDsgfVxuICAgICAgICB2YXIgbW92ZXMgPSBbXSwgc3RlcHMsIHZlY3Rvciwgc3F1YXJlO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZlY3RvcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBzdGVwcyA9IDA7XG4gICAgICAgICAgICB2ZWN0b3IgPSB2ZWN0b3JzW2ldO1xuICAgICAgICAgICAgc3F1YXJlID0gdGhpcy5zcXVhcmU7XG4gICAgICAgICAgICAvLyBBZGQgYWxsIHNxdWFyZXMgaW4gcGF0aFxuICAgICAgICAgICAgd2hpbGUgKHNxdWFyZSA9IHNxdWFyZS5nZXRTaWJsaW5nKHZlY3RvclswXSwgdmVjdG9yWzFdKSkge1xuICAgICAgICAgICAgICAgIGlmIChzcXVhcmUuZ2V0UGllY2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTcXVhcmUgaXMgb2NjdXBpZWQgYnkgb3Bwb25lbnRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNxdWFyZS5nZXRQaWVjZSgpLmNvbG9yICE9IHRoaXMuY29sb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9jY3VwaWVkIGJ5IG90aGVyIHBsYXllciAtIHBpZWNlIGNhbiBiZSBjYXB0dXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXMucHVzaChzcXVhcmUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtb3Zlcy5wdXNoKHNxdWFyZSk7XG4gICAgICAgICAgICAgICAgc3RlcHMrKztcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBzdGVwcyBsaW1pdCBleGNlZWRlZFxuICAgICAgICAgICAgICAgIGlmIChsaW1pdCAmJiBzdGVwcyA+PSBsaW1pdClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1vdmVzO1xuICAgIH07XG4gICAgUGllY2UucHJvdG90eXBlLmdldFN5bWJvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIENPTE9SUy5nZXROYW1lKHRoaXMuY29sb3IpICsgdGhpcy50eXBlO1xuICAgIH07XG4gICAgUGllY2UucHJvdG90eXBlLkJlZm9yZVBpZWNlTW92ZWQgPSBmdW5jdGlvbiAocGllY2UsIHNxdWFyZSkge1xuICAgICAgICAvLyBOb3QgaW1wbGVtZW50ZWRcbiAgICB9O1xuICAgIFBpZWNlLnByb3RvdHlwZS5BZnRlclBpZWNlTW92ZWQgPSBmdW5jdGlvbiAocGllY2UsIHNxdWFyZSkge1xuICAgICAgICAvLyBOb3QgaW1wbGVtZW50ZWRcbiAgICB9O1xuICAgIFBpZWNlLnByb3RvdHlwZS5hZGRIaXN0b3J5ID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdGhpcy5ib2FyZC5hZGRIaXN0b3J5KHRoaXMsIGRhdGEpO1xuICAgIH07XG4gICAgcmV0dXJuIFBpZWNlO1xufSgpKTtcbmV4cG9ydHMuUGllY2UgPSBQaWVjZTtcbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGllY2UuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFBpZWNlXzEgPSByZXF1aXJlKFwiLi4vUGllY2VcIik7XG52YXIgQmlzaG9wUGllY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJpc2hvcFBpZWNlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEJpc2hvcFBpZWNlKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMubmFtZSA9IFwiQmlzaG9wXCI7XG4gICAgICAgIF90aGlzLnR5cGUgPSBcIkJcIjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBCaXNob3BQaWVjZS5wcm90b3R5cGUuZ2V0TW92ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1vdmVzQnlWZWN0b3JzKFBpZWNlXzEuTW92ZW1lbnRWZWN0b3JzLkRpYWdvbmFsKTtcbiAgICB9O1xuICAgIHJldHVybiBCaXNob3BQaWVjZTtcbn0oUGllY2VfMS5QaWVjZSkpO1xuZXhwb3J0cy5CaXNob3BQaWVjZSA9IEJpc2hvcFBpZWNlO1xuO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1CaXNob3AuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFBpZWNlXzEgPSByZXF1aXJlKFwiLi4vUGllY2VcIik7XG52YXIgS2luZ1BpZWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhLaW5nUGllY2UsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gS2luZ1BpZWNlKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMubmFtZSA9IFwiS2luZ1wiO1xuICAgICAgICBfdGhpcy50eXBlID0gXCJLXCI7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgLy8gc2V0Q2FzdGxpbmcoZnJvbSwgdG8sIGNhc3RsZWRGcm9tLCBjYXN0bGVkVG8pXG4gICAgICAgIC8vIHtcbiAgICAgICAgLy8gXHR0aGlzLmNhc3RsaW5nID0ge1xuICAgICAgICAvLyBcdFx0Y2FzdGxpbmdmcm9tOiBmcm9tLFxuICAgICAgICAvLyBcdFx0Y2FzdGxpbmdUbzogdG8sXG4gICAgICAgIC8vIFx0XHRjYXN0bGVkUGllY2U6IHRoaXMsXG4gICAgICAgIC8vIFx0XHRjYXN0bGVkRnJvbTogY2FzdGxlZEZyb20sXG4gICAgICAgIC8vIFx0XHRjYXN0bGVkVG86IGNhc3RsZWRUbyxcbiAgICAgICAgLy8gXHR9O1xuICAgICAgICAvLyB9XG4gICAgfVxuICAgIEtpbmdQaWVjZS5wcm90b3R5cGUubW92ZSA9IGZ1bmN0aW9uIChzcXVhcmUpIHtcbiAgICAgICAgaWYgKE1hdGguYWJzKHNxdWFyZS5nZXRQb3NpdGlvbigpLnggLSB0aGlzLnNxdWFyZS5nZXRQb3NpdGlvbigpLngpID4gMSkge1xuICAgICAgICAgICAgLy8gQ2FzdGxlIExlZnQgcm9va1xuICAgICAgICAgICAgaWYgKHNxdWFyZS5nZXRQb3NpdGlvbigpLnggLSB0aGlzLnNxdWFyZS5nZXRQb3NpdGlvbigpLnggPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FzdGxlKC00LCAtMSwgLTIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ2FzdGxlIFJpZ2h0IHJvb2tcbiAgICAgICAgICAgIGlmIChzcXVhcmUuZ2V0UG9zaXRpb24oKS54IC0gdGhpcy5zcXVhcmUuZ2V0UG9zaXRpb24oKS54ID4gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNhc3RsZSgzLCAxLCAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIV9zdXBlci5wcm90b3R5cGUubW92ZS5jYWxsKHRoaXMsIHNxdWFyZSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgS2luZ1BpZWNlLnByb3RvdHlwZS5nZXRNb3ZlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2FzdGxpbmdNb3ZlcyhbWy0xLCAwLCA0XSwgWzEsIDAsIDNdXSwgMiwgJ1InKTtcbiAgICB9O1xuICAgIEtpbmdQaWVjZS5wcm90b3R5cGUuZ2V0Q2FzdGxpbmdNb3ZlcyA9IGZ1bmN0aW9uICh2ZWN0b3JzLCBkaXN0YW5jZSwgY2FzdGxpbmdQaWVjZVR5cGUpIHtcbiAgICAgICAgdmFyIG1vdmVzID0gdGhpcy5nZXRNb3Zlc0J5VmVjdG9ycyhQaWVjZV8xLk1vdmVtZW50VmVjdG9ycy5PbW5pLCAxKTtcbiAgICAgICAgaWYgKHRoaXMubW92ZXMgPiAwKVxuICAgICAgICAgICAgcmV0dXJuIG1vdmVzO1xuICAgICAgICB2YXIgc3RlcHMsIHZlY3Rvciwgc3F1YXJlO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZlY3RvcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBzdGVwcyA9IDA7XG4gICAgICAgICAgICB2ZWN0b3IgPSB2ZWN0b3JzW2ldO1xuICAgICAgICAgICAgc3F1YXJlID0gdGhpcy5zcXVhcmU7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgY2FzdGxpbmcgcGllY2UgaXMgYXZhaWxhYmxlXG4gICAgICAgICAgICB2YXIgY2FzdGxpbmdUYXJnZXQgPSB0aGlzLnNxdWFyZS5nZXRTaWJsaW5nKHZlY3RvclswXSAqIHZlY3RvclsyXSwgdmVjdG9yWzFdICogdmVjdG9yWzJdKTtcbiAgICAgICAgICAgIGlmIChjYXN0bGluZ1RhcmdldCAmJiBjYXN0bGluZ1RhcmdldC5waWVjZSAmJiBjYXN0bGluZ1RhcmdldC5waWVjZS50eXBlID09IGNhc3RsaW5nUGllY2VUeXBlICYmIGNhc3RsaW5nVGFyZ2V0LnBpZWNlLmNvbG9yID09IHRoaXMuY29sb3IgJiYgY2FzdGxpbmdUYXJnZXQucGllY2UubW92ZXMgPT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIEFkZCBhbGwgc3F1YXJlcyBpbiBwYXRoXG4gICAgICAgICAgICAgICAgd2hpbGUgKHNxdWFyZSA9IHNxdWFyZS5nZXRTaWJsaW5nKHZlY3RvclswXSwgdmVjdG9yWzFdKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTcXVhcmUgaXMgb2NjdXBpZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNxdWFyZS5nZXRQaWVjZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtb3Zlcy5wdXNoKHNxdWFyZSk7XG4gICAgICAgICAgICAgICAgICAgIHN0ZXBzKys7XG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHN0ZXBzIGxpbWl0IGV4Y2VlZGVkXG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSAmJiBzdGVwcyA+PSBkaXN0YW5jZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbW92ZXM7XG4gICAgfTtcbiAgICBLaW5nUGllY2UucHJvdG90eXBlLmNhc3RsZSA9IGZ1bmN0aW9uIChyb29rUG9zaXRpb24sIGtpbmdQb3NpdGlvbiwgY2FzdGxlUG9zaXRpb24pIHtcbiAgICAgICAgdmFyIHJvb2tTcXVhcmUgPSB0aGlzLnNxdWFyZS5nZXRTaWJsaW5nKHJvb2tQb3NpdGlvbiwgMCk7XG4gICAgICAgIHZhciBraW5nU3F1YXJlID0gdGhpcy5zcXVhcmUuZ2V0U2libGluZyhraW5nUG9zaXRpb24sIDApO1xuICAgICAgICB2YXIgY2FzdGxpbmdTcXVhcmUgPSB0aGlzLnNxdWFyZS5nZXRTaWJsaW5nKGNhc3RsZVBvc2l0aW9uLCAwKTtcbiAgICAgICAgLy8gdGhpcy5hZGRIaXN0b3J5KHtcbiAgICAgICAgLy8gXHRjYXN0bGluZzoge1xuICAgICAgICAvLyBcdFx0cm9va1NxdWFyZTogcm9va1NxdWFyZSxcbiAgICAgICAgLy8gXHRcdGtpbmdTcXVhcmU6IGtpbmdTcXVhcmUsXG4gICAgICAgIC8vIFx0XHRjYXN0bGluZ1NxdWFyZTogY2FzdGxpbmdTcXVhcmUsXG4gICAgICAgIC8vIFx0fSxcbiAgICAgICAgLy8gXHRjYXN0bGluZzogdGhpcy5jYW5DYXN0bGUsXG4gICAgICAgIC8vIH0pO1xuICAgICAgICAvL3RoaXMuc2V0Q2FzdGxpbmcocm9va1NxdWFyZSwga2luZ1NxdWFyZSwgY3VycmVudCwgY2FzdGxpbmdTcXVhcmUpO1xuICAgICAgICByb29rU3F1YXJlLnBpZWNlLm1vdmUoa2luZ1NxdWFyZSk7XG4gICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLm1vdmUuY2FsbCh0aGlzLCBjYXN0bGluZ1NxdWFyZSk7XG4gICAgfTtcbiAgICByZXR1cm4gS2luZ1BpZWNlO1xufShQaWVjZV8xLlBpZWNlKSk7XG5leHBvcnRzLktpbmdQaWVjZSA9IEtpbmdQaWVjZTtcbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2luZy5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgUGllY2VfMSA9IHJlcXVpcmUoXCIuLi9QaWVjZVwiKTtcbnZhciBLbmlnaHRQaWVjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoS25pZ2h0UGllY2UsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gS25pZ2h0UGllY2UoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5uYW1lID0gXCJLbmlnaHRcIjtcbiAgICAgICAgX3RoaXMudHlwZSA9IFwiTlwiO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIEtuaWdodFBpZWNlLnByb3RvdHlwZS5nZXRNb3ZlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TW92ZXNCeVZlY3RvcnMoS25pZ2h0UGllY2UuTW92ZW1lbnRWZWN0b3JzLCAxKTtcbiAgICB9O1xuICAgIEtuaWdodFBpZWNlLk1vdmVtZW50VmVjdG9ycyA9IFtbMSwgMl0sIFsxLCAtMl0sIFstMSwgMl0sIFstMSwgLTJdLCBbMiwgMV0sIFsyLCAtMV0sIFstMiwgMV0sIFstMiwgLTFdXTtcbiAgICByZXR1cm4gS25pZ2h0UGllY2U7XG59KFBpZWNlXzEuUGllY2UpKTtcbmV4cG9ydHMuS25pZ2h0UGllY2UgPSBLbmlnaHRQaWVjZTtcbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S25pZ2h0LmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBQaWVjZV8xID0gcmVxdWlyZShcIi4uL1BpZWNlXCIpO1xudmFyIEV2ZW50c18xID0gcmVxdWlyZShcIi4uL0V2ZW50c1wiKTtcbnZhciBQYXduUGllY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBhd25QaWVjZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBQYXduUGllY2UoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5uYW1lID0gXCJQYXduXCI7XG4gICAgICAgIF90aGlzLnR5cGUgPSBcIlBcIjtcbiAgICAgICAgX3RoaXMuZW5wYXNzYW50ID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgUGF3blBpZWNlLnByb3RvdHlwZS5tb3ZlID0gZnVuY3Rpb24gKHNxdWFyZSkge1xuICAgICAgICB2YXIgY3VycmVudCA9IHRoaXMuc3F1YXJlO1xuICAgICAgICAvLyBTZXQgZW5wYXNzYW50IGZsYWcgaWYgaXQgd2FzIGEgYmlnIG1vdmVcbiAgICAgICAgaWYgKE1hdGguYWJzKGN1cnJlbnQuZ2V0UG9zaXRpb24oKS55IC0gc3F1YXJlLmdldFBvc2l0aW9uKCkueSkgPiAxKSB7XG4gICAgICAgICAgICB0aGlzLmVucGFzc2FudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVucGFzc2FudCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghX3N1cGVyLnByb3RvdHlwZS5tb3ZlLmNhbGwodGhpcywgc3F1YXJlKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIG1vdmUgd2FzIGVucGFzc2FudCBjYXB0dXJlXG4gICAgICAgIHZhciBiYWNrID0gdGhpcy5zcXVhcmUuZ2V0U2libGluZygwLCAodGhpcy5jb2xvciA9PSBQaWVjZV8xLkNPTE9SUy5XSElURSA/IDEgOiAtMSkpO1xuICAgICAgICBpZiAoYmFjayAmJiBiYWNrLnBpZWNlICYmIGJhY2sucGllY2UuY29sb3IgIT0gdGhpcy5jb2xvciAmJiBiYWNrLnBpZWNlLmVucGFzc2FudCkge1xuICAgICAgICAgICAgdGhpcy5jYXB0dXJlKGJhY2spO1xuICAgICAgICB9XG4gICAgICAgIC8vIFF1ZWVuaW5nXG4gICAgICAgIHZhciBmb3J3YXJkU3F1YXJlID0gdGhpcy5zcXVhcmUuZ2V0U2libGluZygwLCAodGhpcy5jb2xvciA9PSBQaWVjZV8xLkNPTE9SUy5XSElURSA/IC0xIDogMSkpO1xuICAgICAgICBpZiAoIWZvcndhcmRTcXVhcmUpIHtcbiAgICAgICAgICAgIHZhciBuZXdQaWVjZSA9IHRoaXMuYm9hcmQuY3JlYXRlUGllY2UoXCJRXCIsIHRoaXMuY29sb3IpO1xuICAgICAgICAgICAgbmV3UGllY2Uuc2V0U3F1YXJlKHRoaXMuc3F1YXJlKTtcbiAgICAgICAgICAgIHRoaXMuYm9hcmQub25Qcm9tb3RlLmVtaXQobmV3IEV2ZW50c18xLkNoZXNzUHJvbW90ZUV2ZW50KHRoaXMuc3F1YXJlLCBuZXdQaWVjZSwgdGhpcy5ib2FyZC5TcXVhcmVUb0ZFTih0aGlzLnNxdWFyZSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIFBhd25QaWVjZS5wcm90b3R5cGUub25Nb3ZlZCA9IGZ1bmN0aW9uIChzcXVhcmUpIHtcbiAgICAgICAgdGhpcy5ib2FyZC5hZGRUb0hpc3RvcnkoXCJtb3ZlXCIsIHtcbiAgICAgICAgICAgIGxhc3RNb3ZlZDogdGhpcy5sYXN0TW92ZWQsXG4gICAgICAgICAgICBtb3ZlczogdGhpcy5tb3ZlcyxcbiAgICAgICAgICAgIGVucGFzc2FudDogdGhpcy5lbnBhc3NhbnQsXG4gICAgICAgICAgICBwaWVjZTogdGhpcyxcbiAgICAgICAgICAgIGZyb206IHRoaXMuc3F1YXJlLFxuICAgICAgICAgICAgdG86IHNxdWFyZVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFBhd25QaWVjZS5wcm90b3R5cGUudW5kb01vdmUgPSBmdW5jdGlvbiAobW92ZSkge1xuICAgICAgICB0aGlzLmVucGFzc2FudCA9IG1vdmUuZW5wYXNzYW50O1xuICAgICAgICB0aGlzLmxhc3RNb3ZlZCA9IG1vdmUubGFzdE1vdmVkO1xuICAgICAgICB0aGlzLm1vdmVzID0gbW92ZS5tb3ZlcztcbiAgICAgICAgdGhpcy5zZXRTcXVhcmUobW92ZS5mcm9tKTtcbiAgICB9O1xuICAgIFBhd25QaWVjZS5wcm90b3R5cGUuQWZ0ZXJQaWVjZU1vdmVkID0gZnVuY3Rpb24gKHBpZWNlLCBzcXVhcmUpIHtcbiAgICAgICAgLy8gSWYgYW55IHBpZWNlIGlzIG1vdmVkIG5vIGVucGFzc2FudCBtb3ZlcyBhcmUgYWxsb3dlZFxuICAgICAgICAvLyBpZihwaWVjZS5jb2xvciAhPSB0aGlzLmNvbG9yKVxuICAgICAgICAvLyB7XG4gICAgICAgIC8vIFx0dGhpcy5lbnBhc3NhbnQgPSBmYWxzZTtcbiAgICAgICAgLy8gfVxuICAgIH07XG4gICAgUGF3blBpZWNlLnByb3RvdHlwZS5nZXRNb3ZlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1vdmVzID0gW107XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSAodGhpcy5jb2xvciA9PSBQaWVjZV8xLkNPTE9SUy5XSElURSA/IC0xIDogMSk7XG4gICAgICAgIC8vIDEgRm9yd2FyZFxuICAgICAgICB2YXIgc3F1YXJlMSA9IHRoaXMuc3F1YXJlLmdldFNpYmxpbmcoMCwgZGlyZWN0aW9uKTtcbiAgICAgICAgaWYgKHNxdWFyZTEgJiYgIXNxdWFyZTEucGllY2UpIHtcbiAgICAgICAgICAgIG1vdmVzLnB1c2goc3F1YXJlMSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gMiBGb3J3YXJkIChpZiBkaWRuJ3QgbW92ZSB5ZXQpXG4gICAgICAgIHZhciBzcXVhcmUyID0gdGhpcy5zcXVhcmUuZ2V0U2libGluZygwLCBkaXJlY3Rpb24gKiAyKTtcbiAgICAgICAgaWYgKHNxdWFyZTIgJiYgIXNxdWFyZTIucGllY2UgJiYgdGhpcy5tb3ZlcyA9PSAwICYmICFzcXVhcmUxLnBpZWNlKSB7XG4gICAgICAgICAgICBtb3Zlcy5wdXNoKHNxdWFyZTIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENhcHR1cmUgMVxuICAgICAgICB2YXIgY2FwdHVyZTEgPSB0aGlzLnNxdWFyZS5nZXRTaWJsaW5nKDEsIGRpcmVjdGlvbik7XG4gICAgICAgIGlmIChjYXB0dXJlMSAmJiBjYXB0dXJlMS5waWVjZSAmJiBjYXB0dXJlMS5waWVjZS5jb2xvciAhPSB0aGlzLmNvbG9yKSB7XG4gICAgICAgICAgICBtb3Zlcy5wdXNoKGNhcHR1cmUxKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDYXB0dXJlIDJcbiAgICAgICAgdmFyIGNhcHR1cmUyID0gdGhpcy5zcXVhcmUuZ2V0U2libGluZygtMSwgZGlyZWN0aW9uKTtcbiAgICAgICAgaWYgKGNhcHR1cmUyICYmIGNhcHR1cmUyLnBpZWNlICYmIGNhcHR1cmUyLnBpZWNlLmNvbG9yICE9IHRoaXMuY29sb3IpIHtcbiAgICAgICAgICAgIG1vdmVzLnB1c2goY2FwdHVyZTIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEVuIHBhc3NhbnQgY2FwdHVyZSAxXG4gICAgICAgIHZhciBlbnBhc3NhbnQxID0gdGhpcy5zcXVhcmUuZ2V0U2libGluZygxLCAwKTtcbiAgICAgICAgaWYgKGVucGFzc2FudDEgJiYgZW5wYXNzYW50MS5waWVjZSAmJiBlbnBhc3NhbnQxLnBpZWNlLmNvbG9yICE9IHRoaXMuY29sb3IgJiYgZW5wYXNzYW50MS5waWVjZS5tb3ZlcyA9PSAxICYmIGVucGFzc2FudDEucGllY2UuZW5wYXNzYW50KSB7XG4gICAgICAgICAgICBtb3Zlcy5wdXNoKHRoaXMuc3F1YXJlLmdldFNpYmxpbmcoMSwgZGlyZWN0aW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8vIEVuIHBhc3NhbnQgY2FwdHVyZSAyXG4gICAgICAgIHZhciBlbnBhc3NhbnQyID0gdGhpcy5zcXVhcmUuZ2V0U2libGluZygtMSwgMCk7XG4gICAgICAgIGlmIChlbnBhc3NhbnQyICYmIGVucGFzc2FudDIucGllY2UgJiYgZW5wYXNzYW50Mi5waWVjZS5jb2xvciAhPSB0aGlzLmNvbG9yICYmIGVucGFzc2FudDIucGllY2UubW92ZXMgPT0gMSAmJiBlbnBhc3NhbnQyLnBpZWNlLmVucGFzc2FudCkge1xuICAgICAgICAgICAgbW92ZXMucHVzaCh0aGlzLnNxdWFyZS5nZXRTaWJsaW5nKC0xLCBkaXJlY3Rpb24pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbW92ZXM7XG4gICAgfTtcbiAgICByZXR1cm4gUGF3blBpZWNlO1xufShQaWVjZV8xLlBpZWNlKSk7XG5leHBvcnRzLlBhd25QaWVjZSA9IFBhd25QaWVjZTtcbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGF3bi5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgUGllY2VfMSA9IHJlcXVpcmUoXCIuLi9QaWVjZVwiKTtcbnZhciBRdWVlblBpZWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhRdWVlblBpZWNlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFF1ZWVuUGllY2UoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5uYW1lID0gXCJRdWVlblwiO1xuICAgICAgICBfdGhpcy50eXBlID0gXCJRXCI7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgUXVlZW5QaWVjZS5wcm90b3R5cGUuZ2V0TW92ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1vdmVzQnlWZWN0b3JzKFBpZWNlXzEuTW92ZW1lbnRWZWN0b3JzLk9tbmkpO1xuICAgIH07XG4gICAgcmV0dXJuIFF1ZWVuUGllY2U7XG59KFBpZWNlXzEuUGllY2UpKTtcbmV4cG9ydHMuUXVlZW5QaWVjZSA9IFF1ZWVuUGllY2U7XG47XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVF1ZWVuLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBQaWVjZV8xID0gcmVxdWlyZShcIi4uL1BpZWNlXCIpO1xudmFyIFJvb2tQaWVjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUm9va1BpZWNlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJvb2tQaWVjZSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm5hbWUgPSBcIlJvb2tcIjtcbiAgICAgICAgX3RoaXMudHlwZSA9IFwiUlwiO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFJvb2tQaWVjZS5wcm90b3R5cGUuZ2V0TW92ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1vdmVzQnlWZWN0b3JzKFBpZWNlXzEuTW92ZW1lbnRWZWN0b3JzLkxhdGVyYWwpO1xuICAgIH07XG4gICAgcmV0dXJuIFJvb2tQaWVjZTtcbn0oUGllY2VfMS5QaWVjZSkpO1xuZXhwb3J0cy5Sb29rUGllY2UgPSBSb29rUGllY2U7XG47XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJvb2suanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBQb3NpdGlvbnMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUG9zaXRpb25zKCkge1xuICAgIH1cbiAgICBQb3NpdGlvbnMuZGVmYXVsdCA9IFtcbiAgICAgICAgW1wiYlJcIiwgXCJiTlwiLCBcImJCXCIsIFwiYlFcIiwgXCJiS1wiLCBcImJCXCIsIFwiYk5cIiwgXCJiUlwiXSxcbiAgICAgICAgW1wiYlBcIiwgXCJiUFwiLCBcImJQXCIsIFwiYlBcIiwgXCJiUFwiLCBcImJQXCIsIFwiYlBcIiwgXCJiUFwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJ3UFwiLCBcIndQXCIsIFwid1BcIiwgXCJ3UFwiLCBcIndQXCIsIFwid1BcIiwgXCJ3UFwiLCBcIndQXCJdLFxuICAgICAgICBbXCJ3UlwiLCBcIndOXCIsIFwid0JcIiwgXCJ3UVwiLCBcIndLXCIsIFwid0JcIiwgXCJ3TlwiLCBcIndSXCJdLFxuICAgIF07XG4gICAgUG9zaXRpb25zLmNhc3RsaW5nID0gW1xuICAgICAgICBbXCJiUlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcImJLXCIsIFwiXCIsIFwiXCIsIFwiYlJcIl0sXG4gICAgICAgIFtcImJQXCIsIFwiYlBcIiwgXCJiUFwiLCBcImJQXCIsIFwiYlBcIiwgXCJiUFwiLCBcImJQXCIsIFwiYlBcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wid1BcIiwgXCJ3UFwiLCBcIndQXCIsIFwid1BcIiwgXCJ3UFwiLCBcIndQXCIsIFwid1BcIiwgXCJ3UFwiXSxcbiAgICAgICAgW1wid1JcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJ3S1wiLCBcIlwiLCBcIlwiLCBcIndSXCJdLFxuICAgIF07XG4gICAgUG9zaXRpb25zLnNpbmdsZVBhd24gPSBbXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIndQXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgXTtcbiAgICBQb3NpdGlvbnMucGF3blNhY3JhZmljZSA9IFtcbiAgICAgICAgW1wiYlBcIiwgXCJiUFwiLCBcImJQXCIsIFwiYlBcIiwgXCJiUFwiLCBcImJQXCIsIFwiYlBcIiwgXCJiUFwiXSxcbiAgICAgICAgW1wiYlBcIiwgXCJiUFwiLCBcImJQXCIsIFwiYlBcIiwgXCJiUFwiLCBcImJQXCIsIFwiYlBcIiwgXCJiUFwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJ3UFwiLCBcIndQXCIsIFwid1BcIiwgXCJ3UFwiLCBcIndQXCIsIFwid1BcIiwgXCJ3UFwiLCBcIndQXCJdLFxuICAgICAgICBbXCJ3UFwiLCBcIndQXCIsIFwid1BcIiwgXCJ3UFwiLCBcIndQXCIsIFwid1BcIiwgXCJ3UFwiLCBcIndQXCJdLFxuICAgIF07XG4gICAgUG9zaXRpb25zLnNpbmdsZVF1ZWVuID0gW1xuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIndRXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgIF07XG4gICAgUG9zaXRpb25zLnF1ZWVuU2FjcmFmaWNlID0gW1xuICAgICAgICBbXCJiUVwiLCBcImJRXCIsIFwiYlFcIiwgXCJiUVwiLCBcImJRXCIsIFwiYlFcIiwgXCJiUVwiLCBcImJRXCJdLFxuICAgICAgICBbXCJiUVwiLCBcImJRXCIsIFwiYlFcIiwgXCJiUVwiLCBcImJRXCIsIFwiYlFcIiwgXCJiUVwiLCBcImJRXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIndRXCIsIFwid1FcIiwgXCJ3UVwiLCBcIndRXCIsIFwid1FcIiwgXCJ3UVwiLCBcIndRXCIsIFwid1FcIl0sXG4gICAgICAgIFtcIndRXCIsIFwid1FcIiwgXCJ3UVwiLCBcIndRXCIsIFwid1FcIiwgXCJ3UVwiLCBcIndRXCIsIFwid1FcIl0sXG4gICAgXTtcbiAgICBQb3NpdGlvbnMuc2luZ2xlQmlzaG9wID0gW1xuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiYlBcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcImJQXCIsIFwid0JcIiwgXCJiUFwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiYlBcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcImJQXCIsIFwiXCIsIFwiYlBcIiwgXCJcIiwgXCJiUFwiLCBcIlwiLCBcImJQXCJdLFxuICAgICAgICBbXCJiUFwiLCBcIlwiLCBcImJQXCIsIFwiXCIsIFwiYlBcIiwgXCJcIiwgXCJiUFwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiYlBcIiwgXCJcIiwgXCJiUFwiLCBcIlwiLCBcImJQXCIsIFwiXCIsIFwiYlBcIl0sXG4gICAgXTtcbiAgICBQb3NpdGlvbnMuc2luZ2xlUm9vayA9IFtcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwid1JcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICBdO1xuICAgIFBvc2l0aW9ucy5zaW5nbGVLaW5nID0gW1xuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJ3S1wiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgIF07XG4gICAgUG9zaXRpb25zLnNpbmdsZUtuaWdodCA9IFtcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiYlBcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcImJQXCIsIFwiXCIsIFwiYlBcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcImJQXCIsIFwiYlBcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIndOXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgXTtcbiAgICByZXR1cm4gUG9zaXRpb25zO1xufSgpKTtcbmV4cG9ydHMuUG9zaXRpb25zID0gUG9zaXRpb25zO1xuO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb3NpdGlvbnMuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBTcXVhcmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3F1YXJlKGJvYXJkLCB4LCB5KSB7XG4gICAgICAgIHRoaXMucGllY2UgPSBudWxsO1xuICAgICAgICB0aGlzLmJvYXJkID0gbnVsbDtcbiAgICAgICAgdGhpcy54ID0gLTE7XG4gICAgICAgIHRoaXMueSA9IC0xO1xuICAgICAgICB0aGlzLmJvYXJkID0gYm9hcmQ7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgfVxuICAgIFNxdWFyZS5wcm90b3R5cGUuc2V0UGllY2UgPSBmdW5jdGlvbiAocGllY2UpIHtcbiAgICAgICAgdGhpcy5waWVjZSA9IHBpZWNlO1xuICAgIH07XG4gICAgU3F1YXJlLnByb3RvdHlwZS5nZXRQaWVjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGllY2U7XG4gICAgfTtcbiAgICBTcXVhcmUucHJvdG90eXBlLmdldFNpYmxpbmcgPSBmdW5jdGlvbiAob2Zmc2V0WCwgb2Zmc2V0WSkge1xuICAgICAgICByZXR1cm4gdGhpcy5ib2FyZC5nZXRTcXVhcmUodGhpcy54ICsgb2Zmc2V0WCwgdGhpcy55ICsgb2Zmc2V0WSk7XG4gICAgfTtcbiAgICBTcXVhcmUucHJvdG90eXBlLmdldENvbG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgeG9yID0gZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuICFhICE9ICFiOyB9O1xuICAgICAgICByZXR1cm4geG9yKHRoaXMueCAlIDIsIHRoaXMueSAlIDIpID8gJ3cnIDogJ2InO1xuICAgIH07XG4gICAgU3F1YXJlLnByb3RvdHlwZS5nZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IHRoaXMueCxcbiAgICAgICAgICAgIHk6IHRoaXMueVxuICAgICAgICB9O1xuICAgIH07XG4gICAgU3F1YXJlLnByb3RvdHlwZS5nZXRGRU5Qb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9hcmQuUG9zaXRpb25Ub0ZFTih0aGlzLngsIHRoaXMueSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3F1YXJlO1xufSgpKTtcbmV4cG9ydHMuU3F1YXJlID0gU3F1YXJlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcXVhcmUuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBDaGVzc0V2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENoZXNzRXZlbnQoKSB7XG4gICAgICAgIHRoaXMubWVzc2FnZU9iamVjdCA9IG51bGw7XG4gICAgICAgIHRoaXMuX2RlZmF1bHRQZXJ2ZW50ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fc2hvdWxkUHJvcGFnYXRlID0gdHJ1ZTtcbiAgICB9XG4gICAgQ2hlc3NFdmVudC5wcm90b3R5cGUucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2RlZmF1bHRQZXJ2ZW50ZWQgPSB0cnVlO1xuICAgIH07XG4gICAgQ2hlc3NFdmVudC5wcm90b3R5cGUuaXNQcmV2ZW50ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWZhdWx0UGVydmVudGVkO1xuICAgIH07XG4gICAgQ2hlc3NFdmVudC5wcm90b3R5cGUudHJpZ2dlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMubWVzc2FnZU9iamVjdCkge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlT2JqZWN0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENoZXNzRXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fc2hvdWxkUHJvcGFnYXRlID0gZmFsc2U7XG4gICAgfTtcbiAgICBDaGVzc0V2ZW50LnByb3RvdHlwZS5zaG91bGRQcm9wYWdhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zaG91bGRQcm9wYWdhdGU7XG4gICAgfTtcbiAgICByZXR1cm4gQ2hlc3NFdmVudDtcbn0oKSk7XG5leHBvcnRzLkNoZXNzRXZlbnQgPSBDaGVzc0V2ZW50O1xuO1xudmFyIENoZXNzRXZlbnRFbWl0dGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENoZXNzRXZlbnRFbWl0dGVyKCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtdO1xuICAgIH1cbiAgICBDaGVzc0V2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIChldmVudCwgbWVzc2FnZU9iamVjdCkge1xuICAgICAgICBpZiAobWVzc2FnZU9iamVjdCA9PT0gdm9pZCAwKSB7IG1lc3NhZ2VPYmplY3QgPSBudWxsOyB9XG4gICAgICAgIGV2ZW50Lm1lc3NhZ2VPYmplY3QgPSBtZXNzYWdlT2JqZWN0O1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNob3VsZFByb3BhZ2F0ZSgpKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENoZXNzRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5icm9hZGNhc3QgPSBmdW5jdGlvbiAobWVzc3NhZ2UpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDaGVzc0V2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gICAgfTtcbiAgICBDaGVzc0V2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzLnNwbGljZSh0aGlzLmxpc3RlbmVycy5pbmRleE9mKGNhbGxiYWNrKSwgMSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ2hlc3NFdmVudEVtaXR0ZXI7XG59KCkpO1xuZXhwb3J0cy5DaGVzc0V2ZW50RW1pdHRlciA9IENoZXNzRXZlbnRFbWl0dGVyO1xuO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1VdGlscy5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbn1cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL0NoZXNzYm9hcmRcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vU3F1YXJlXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL1BpZWNlXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL1Bvc2l0aW9uc1wiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9FdmVudHNcIikpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiIsImV4cG9ydHMuQ2hlc3MgPSB7XHJcblx0Q2hlc3M6IHJlcXVpcmUoXCIuL2J1aWxkL0NoZXNzL2luZGV4LmpzXCIpLFxyXG5cdENoZXNzQUk6IHJlcXVpcmUoXCIuL2J1aWxkL0NoZXNzQUkvaW5kZXguanNcIiksXHJcbn07IiwiXHJcbmZ1bmN0aW9uIHJldmVyc2VBcnJheShhcnJheSlcclxue1xyXG4gICAgcmV0dXJuIGFycmF5LnNsaWNlKCkucmV2ZXJzZSgpO1xyXG59O1xyXG5cclxuZXhwb3J0IHZhciBib2FyZEV2YWxzV2hpdGUgPSB7XHJcblx0UDogW1xyXG5cdFx0WzEwLjAsICAxMC4wLCAgMTAuMCwgIDEwLjAsICAxMC4wLCAgMTAuMCwgIDEwLjAsICAxMC4wXSxcclxuXHRcdFs1LjAsICA1LjAsICA1LjAsICA1LjAsICA1LjAsICA1LjAsICA1LjAsICA1LjBdLFxyXG5cdFx0WzEuMCwgIDEuMCwgIDIuMCwgIDMuMCwgIDMuMCwgIDIuMCwgIDEuMCwgIDEuMF0sXHJcblx0XHRbMC41LCAgMC41LCAgMS4wLCAgMi41LCAgMi41LCAgMS4wLCAgMC41LCAgMC41XSxcclxuXHRcdFswLjAsICAwLjAsICAwLjAsICAyLjAsICAyLjAsICAwLjAsICAwLjAsICAwLjBdLFxyXG5cdFx0WzAuNSwgLTAuNSwgLTEuMCwgIDAuMCwgIDAuMCwgLTEuMCwgLTAuNSwgIDAuNV0sXHJcblx0XHRbMC41LCAgMS4wLCAxLjAsICAtMi4wLCAtMi4wLCAgMS4wLCAgMS4wLCAgMC41XSxcclxuXHRcdFswLjAsICAwLjAsICAwLjAsICAwLjAsICAwLjAsICAwLjAsICAwLjAsICAwLjBdXHJcblx0XSxcclxuXHJcblx0TjogW1xyXG5cdFx0Wy01LjAsIC00LjAsIC0zLjAsIC0zLjAsIC0zLjAsIC0zLjAsIC00LjAsIC01LjBdLFxyXG5cdFx0Wy00LjAsIC0yLjAsICAwLjAsICAwLjAsICAwLjAsICAwLjAsIC0yLjAsIC00LjBdLFxyXG5cdFx0Wy0zLjAsICAwLjAsICAxLjAsICAxLjUsICAxLjUsICAxLjAsICAwLjAsIC0zLjBdLFxyXG5cdFx0Wy0zLjAsICAwLjUsICAxLjUsICAyLjAsICAyLjAsICAxLjUsICAwLjUsIC0zLjBdLFxyXG5cdFx0Wy0zLjAsICAwLjAsICAxLjUsICAyLjAsICAyLjAsICAxLjUsICAwLjAsIC0zLjBdLFxyXG5cdFx0Wy0zLjAsICAwLjUsICAxLjAsICAxLjUsICAxLjUsICAxLjAsICAwLjUsIC0zLjBdLFxyXG5cdFx0Wy00LjAsIC0yLjAsICAwLjAsICAwLjUsICAwLjUsICAwLjAsIC0yLjAsIC00LjBdLFxyXG5cdFx0Wy01LjAsIC00LjAsIC0zLjAsIC0zLjAsIC0zLjAsIC0zLjAsIC00LjAsIC01LjBdXHJcblx0XHRdLFxyXG5cclxuXHRCOiBbXHJcblx0XHRbIC0yLjAsIC0xLjAsIC0xLjAsIC0xLjAsIC0xLjAsIC0xLjAsIC0xLjAsIC0yLjBdLFxyXG5cdFx0WyAtMS4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAtMS4wXSxcclxuXHRcdFsgLTEuMCwgIDAuMCwgIDAuNSwgIDEuMCwgIDEuMCwgIDAuNSwgIDAuMCwgLTEuMF0sXHJcblx0XHRbIC0xLjAsICAwLjUsICAwLjUsICAxLjAsICAxLjAsICAwLjUsICAwLjUsIC0xLjBdLFxyXG5cdFx0WyAtMS4wLCAgMC4wLCAgMS4wLCAgMS4wLCAgMS4wLCAgMS4wLCAgMC4wLCAtMS4wXSxcclxuXHRcdFsgLTEuMCwgIDEuMCwgIDEuMCwgIDEuMCwgIDEuMCwgIDEuMCwgIDEuMCwgLTEuMF0sXHJcblx0XHRbIC0xLjAsICAwLjUsICAwLjAsICAwLjAsICAwLjAsICAwLjAsICAwLjUsIC0xLjBdLFxyXG5cdFx0WyAtMi4wLCAtMS4wLCAtMS4wLCAtMS4wLCAtMS4wLCAtMS4wLCAtMS4wLCAtMi4wXVxyXG5cdF0sXHJcblxyXG5cclxuXHRSOiBbXHJcblx0XHRbICAwLjAsICAwLjAsICAwLjAsICAwLjAsICAwLjAsICAwLjAsICAwLjAsICAwLjBdLFxyXG5cdFx0WyAgMC41LCAgMS4wLCAgMS4wLCAgMS4wLCAgMS4wLCAgMS4wLCAgMS4wLCAgMC41XSxcclxuXHRcdFsgLTAuNSwgIDAuMCwgIDAuMCwgIDAuMCwgIDAuMCwgIDAuMCwgIDAuMCwgLTAuNV0sXHJcblx0XHRbIC0wLjUsICAwLjAsICAwLjAsICAwLjAsICAwLjAsICAwLjAsICAwLjAsIC0wLjVdLFxyXG5cdFx0WyAtMC41LCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAtMC41XSxcclxuXHRcdFsgLTAuNSwgIDAuMCwgIDAuMCwgIDAuMCwgIDAuMCwgIDAuMCwgIDAuMCwgLTAuNV0sXHJcblx0XHRbIC0wLjUsICAwLjAsICAwLjAsICAwLjAsICAwLjAsICAwLjAsICAwLjAsIC0wLjVdLFxyXG5cdFx0WyAgMC4wLCAgIDAuMCwgMC4wLCAgMC41LCAgMC41LCAgMC4wLCAgMC4wLCAgMC4wXVxyXG5cdF0sXHJcblxyXG5cclxuXHRROiBbXHJcblx0XHRbIC0yLjAsIC0xLjAsIC0xLjAsIC0wLjUsIC0wLjUsIC0xLjAsIC0xLjAsIC0yLjBdLFxyXG5cdFx0WyAtMS4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAtMS4wXSxcclxuXHRcdFsgLTEuMCwgIDAuMCwgIDAuNSwgIDAuNSwgIDAuNSwgIDAuNSwgIDAuMCwgLTEuMF0sXHJcblx0XHRbIC0wLjUsICAwLjAsICAwLjUsICAwLjUsICAwLjUsICAwLjUsICAwLjAsIC0wLjVdLFxyXG5cdFx0WyAgMC4wLCAgMC4wLCAgMC41LCAgMC41LCAgMC41LCAgMC41LCAgMC4wLCAtMC41XSxcclxuXHRcdFsgLTEuMCwgIDAuNSwgIDAuNSwgIDAuNSwgIDAuNSwgIDAuNSwgIDAuMCwgLTEuMF0sXHJcblx0XHRbIC0xLjAsICAwLjAsICAwLjUsICAwLjAsICAwLjAsICAwLjAsICAwLjAsIC0xLjBdLFxyXG5cdFx0WyAtMi4wLCAtMS4wLCAtMS4wLCAtMC41LCAtMC41LCAtMS4wLCAtMS4wLCAtMi4wXVxyXG5cdF0sXHJcblxyXG5cdEs6IFtcclxuXHJcblx0XHRbIC0zLjAsIC00LjAsIC00LjAsIC01LjAsIC01LjAsIC00LjAsIC00LjAsIC0zLjBdLFxyXG5cdFx0WyAtMy4wLCAtNC4wLCAtNC4wLCAtNS4wLCAtNS4wLCAtNC4wLCAtNC4wLCAtMy4wXSxcclxuXHRcdFsgLTMuMCwgLTQuMCwgLTQuMCwgLTUuMCwgLTUuMCwgLTQuMCwgLTQuMCwgLTMuMF0sXHJcblx0XHRbIC0zLjAsIC00LjAsIC00LjAsIC01LjAsIC01LjAsIC00LjAsIC00LjAsIC0zLjBdLFxyXG5cdFx0WyAtMi4wLCAtMy4wLCAtMy4wLCAtNC4wLCAtNC4wLCAtMy4wLCAtMy4wLCAtMi4wXSxcclxuXHRcdFsgLTEuMCwgLTIuMCwgLTIuMCwgLTIuMCwgLTIuMCwgLTIuMCwgLTIuMCwgLTEuMF0sXHJcblx0XHRbICAyLjAsICAyLjAsICAwLjAsICAwLjAsICAwLjAsICAwLjAsICAyLjAsICAyLjAgXSxcclxuXHRcdFsgIDIuMCwgIDMuMCwgIDEuMCwgIDAuMCwgIDAuMCwgIDEuMCwgIDMuMCwgIDIuMCBdXHJcblx0XVxyXG59O1xyXG5cclxuZXhwb3J0IHZhciBib2FyZEV2YWxzQmxhY2sgPSB7XHJcblx0UDogcmV2ZXJzZUFycmF5KGJvYXJkRXZhbHNXaGl0ZS5QKSxcclxuXHROOiByZXZlcnNlQXJyYXkoYm9hcmRFdmFsc1doaXRlLk4pLFxyXG5cdEI6IHJldmVyc2VBcnJheShib2FyZEV2YWxzV2hpdGUuQiksXHJcblx0UjogcmV2ZXJzZUFycmF5KGJvYXJkRXZhbHNXaGl0ZS5SKSxcclxuXHRROiByZXZlcnNlQXJyYXkoYm9hcmRFdmFsc1doaXRlLlEpLFxyXG5cdEs6IHJldmVyc2VBcnJheShib2FyZEV2YWxzV2hpdGUuSyksXHJcbn07XHJcblxyXG5leHBvcnQgdmFyIEJvYXJkRXZhbHVhdGlvbnMgPSBbXHJcblx0Ym9hcmRFdmFsc0JsYWNrLFxyXG5cdGJvYXJkRXZhbHNXaGl0ZSxcclxuXTsiLCJpbXBvcnQgeyBDaGVzc2JvYXJkLCBQb3NpdGlvbnMsIENPTE9SUyB9IGZyb20gXCJAY2hlc3NsaWIvY29yZVwiO1xyXG5pbXBvcnQgeyBCb2FyZEV2YWx1YXRpb25zIH0gZnJvbSBcIi4vQm9hcmRFdmFsc1wiO1xyXG5cclxuY29uc3QgUElFQ0VfVkFMVUVTID0ge1xyXG5cdFA6IDEwLFxyXG5cdEI6IDMwLFxyXG5cdE46IDMwLFxyXG5cdFI6IDUwLFxyXG5cdFE6IDgwLFxyXG5cdEs6IDkwMCxcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBDaGVzc0FJXHJcbntcclxuXHRjaGVzc2JvYXJkOkNoZXNzYm9hcmQgPSBudWxsO1xyXG5cclxuXHRtb3ZlcyA9IFtdO1xyXG5cdHBsYXlpbmdTaWRlID0gMDtcclxuXHRwbGF5ZXJDb3VudCA9IDI7XHJcblx0c2VhcmNoVGltZSA9IDA7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGNoZXNzYm9hcmQsIHBsYXlpbmdTaWRlLCBwbGF5ZXJDb3VudClcclxuXHR7XHJcblx0XHR0aGlzLmNoZXNzYm9hcmQgPSBjaGVzc2JvYXJkO1xyXG5cdFx0dGhpcy5wbGF5aW5nU2lkZSA9IHBsYXlpbmdTaWRlO1xyXG5cdFx0dGhpcy5wbGF5ZXJDb3VudCA9IHBsYXllckNvdW50O1xyXG5cdH1cclxuXHJcblx0c2V0Qm9hcmQoY2hlc3Nib2FyZClcclxuXHR7XHJcblx0XHR0aGlzLmNoZXNzYm9hcmQgPSBjaGVzc2JvYXJkO1xyXG5cdH1cclxuXHJcblx0bG9hZEJvYXJkKHBvc2l0aW9ucylcclxuXHR7XHJcblx0XHR0aGlzLmNoZXNzYm9hcmQgPSBDaGVzc2JvYXJkLmZyb21Qb3NpdGlvbihwb3NpdGlvbnMpO1xyXG5cdH1cclxuXHJcblx0ZG9Nb3ZlKG1vdmUpXHJcblx0e1xyXG5cdFx0aWYoIXRoaXMuY2hlc3Nib2FyZC5kb01vdmUobW92ZSkpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdGRvTW92ZUZFTihtb3ZlKVxyXG5cdHtcclxuXHRcdGlmKCF0aGlzLmNoZXNzYm9hcmQuZG9Nb3ZlRkVOKG1vdmUpKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHRtYWtlTW92ZXMoc2VhcmNoRGVwdGg9NCwgYW1vdW50ID0gMSlcclxuXHR7XHJcblx0XHR2YXIgYmVzdE1vdmVzID0gdGhpcy5nZXRCZXN0TW92ZXMoc2VhcmNoRGVwdGgsIGFtb3VudCk7XHJcblx0XHRpZighYmVzdE1vdmVzLmxlbmd0aClcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yKHZhciBiZXN0TW92ZSBvZiBiZXN0TW92ZXMpXHJcblx0XHR7XHJcblx0XHRcdHRoaXMuZG9Nb3ZlKGJlc3RNb3ZlKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBiZXN0TW92ZXM7XHJcblx0fVxyXG5cclxuXHRnZXRCZXN0TW92ZShzaWRlLCBzZWFyY2hEZXB0aClcclxuXHR7XHJcblx0XHRcclxuXHRcdHZhciBiZXN0TW92ZXMgPSB0aGlzLmdldEJlc3RNb3ZlcyhzZWFyY2hEZXB0aCk7XHJcblxyXG5cdFx0aWYoIWJlc3RNb3Zlcy5sZW5ndGgpXHJcblx0XHR7XHJcblx0XHQgXHRyZXR1cm4gdGhpcy5nZXRSYW5kb21Nb3ZlKCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIHZhciBiZXN0TW92ZSA9IG51bGw7XHJcblx0XHQvLyB2YXIgYmVzdFZhbHVlID0gLTk5OTk7XHJcblx0XHQvLyBpZihtb3ZlLnNjb3JlID4gYmVzdFZhbHVlKVxyXG5cdFx0Ly8ge1xyXG5cdFx0Ly8gXHRiZXN0TW92ZSA9IG1vdmU7XHJcblx0XHQvLyBcdGJlc3RWYWx1ZSA9IG1vdmUuc2NvcmU7XHJcblx0XHQvLyB9XHJcblx0XHRcclxuXHRcdHJldHVybiBiZXN0TW92ZXNbMF07XHJcblx0fVxyXG5cclxuXHRnZXRCZXN0TW92ZXMoc2VhcmNoRGVwdGgsIGxpbWl0PTUpXHJcblx0e1xyXG5cdFx0dGhpcy5zZWFyY2hUaW1lID0gRGF0ZS5ub3coKSArIDEwMDtcclxuXHRcdHZhciBtb3ZlcyA9IHRoaXMuY2hlc3Nib2FyZC5nZXRNb3Zlc0ZFTih0aGlzLnBsYXlpbmdTaWRlKTtcclxuXHRcdFxyXG5cdFx0Zm9yKGxldCBtb3ZlIG9mIG1vdmVzKVxyXG5cdFx0e1xyXG5cdFx0XHR0aGlzLmNoZXNzYm9hcmQubW92ZUZFTihtb3ZlLmZyb20sIG1vdmUudG8pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gRG8gbm90IGFsbG93IHRoZSBraW5nIHRvIGJlIGtpbGxlZD9cclxuXHRcdFx0bW92ZS5zY29yZSA9IHRoaXMuZXZhbHVhdGVCZXN0TW92ZSh0aGlzLnBsYXlpbmdTaWRlLCBzZWFyY2hEZXB0aCAtIDEsIC0xMDAwMCwgMTAwMDAsIGZhbHNlKTtcclxuXHRcdFx0dGhpcy5jaGVzc2JvYXJkLnVuZG8oKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG1vdmVzLnNvcnQoIChhLCBiKSA9PiB7XHJcblx0XHRcdGlmKGEuc2NvcmUgPCBiLnNjb3JlKVxyXG5cdFx0XHRcdHJldHVybiAxO1xyXG5cdFx0XHRpZihhLnNjb3JlID4gYi5zY29yZSlcclxuXHRcdFx0XHRyZXR1cm4gLTE7XHJcblx0XHRcdHJldHVybiAwO1xyXG5cdFx0fSkuc2xpY2UoMCwgbGltaXQpO1xyXG5cdH1cclxuXHRcclxuXHRnZXROZXh0UGxheWVyU2lkZShwbGF5ZXJTaWRlKVxyXG5cdHtcclxuXHRcdHJldHVybiAocGxheWVyU2lkZSArIDEpICUgdGhpcy5wbGF5ZXJDb3VudDtcclxuXHR9XHJcblxyXG5cdGV2YWx1YXRlQmVzdE1vdmUocGxheWVyU2lkZSwgZGVwdGgsIGFscGhhLCBiZXRhLCBpc01heGltaXNpbmdQbGF5ZXIpXHJcblx0e1xyXG5cdFx0aWYgKGRlcHRoID09PSAwKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5ldmFsdWF0ZUJvYXJkKHRoaXMucGxheWluZ1NpZGUpO1xyXG5cdFx0fVxyXG5cdFx0dmFyIGN1cnJlbnRQbGF5ZXIgPSB0aGlzLmdldE5leHRQbGF5ZXJTaWRlKHBsYXllclNpZGUpO1xyXG5cdFx0dmFyIG1vdmVzID0gdGhpcy5jaGVzc2JvYXJkLmdldE1vdmVzKGN1cnJlbnRQbGF5ZXIpO1xyXG5cclxuXHRcdGlmIChpc01heGltaXNpbmdQbGF5ZXIpXHJcblx0XHR7XHJcblx0XHRcdHZhciBiZXN0VmFsdWUgPSAtOTk5OTtcclxuXHRcdFx0Zm9yIChsZXQgbW92ZSBvZiBtb3ZlcylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoaXMuY2hlc3Nib2FyZC5tb3ZlKG1vdmUuZnJvbSwgbW92ZS50byk7XHJcblx0XHRcdFx0YmVzdFZhbHVlID0gTWF0aC5tYXgoYmVzdFZhbHVlLCB0aGlzLmV2YWx1YXRlQmVzdE1vdmUoY3VycmVudFBsYXllciwgZGVwdGggLSAxLCBhbHBoYSwgYmV0YSwgIWlzTWF4aW1pc2luZ1BsYXllcikpO1xyXG5cdFx0XHRcdHRoaXMuY2hlc3Nib2FyZC51bmRvKCk7XHJcblx0XHRcdFx0YWxwaGEgPSBNYXRoLm1heChhbHBoYSwgYmVzdFZhbHVlKTtcclxuXHRcdFx0XHRpZiAoYmV0YSA8PSBhbHBoYSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRyZXR1cm4gYmVzdFZhbHVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gYmVzdFZhbHVlO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dmFyIGJlc3RWYWx1ZSA9IDk5OTk7XHJcblx0XHRcdGZvciAobGV0IG1vdmUgb2YgbW92ZXMpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR0aGlzLmNoZXNzYm9hcmQubW92ZShtb3ZlLmZyb20sIG1vdmUudG8pO1xyXG5cdFx0XHRcdGJlc3RWYWx1ZSA9IE1hdGgubWluKGJlc3RWYWx1ZSwgdGhpcy5ldmFsdWF0ZUJlc3RNb3ZlKGN1cnJlbnRQbGF5ZXIsIGRlcHRoIC0gMSwgYWxwaGEsIGJldGEsICFpc01heGltaXNpbmdQbGF5ZXIpKTtcclxuXHRcdFx0XHR0aGlzLmNoZXNzYm9hcmQudW5kbygpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGJldGEgPSBNYXRoLm1pbihiZXRhLCBiZXN0VmFsdWUpO1xyXG5cdFx0XHRcdGlmIChiZXRhIDw9IGFscGhhKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHJldHVybiBiZXN0VmFsdWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBiZXN0VmFsdWU7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRnZXRSYW5kb21Nb3ZlKClcclxuXHR7XHJcblx0XHR2YXIgbW92ZXMgPSB0aGlzLmNoZXNzYm9hcmQuZ2V0TW92ZXNGRU4odGhpcy5wbGF5aW5nU2lkZSk7XHJcblx0XHRpZighbW92ZXMubGVuZ3RoKVxyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdHZhciByYW5kTW92ZSA9IG1vdmVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1vdmVzLmxlbmd0aCldO1xyXG5cdFx0cmFuZE1vdmUuc2NvcmUgPSAwO1xyXG5cdFx0cmV0dXJuIHJhbmRNb3ZlO1xyXG5cdH1cclxuXHJcblx0ZXZhbHVhdGVCb2FyZChzaWRlKVxyXG5cdHtcclxuXHRcdHZhciBib2FyZFZhbHVlID0gMDtcclxuXHRcdHRoaXMuY2hlc3Nib2FyZC5mb3JFYWNoUGllY2UoIHBpZWNlID0+IHtcclxuXHRcdFx0aWYoc2lkZSA9PSBwaWVjZS5jb2xvcilcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGJvYXJkVmFsdWUgKz0gUElFQ0VfVkFMVUVTW3BpZWNlLnR5cGVdICsgQm9hcmRFdmFsdWF0aW9uc1twaWVjZS5jb2xvcl1bcGllY2UudHlwZV1bcGllY2Uuc3F1YXJlLnldW3BpZWNlLnNxdWFyZS54XTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0Ym9hcmRWYWx1ZSAtPSBQSUVDRV9WQUxVRVNbcGllY2UudHlwZV0gKyBCb2FyZEV2YWx1YXRpb25zW3BpZWNlLmNvbG9yXVtwaWVjZS50eXBlXVtwaWVjZS5zcXVhcmUueV1bcGllY2Uuc3F1YXJlLnhdO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0fSk7XHJcblx0XHRyZXR1cm4gYm9hcmRWYWx1ZTtcclxuXHR9XHJcblx0XHJcbn07IiwiZXhwb3J0IGNsYXNzIENoZXNzQUlXb3JrZXJcclxue1xyXG5cdHdvcmtlcjogV29ya2VyID0gbnVsbDtcclxuXHRcclxuXHRsaXN0ZW5lcnMgPSBbXTtcclxuXHRjb25zdHJ1Y3Rvcih3b3JrZXJQYXRoKVxyXG5cdHtcclxuXHRcdHRoaXMud29ya2VyID0gbmV3IFdvcmtlciggd29ya2VyUGF0aCApO1xyXG5cdFx0dGhpcy53b3JrZXIub25tZXNzYWdlID0gKG1lc3NhZ2UpID0+IHtcclxuXHRcdFx0XHJcblx0XHRcdGlmKHRoaXMubGlzdGVuZXJzW21lc3NhZ2UuZGF0YS5ldmVudF0pXHJcblx0XHRcdHtcclxuXHRcdFx0XHRmb3IodmFyIGV2ZW50IG9mIHRoaXMubGlzdGVuZXJzW21lc3NhZ2UuZGF0YS5ldmVudF0pXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0ZXZlbnQuYXBwbHkoZXZlbnQsIG1lc3NhZ2UuZGF0YS5hcmd1bWVudHMpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdGVtaXQoZXZlbnQsIGRhdGEpXHJcblx0e1xyXG5cdFx0dGhpcy53b3JrZXIucG9zdE1lc3NhZ2UoZXZlbnQpO1xyXG5cdH1cclxuXHRcclxuXHRvbih0eXBlLCBjYWxsYmFjaylcclxuXHR7XHJcblx0XHRpZighdGhpcy5saXN0ZW5lcnNbdHlwZV0pXHJcblx0XHR7XHJcblx0XHRcdHRoaXMubGlzdGVuZXJzW3R5cGVdID0gW107XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5saXN0ZW5lcnNbdHlwZV0ucHVzaChjYWxsYmFjayk7XHJcblx0fVxyXG5cdFxyXG5cdGV4ZWMobWV0aG9kLCAuLi5hcmdzOiBhbnlbXSlcclxuXHR7XHJcblx0XHR0aGlzLndvcmtlci5wb3N0TWVzc2FnZSh7XHJcblx0XHRcdG1ldGhvZDogbWV0aG9kLFxyXG5cdFx0XHRhcmd1bWVudHM6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuc2xpY2UoMSlcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0ZGVzdHJveSgpXHJcblx0e1xyXG5cdFx0dGhpcy53b3JrZXIudGVybWluYXRlKCk7XHJcblx0fVxyXG59O1xyXG5cclxuIiwiZXhwb3J0ICogZnJvbSBcIi4vQ2hlc3NBSVwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9DaGVzc0FJV29ya2VyXCI7IiwiaW1wb3J0ICogYXMgQ2hlc3NBSSBmcm9tIFwiLi9DaGVzc0FJXCI7XHJcblxyXG5kZWNsYXJlIGxldCB3aW5kb3c6YW55O1xyXG53aW5kb3cuQ2hlc3NBSSA9IENoZXNzQUk7XHJcblxyXG5leHBvcnQgKiBmcm9tIFwiLi9DaGVzc0FJXCI7XHJcbiJdfQ=="}