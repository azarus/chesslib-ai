{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/@chesslib/core/build/ChessAI/BoardEvals.js","node_modules/@chesslib/core/build/ChessAI/ChessAI.js","node_modules/@chesslib/core/build/ChessAI/ChessAIWorker.js","node_modules/@chesslib/core/build/ChessAI/index.js","node_modules/@chesslib/core/build/Chess/Chessboard.js","node_modules/@chesslib/core/build/Chess/Events.js","node_modules/@chesslib/core/build/Chess/Piece.js","node_modules/@chesslib/core/build/Chess/Pieces/Bishop.js","node_modules/@chesslib/core/build/Chess/Pieces/King.js","node_modules/@chesslib/core/build/Chess/Pieces/Knight.js","node_modules/@chesslib/core/build/Chess/Pieces/Pawn.js","node_modules/@chesslib/core/build/Chess/Pieces/Queen.js","node_modules/@chesslib/core/build/Chess/Pieces/Rook.js","node_modules/@chesslib/core/build/Chess/Positions.js","node_modules/@chesslib/core/build/Chess/Square.js","node_modules/@chesslib/core/build/Chess/Utils.js","node_modules/@chesslib/core/build/Chess/index.js","node_modules/@chesslib/core/index.js","source/AIWorker/Utils/AIWorker.ts","source/AIWorker/worker.ts","source/ChessAI/BoardEvals.ts","source/ChessAI/ChessAI.ts","source/ChessAI/ChessAIWorker.ts","source/ChessAI/index.ts"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","file":"worker.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction reverseArray(array) {\n    return array.slice().reverse();\n}\n;\nexports.boardEvalsWhite = {\n    P: [\n        [10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0],\n        [5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0],\n        [1.0, 1.0, 2.0, 3.0, 3.0, 2.0, 1.0, 1.0],\n        [0.5, 0.5, 1.0, 2.5, 2.5, 1.0, 0.5, 0.5],\n        [0.0, 0.0, 0.0, 2.0, 2.0, 0.0, 0.0, 0.0],\n        [0.5, -0.5, -1.0, 0.0, 0.0, -1.0, -0.5, 0.5],\n        [0.5, 1.0, 1.0, -2.0, -2.0, 1.0, 1.0, 0.5],\n        [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]\n    ],\n    N: [\n        [-5.0, -4.0, -3.0, -3.0, -3.0, -3.0, -4.0, -5.0],\n        [-4.0, -2.0, 0.0, 0.0, 0.0, 0.0, -2.0, -4.0],\n        [-3.0, 0.0, 1.0, 1.5, 1.5, 1.0, 0.0, -3.0],\n        [-3.0, 0.5, 1.5, 2.0, 2.0, 1.5, 0.5, -3.0],\n        [-3.0, 0.0, 1.5, 2.0, 2.0, 1.5, 0.0, -3.0],\n        [-3.0, 0.5, 1.0, 1.5, 1.5, 1.0, 0.5, -3.0],\n        [-4.0, -2.0, 0.0, 0.5, 0.5, 0.0, -2.0, -4.0],\n        [-5.0, -4.0, -3.0, -3.0, -3.0, -3.0, -4.0, -5.0]\n    ],\n    B: [\n        [-2.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -2.0],\n        [-1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -1.0],\n        [-1.0, 0.0, 0.5, 1.0, 1.0, 0.5, 0.0, -1.0],\n        [-1.0, 0.5, 0.5, 1.0, 1.0, 0.5, 0.5, -1.0],\n        [-1.0, 0.0, 1.0, 1.0, 1.0, 1.0, 0.0, -1.0],\n        [-1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, -1.0],\n        [-1.0, 0.5, 0.0, 0.0, 0.0, 0.0, 0.5, -1.0],\n        [-2.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -2.0]\n    ],\n    R: [\n        [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],\n        [0.5, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.5],\n        [-0.5, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -0.5],\n        [-0.5, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -0.5],\n        [-0.5, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -0.5],\n        [-0.5, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -0.5],\n        [-0.5, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -0.5],\n        [0.0, 0.0, 0.0, 0.5, 0.5, 0.0, 0.0, 0.0]\n    ],\n    Q: [\n        [-2.0, -1.0, -1.0, -0.5, -0.5, -1.0, -1.0, -2.0],\n        [-1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -1.0],\n        [-1.0, 0.0, 0.5, 0.5, 0.5, 0.5, 0.0, -1.0],\n        [-0.5, 0.0, 0.5, 0.5, 0.5, 0.5, 0.0, -0.5],\n        [0.0, 0.0, 0.5, 0.5, 0.5, 0.5, 0.0, -0.5],\n        [-1.0, 0.5, 0.5, 0.5, 0.5, 0.5, 0.0, -1.0],\n        [-1.0, 0.0, 0.5, 0.0, 0.0, 0.0, 0.0, -1.0],\n        [-2.0, -1.0, -1.0, -0.5, -0.5, -1.0, -1.0, -2.0]\n    ],\n    K: [\n        [-3.0, -4.0, -4.0, -5.0, -5.0, -4.0, -4.0, -3.0],\n        [-3.0, -4.0, -4.0, -5.0, -5.0, -4.0, -4.0, -3.0],\n        [-3.0, -4.0, -4.0, -5.0, -5.0, -4.0, -4.0, -3.0],\n        [-3.0, -4.0, -4.0, -5.0, -5.0, -4.0, -4.0, -3.0],\n        [-2.0, -3.0, -3.0, -4.0, -4.0, -3.0, -3.0, -2.0],\n        [-1.0, -2.0, -2.0, -2.0, -2.0, -2.0, -2.0, -1.0],\n        [2.0, 2.0, 0.0, 0.0, 0.0, 0.0, 2.0, 2.0],\n        [2.0, 3.0, 1.0, 0.0, 0.0, 1.0, 3.0, 2.0]\n    ]\n};\nexports.boardEvalsBlack = {\n    P: reverseArray(exports.boardEvalsWhite.P),\n    N: reverseArray(exports.boardEvalsWhite.N),\n    B: reverseArray(exports.boardEvalsWhite.B),\n    R: reverseArray(exports.boardEvalsWhite.R),\n    Q: reverseArray(exports.boardEvalsWhite.Q),\n    K: reverseArray(exports.boardEvalsWhite.K),\n};\nexports.BoardEvaluations = [\n    exports.boardEvalsBlack,\n    exports.boardEvalsWhite,\n];\n\n//# sourceMappingURL=BoardEvals.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Chess_1 = require(\"../Chess\");\nvar BoardEvals_1 = require(\"./BoardEvals\");\nvar PIECE_VALUES = {\n    P: 10,\n    B: 30,\n    N: 30,\n    R: 50,\n    Q: 80,\n    K: 900,\n};\nvar ChessAI = /** @class */ (function () {\n    function ChessAI(chessboard, playingSide, playerCount) {\n        this.chessboard = null;\n        this.moves = [];\n        this.playingSide = 0;\n        this.playerCount = 2;\n        this.searchTime = 0;\n        this.chessboard = chessboard;\n        this.playingSide = playingSide;\n        this.playerCount = playerCount;\n    }\n    ChessAI.prototype.setBoard = function (chessboard) {\n        this.chessboard = chessboard;\n    };\n    ChessAI.prototype.loadBoard = function (positions) {\n        this.chessboard = Chess_1.Chessboard.fromPosition(positions);\n    };\n    ChessAI.prototype.doMove = function (move) {\n        if (!this.chessboard.doMove(move)) {\n            return false;\n        }\n        return true;\n    };\n    ChessAI.prototype.doMoveFEN = function (move) {\n        if (!this.chessboard.doMoveFEN(move)) {\n            return false;\n        }\n        return true;\n    };\n    ChessAI.prototype.makeMoves = function (searchDepth, amount) {\n        if (searchDepth === void 0) { searchDepth = 4; }\n        if (amount === void 0) { amount = 1; }\n        var bestMoves = this.getBestMoves(searchDepth, amount);\n        if (!bestMoves.length) {\n            return null;\n        }\n        for (var _i = 0, bestMoves_1 = bestMoves; _i < bestMoves_1.length; _i++) {\n            var bestMove = bestMoves_1[_i];\n            this.doMove(bestMove);\n        }\n        return bestMoves;\n    };\n    ChessAI.prototype.getBestMove = function (side, searchDepth) {\n        var bestMoves = this.getBestMoves(searchDepth);\n        if (!bestMoves.length) {\n            return this.getRandomMove();\n        }\n        // var bestMove = null;\n        // var bestValue = -9999;\n        // if(move.score > bestValue)\n        // {\n        // \tbestMove = move;\n        // \tbestValue = move.score;\n        // }\n        return bestMoves[0];\n    };\n    ChessAI.prototype.getBestMoves = function (searchDepth, limit) {\n        if (limit === void 0) { limit = 5; }\n        this.searchTime = Date.now() + 100;\n        var moves = this.chessboard.getMovesFEN(this.playingSide);\n        for (var _i = 0, moves_1 = moves; _i < moves_1.length; _i++) {\n            var move = moves_1[_i];\n            this.chessboard.moveFEN(move.from, move.to);\n            // Do not allow the king to be killed?\n            move.score = this.evaluateBestMove(this.playingSide, searchDepth - 1, -10000, 10000, false);\n            this.chessboard.undo();\n        }\n        return moves.sort(function (a, b) {\n            if (a.score < b.score)\n                return 1;\n            if (a.score > b.score)\n                return -1;\n            return 0;\n        }).slice(0, limit);\n    };\n    ChessAI.prototype.getNextPlayerSide = function (playerSide) {\n        return (playerSide + 1) % this.playerCount;\n    };\n    ChessAI.prototype.evaluateBestMove = function (playerSide, depth, alpha, beta, isMaximisingPlayer) {\n        if (depth === 0) {\n            return this.evaluateBoard(this.playingSide);\n        }\n        var currentPlayer = this.getNextPlayerSide(playerSide);\n        var moves = this.chessboard.getMoves(currentPlayer);\n        if (isMaximisingPlayer) {\n            var bestValue = -9999;\n            for (var _i = 0, moves_2 = moves; _i < moves_2.length; _i++) {\n                var move = moves_2[_i];\n                this.chessboard.move(move.from, move.to);\n                bestValue = Math.max(bestValue, this.evaluateBestMove(currentPlayer, depth - 1, alpha, beta, !isMaximisingPlayer));\n                this.chessboard.undo();\n                alpha = Math.max(alpha, bestValue);\n                if (beta <= alpha) {\n                    return bestValue;\n                }\n            }\n            return bestValue;\n        }\n        else {\n            var bestValue = 9999;\n            for (var _a = 0, moves_3 = moves; _a < moves_3.length; _a++) {\n                var move = moves_3[_a];\n                this.chessboard.move(move.from, move.to);\n                bestValue = Math.min(bestValue, this.evaluateBestMove(currentPlayer, depth - 1, alpha, beta, !isMaximisingPlayer));\n                this.chessboard.undo();\n                beta = Math.min(beta, bestValue);\n                if (beta <= alpha) {\n                    return bestValue;\n                }\n            }\n            return bestValue;\n        }\n    };\n    ChessAI.prototype.getRandomMove = function () {\n        var moves = this.chessboard.getMovesFEN(this.playingSide);\n        if (!moves.length)\n            return null;\n        var randMove = moves[Math.floor(Math.random() * moves.length)];\n        randMove.score = 0;\n        return randMove;\n    };\n    ChessAI.prototype.evaluateBoard = function (side) {\n        var boardValue = 0;\n        this.chessboard.forEachPiece(function (piece) {\n            if (side == piece.color) {\n                boardValue += PIECE_VALUES[piece.type] + BoardEvals_1.BoardEvaluations[piece.color][piece.type][piece.square.y][piece.square.x];\n            }\n            else {\n                boardValue -= PIECE_VALUES[piece.type] + BoardEvals_1.BoardEvaluations[piece.color][piece.type][piece.square.y][piece.square.x];\n            }\n        });\n        return boardValue;\n    };\n    return ChessAI;\n}());\nexports.ChessAI = ChessAI;\n;\n\n//# sourceMappingURL=ChessAI.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ChessAIWorker = /** @class */ (function () {\n    function ChessAIWorker(workerPath) {\n        var _this = this;\n        this.worker = null;\n        this.listeners = [];\n        this.worker = new Worker(workerPath);\n        this.worker.onmessage = function (message) {\n            if (_this.listeners[message.data.event]) {\n                for (var _i = 0, _a = _this.listeners[message.data.event]; _i < _a.length; _i++) {\n                    var event = _a[_i];\n                    event.apply(event, message.data.arguments);\n                }\n            }\n        };\n    }\n    ChessAIWorker.prototype.emit = function (event, data) {\n        this.worker.postMessage(event);\n    };\n    ChessAIWorker.prototype.on = function (type, callback) {\n        if (!this.listeners[type]) {\n            this.listeners[type] = [];\n        }\n        this.listeners[type].push(callback);\n    };\n    ChessAIWorker.prototype.exec = function (method) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        this.worker.postMessage({\n            method: method,\n            arguments: Array.prototype.slice.call(arguments).slice(1)\n        });\n    };\n    ChessAIWorker.prototype.destroy = function () {\n        this.worker.terminate();\n    };\n    return ChessAIWorker;\n}());\nexports.ChessAIWorker = ChessAIWorker;\n;\n\n//# sourceMappingURL=ChessAIWorker.js.map\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./ChessAI\"));\n__export(require(\"./ChessAIWorker\"));\n\n//# sourceMappingURL=index.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Square_1 = require(\"./Square\");\nvar Piece_1 = require(\"./Piece\");\n// Pieces\nvar Pawn_1 = require(\"./Pieces/Pawn\");\nvar Bishop_1 = require(\"./Pieces/Bishop\");\nvar Knight_1 = require(\"./Pieces/Knight\");\nvar Rook_1 = require(\"./Pieces/Rook\");\nvar Queen_1 = require(\"./Pieces/Queen\");\nvar King_1 = require(\"./Pieces/King\");\n// Third Party\nvar Utils_1 = require(\"./Utils\");\nvar Chessboard = /** @class */ (function () {\n    function Chessboard(sizeX, sizeY) {\n        if (sizeX === void 0) { sizeX = 8; }\n        if (sizeY === void 0) { sizeY = 8; }\n        this.boardSize = {\n            x: 8,\n            y: 8,\n        };\n        this.history = [];\n        this.squares = new Array();\n        this.onPromote = new Utils_1.ChessEventEmitter();\n        this.boardSize.x = sizeX;\n        this.boardSize.y = sizeY;\n        this.reset();\n    }\n    Chessboard.fromPosition = function (position) {\n        var sizeY = position.length;\n        var sizeX = position[0].length;\n        var board = new Chessboard(sizeX, sizeY);\n        board.loadPositions(position);\n        return board;\n    };\n    Chessboard.prototype.clone = function () {\n        return Chessboard.fromPosition(this.savePositions());\n    };\n    Chessboard.prototype.reset = function () {\n        this.squares = new Array();\n        for (var y = 0; y < this.boardSize.y; ++y) {\n            this.squares[y] = new Array();\n            for (var x = 0; x < this.boardSize.x; ++x) {\n                this.squares[y][x] = new Square_1.Square(this, x, y);\n            }\n        }\n        this.history = [];\n    };\n    Chessboard.prototype.forEach = function (callback) {\n        for (var y = 0; y < this.boardSize.y; ++y) {\n            for (var x = 0; x < this.boardSize.x; ++x) {\n                callback(this.squares[y][x], x, y);\n            }\n        }\n    };\n    Chessboard.prototype.forEachPiece = function (callback) {\n        this.forEach(function (square, x, y) {\n            if (square.piece) {\n                callback(square.piece, x, y, square);\n            }\n        });\n    };\n    Chessboard.prototype.findPieces = function (pieceType, color) {\n        if (pieceType === void 0) { pieceType = null; }\n        if (color === void 0) { color = null; }\n        var pieces = [];\n        this.forEachPiece(function (piece) {\n            if (pieceType && piece.type != pieceType)\n                return;\n            if (color && piece.color != color)\n                return;\n            pieces.push(piece);\n        });\n        return pieces;\n    };\n    Chessboard.prototype.map = function (callback) {\n        var newSquares = new Array();\n        for (var y = 0; y < this.boardSize.y; ++y) {\n            newSquares[y] = new Array();\n            for (var x = 0; x < this.boardSize.x; ++x) {\n                newSquares[y][x] = callback(this.squares[y][x], x, y);\n            }\n        }\n        return newSquares;\n    };\n    Chessboard.prototype.loadPositions = function (positions) {\n        this.reset();\n        if (positions.length > this.boardSize.y || positions[0].length > this.boardSize.x) {\n            return false;\n        }\n        for (var y = 0; y < positions.length; ++y) {\n            for (var x = 0; x < positions[y].length; ++x) {\n                var square = this.getSquare(x, y);\n                this.setSquare(square, positions[y][x][1], Piece_1.COLORS.getColor(positions[y][x][0]));\n            }\n        }\n        return true;\n    };\n    Chessboard.prototype.savePositions = function () {\n        var positions = [];\n        for (var y = 0; y < this.boardSize.y; ++y) {\n            positions[y] = [];\n            for (var x = 0; x < this.boardSize.x; ++x) {\n                if (this.squares[y][x].piece) {\n                    positions[y][x] = Piece_1.COLORS.getName(this.squares[y][x].piece.color) + this.squares[y][x].piece.type;\n                }\n                else {\n                    positions[y][x] = \"\";\n                }\n            }\n        }\n        return positions;\n    };\n    Chessboard.prototype.setBoard = function (board) {\n        this.reset();\n        var keys = Object.keys(board);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var key = keys_1[_i];\n            var square = this.FENToSquare(key);\n            if (!square)\n                return;\n            var color = board[key][0];\n            var piece = board[key][1];\n            this.setSquare(square, piece, Piece_1.COLORS.getColor(color));\n        }\n    };\n    Chessboard.prototype.getBoard = function () {\n        var _this = this;\n        var positions = {};\n        this.forEach(function (square) {\n            if (square.piece) {\n                positions[_this.SquareToFEN(square)] = square.piece.getSymbol();\n            }\n        });\n        return positions;\n    };\n    Chessboard.prototype.getSquare = function (x, y) {\n        if (x >= (this.boardSize.x) || x < 0 || y >= (this.boardSize.y) || y < 0)\n            return null;\n        return this.squares[y][x];\n    };\n    Chessboard.prototype.setSquare = function (square, type, color) {\n        if (!square)\n            return null;\n        if (!type)\n            return this.clearSquare(square);\n        if (!Chessboard.PIECES[type])\n            return null;\n        return this.createPiece(type, color, square);\n    };\n    Chessboard.prototype.createPiece = function (type, color, square) {\n        var newPiece = new Chessboard.PIECES[type](this, square);\n        newPiece.setColor(color);\n        newPiece.initialize();\n        return newPiece;\n    };\n    Chessboard.prototype.setPiece = function (square, piece) {\n        if (!square)\n            return false;\n        // Remove the old piece from the square\n        if (square.piece) {\n            square.piece.square = null;\n        }\n        // Set the new piece\n        square.piece = piece;\n        if (piece) {\n            piece.square = square;\n        }\n        return true;\n    };\n    Chessboard.prototype.clearSquare = function (square) {\n        if (square.piece) {\n            square.piece.setSquare(null);\n            square.setPiece(null);\n        }\n    };\n    Chessboard.prototype.isValidMoveFEN = function (from, to) {\n        var fromSquare = this.FENToSquare(from);\n        var toSquare = this.FENToSquare(to);\n        return this.isValidMove(fromSquare, toSquare);\n    };\n    Chessboard.prototype.isValidMove = function (from, to) {\n        if (!from || !to)\n            return false;\n        if (!from.piece)\n            return false;\n        return !!this.getAllowedMovesOf(from.piece).find(function (move) {\n            if (from == move.from && to == move.to)\n                return true;\n            return false;\n        });\n    };\n    Chessboard.prototype.doMove = function (move) {\n        this.move(move.from, move.to);\n    };\n    Chessboard.prototype.doMoveFEN = function (move) {\n        this.tryMoveFEN(move.from, move.to);\n    };\n    Chessboard.prototype.move = function (from, to, simulatedMove) {\n        if (simulatedMove === void 0) { simulatedMove = false; }\n        if (!from || !to)\n            return false;\n        if (!from.piece)\n            return false;\n        var movingPiece = from.piece;\n        // Add the move to the history\n        this.history.push([]);\n        // this.forEachPiece( piece => {\n        // \tpiece.BeforePieceMoved(movingPiece, to);\n        // });\n        var result = movingPiece.move(to);\n        // this.forEachPiece( piece => {\n        // \tpiece.AfterPieceMoved(movingPiece, to);\n        // });\n        return result;\n    };\n    Chessboard.prototype.addHistory = function (piece, data) {\n        var history = {\n            piece: piece,\n            data: data,\n        };\n        this.history[this.history.length - 1].push(history);\n    };\n    // pushHistory(piece, data)\n    // {\n    // \tvar historyEvent = {\n    // \t\tpiece: piece,\n    // \t\ttype: type,\n    // \t\tdata: data,\n    // \t};\n    // \tthis.history[this.history.length - 1].push(historyEvent);\n    // }\n    // popHistory()\n    // {\n    // \tvar history = this.history.pop()\n    // \thistory.piece.undo(history.data);\n    // \treturn history;\n    // }\n    // newHistory()\n    // {\n    // \tthis.history.push([]);\n    // }\n    // Undo the last actions.\n    Chessboard.prototype.undo = function () {\n        var history = this.history.pop();\n        if (!history) {\n            return null;\n        }\n        var historySize = history.length;\n        for (var i = 0; i < historySize; ++i) {\n            var event = history.pop();\n            event.piece.undo(event.data);\n        }\n        return history;\n    };\n    Chessboard.prototype.moveFEN = function (from, to, simulatedMove) {\n        if (simulatedMove === void 0) { simulatedMove = false; }\n        var fromSquare = this.FENToSquare(from);\n        var toSquare = this.FENToSquare(to);\n        return this.move(fromSquare, toSquare, simulatedMove);\n    };\n    Chessboard.prototype.tryMove = function (from, to, simulatedMove) {\n        if (simulatedMove === void 0) { simulatedMove = false; }\n        if (!this.isValidMove(from, to))\n            return false;\n        return this.move(from, to, simulatedMove);\n    };\n    Chessboard.prototype.tryMoveFEN = function (from, to, simulatedMove) {\n        if (simulatedMove === void 0) { simulatedMove = false; }\n        var fromSquare = this.FENToSquare(from);\n        var toSquare = this.FENToSquare(to);\n        if (!this.isValidMove(fromSquare, toSquare)) {\n            return false;\n        }\n        return this.move(fromSquare, toSquare, simulatedMove);\n    };\n    Chessboard.prototype.getAllowedMovesOf = function (piece) {\n        return piece.getAllowedMoves().map(function (toSquare) {\n            return {\n                from: piece.square,\n                to: toSquare,\n            };\n        });\n    };\n    Chessboard.prototype.getMovesOf = function (piece) {\n        return piece.getLegalMoves().map(function (toSquare) {\n            return {\n                from: piece.square,\n                to: toSquare,\n            };\n        });\n    };\n    Chessboard.prototype.getMovesAtFEN = function (fen) {\n        var square = this.FENToSquare(fen);\n        if (square && square.piece) {\n            return this.getAllowedMovesOf(square.piece);\n        }\n        return [];\n    };\n    Chessboard.prototype.getFENMovesatFEN = function (fen) {\n        var _this = this;\n        return this.getMovesAtFEN(fen).map(function (move) {\n            move.from = _this.PositionToFEN(move.from.x, move.from.y);\n            move.to = _this.PositionToFEN(move.to.x, move.to.y);\n            return move;\n        });\n    };\n    Chessboard.prototype.getMoves = function (color) {\n        var _this = this;\n        if (color === void 0) { color = null; }\n        var moves = [];\n        this.forEachPiece(function (piece) {\n            if (color !== null && color != piece.color) {\n                //console.log(\"not same color?\");\n                return;\n            }\n            moves.push.apply(moves, _this.getAllowedMovesOf(piece));\n        });\n        return moves;\n    };\n    Chessboard.prototype.getMovesFEN = function (color) {\n        var _this = this;\n        if (color === void 0) { color = null; }\n        return this.getMoves(color).map(function (move) {\n            move.from = _this.PositionToFEN(move.from.x, move.from.y);\n            move.to = _this.PositionToFEN(move.to.x, move.to.y);\n            return move;\n        });\n    };\n    Chessboard.prototype.PositionToFEN = function (x, y) {\n        return this.charIndex(x) + (this.boardSize.y - y);\n    };\n    Chessboard.prototype.FENtoPosition = function (fen) {\n        return {\n            x: this.indexOfChar(fen[0]),\n            y: (this.boardSize.y - fen[1])\n        };\n    };\n    Chessboard.prototype.FENToSquare = function (fen) {\n        var position = this.FENtoPosition(fen);\n        return this.getSquare(position.x, position.y);\n    };\n    Chessboard.prototype.SquareToFEN = function (square) {\n        var position = square.getPosition();\n        return this.PositionToFEN(position.x, position.y);\n    };\n    Chessboard.prototype.charIndex = function (index) {\n        return Chessboard.SIDE[index];\n    };\n    Chessboard.prototype.indexOfChar = function (char) {\n        return Chessboard.SIDE.indexOf(char);\n    };\n    Chessboard.prototype.clearDebug = function () {\n        this.forEach(function (square) {\n            square.debug = false;\n        });\n    };\n    Chessboard.prototype.debugSquare = function (square, debugColor) {\n        square.debug = debugColor;\n    };\n    Chessboard.prototype.debugFEN = function (fen, debugColor) {\n        var square = this.FENToSquare(fen);\n        if (square) {\n            square.debug = debugColor;\n        }\n    };\n    Chessboard.prototype.debugMoves = function (fen, debugColor) {\n        var square = this.FENToSquare(fen);\n        if (square && square.piece) {\n            var piece = square.getPiece();\n            var moves = piece.getLegalMoves();\n            moves.forEach(function (square) {\n                square.debug = debugColor;\n            });\n            return true;\n        }\n        return false;\n    };\n    Chessboard.SIDE = \"abcdefghijklmnopqrstuvwxyz\";\n    Chessboard.RANKS = [\"Pawn\", \"Knight\", \"Bishop\", \"Rook\", \"Queen\", \"King\"];\n    Chessboard.PIECES = {\n        P: Pawn_1.PawnPiece,\n        B: Bishop_1.BishopPiece,\n        N: Knight_1.KnightPiece,\n        R: Rook_1.RookPiece,\n        Q: Queen_1.QueenPiece,\n        K: King_1.KingPiece,\n    };\n    return Chessboard;\n}());\nexports.Chessboard = Chessboard;\n;\n\n//# sourceMappingURL=Chessboard.js.map\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Utils_1 = require(\"./Utils\");\nvar ChessMoveEvent = /** @class */ (function (_super) {\n    __extends(ChessMoveEvent, _super);\n    function ChessMoveEvent(from, to) {\n        var _this = _super.call(this) || this;\n        _this.from = null;\n        _this.to = null;\n        _this.from = from;\n        _this.to = to;\n        return _this;\n    }\n    return ChessMoveEvent;\n}(Utils_1.ChessEvent));\nexports.ChessMoveEvent = ChessMoveEvent;\n;\nvar ChessPromoteEvent = /** @class */ (function (_super) {\n    __extends(ChessPromoteEvent, _super);\n    function ChessPromoteEvent(square, piece, fen) {\n        var _this = _super.call(this) || this;\n        _this.fen = null;\n        _this.piece = null;\n        _this.square = null;\n        _this.fen = fen;\n        _this.piece = piece;\n        _this.square = square;\n        return _this;\n    }\n    return ChessPromoteEvent;\n}(Utils_1.ChessEvent));\nexports.ChessPromoteEvent = ChessPromoteEvent;\n;\n\n//# sourceMappingURL=Events.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Define Movement Vectors\nvar MovementVectors = /** @class */ (function () {\n    function MovementVectors() {\n    }\n    MovementVectors.Diagonal = [[1, 1], [1, -1], [-1, -1], [-1, 1]];\n    MovementVectors.Lateral = [[0, 1], [0, -1], [1, 0], [-1, 0]];\n    MovementVectors.Omni = MovementVectors.Diagonal.concat(MovementVectors.Lateral);\n    return MovementVectors;\n}());\nexports.MovementVectors = MovementVectors;\n;\nvar COLORS = /** @class */ (function () {\n    function COLORS() {\n    }\n    COLORS.getColor = function (color) {\n        return COLORMAP[color];\n    };\n    COLORS.getName = function (color) {\n        var keys = Object.keys(COLORMAP);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var key = keys_1[_i];\n            if (COLORMAP[key] == color)\n                return key;\n        }\n        return \"\";\n    };\n    COLORS.BLACK = 0;\n    COLORS.WHITE = 1;\n    COLORS.GREEN = 2;\n    COLORS.ORANGE = 3;\n    return COLORS;\n}());\nexports.COLORS = COLORS;\n;\nvar COLORMAP = {\n    w: COLORS.WHITE,\n    b: COLORS.BLACK,\n    g: COLORS.GREEN,\n    o: COLORS.ORANGE\n};\n// Simploe Piece inmplementation\nvar Piece = /** @class */ (function () {\n    function Piece(board, square) {\n        // Board & Square \n        this.board = null;\n        this.square = null;\n        // Piece description\n        this.name = \"Piece\";\n        this.color = null;\n        this.type = null;\n        // Movement information\n        this.moves = 0;\n        this.index = null;\n        this.pieceTimer = null;\n        this.moveDelay = 5000;\n        this.lastMoved = 0;\n        this.board = board;\n        this.setSquare(square);\n    }\n    Piece.prototype.initialize = function () {\n        // Not implemented\n    };\n    Piece.prototype.setSquare = function (square) {\n        if (this.square) {\n            this.square.piece = null;\n        }\n        if (square) {\n            square.piece = this;\n        }\n        this.square = square;\n    };\n    Piece.prototype.setColor = function (color) {\n        this.color = color;\n    };\n    Piece.prototype.getColor = function () {\n        return this.color;\n    };\n    // Moves piece to a new square\n    Piece.prototype.move = function (square) {\n        if (!square)\n            return false;\n        // If square has piece capture it.\n        this.capture(square);\n        this.addHistory({\n            move: {\n                from: this.square,\n                to: square,\n            },\n            lastMoved: this.lastMoved\n        });\n        // Change positions\n        this.moves++;\n        // Clear previous square\n        this.square.setPiece(null);\n        // set new position\n        this.setSquare(square);\n        this.lastMoved = Date.now();\n        return true;\n    };\n    Piece.prototype.undo = function (event) {\n        if (event.move) {\n            this.square.setPiece(null);\n            this.setSquare(event.move.from);\n            this.lastMoved = event.lastMoved;\n            this.moves--;\n        }\n        if (event.captured) {\n            event.square.setPiece(event.captured);\n        }\n    };\n    Piece.prototype.capture = function (square) {\n        if (!square)\n            return;\n        if (square.piece) {\n            // Add capture to the history\n            this.addHistory({\n                captured: square.piece,\n                square: square,\n            });\n        }\n        square.setPiece(null);\n    };\n    Piece.prototype.getAllowedMoves = function () {\n        if (this.lastMoved > Date.now() - this.moveDelay)\n            return [];\n        return this.getLegalMoves();\n    };\n    Piece.prototype.getLegalMoves = function () {\n        var _this = this;\n        return this.getMoves().filter(function (square) {\n            if (square.piece && square.piece.color == _this.color)\n                return false;\n            return true;\n        });\n    };\n    Piece.prototype.getMoves = function () {\n        throw new Error(\"Not implemented\");\n    };\n    Piece.prototype.getMovesByVectors = function (vectors, limit) {\n        if (limit === void 0) { limit = undefined; }\n        var moves = [], steps, vector, square;\n        for (var i = 0, l = vectors.length; i < l; i++) {\n            steps = 0;\n            vector = vectors[i];\n            square = this.square;\n            // Add all squares in path\n            while (square = square.getSibling(vector[0], vector[1])) {\n                if (square.getPiece()) {\n                    // Square is occupied by opponent\n                    if (square.getPiece().color != this.color) {\n                        // Occupied by other player - piece can be captured\n                        moves.push(square);\n                    }\n                    break;\n                }\n                moves.push(square);\n                steps++;\n                // Check if steps limit exceeded\n                if (limit && steps >= limit)\n                    break;\n            }\n        }\n        return moves;\n    };\n    Piece.prototype.getSymbol = function () {\n        return COLORS.getName(this.color) + this.type;\n    };\n    Piece.prototype.BeforePieceMoved = function (piece, square) {\n        // Not implemented\n    };\n    Piece.prototype.AfterPieceMoved = function (piece, square) {\n        // Not implemented\n    };\n    Piece.prototype.addHistory = function (data) {\n        this.board.addHistory(this, data);\n    };\n    return Piece;\n}());\nexports.Piece = Piece;\n;\n\n//# sourceMappingURL=Piece.js.map\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Piece_1 = require(\"../Piece\");\nvar BishopPiece = /** @class */ (function (_super) {\n    __extends(BishopPiece, _super);\n    function BishopPiece() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.name = \"Bishop\";\n        _this.type = \"B\";\n        return _this;\n    }\n    BishopPiece.prototype.getMoves = function () {\n        return this.getMovesByVectors(Piece_1.MovementVectors.Diagonal);\n    };\n    return BishopPiece;\n}(Piece_1.Piece));\nexports.BishopPiece = BishopPiece;\n;\n\n//# sourceMappingURL=Bishop.js.map\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Piece_1 = require(\"../Piece\");\nvar KingPiece = /** @class */ (function (_super) {\n    __extends(KingPiece, _super);\n    function KingPiece() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.name = \"King\";\n        _this.type = \"K\";\n        return _this;\n        // setCastling(from, to, castledFrom, castledTo)\n        // {\n        // \tthis.castling = {\n        // \t\tcastlingfrom: from,\n        // \t\tcastlingTo: to,\n        // \t\tcastledPiece: this,\n        // \t\tcastledFrom: castledFrom,\n        // \t\tcastledTo: castledTo,\n        // \t};\n        // }\n    }\n    KingPiece.prototype.move = function (square) {\n        if (Math.abs(square.getPosition().x - this.square.getPosition().x) > 1) {\n            // Castle Left rook\n            if (square.getPosition().x - this.square.getPosition().x < 0) {\n                return this.castle(-4, -1, -2);\n            }\n            // Castle Right rook\n            if (square.getPosition().x - this.square.getPosition().x > 0) {\n                return this.castle(3, 1, 2);\n            }\n        }\n        if (!_super.prototype.move.call(this, square))\n            return false;\n        return true;\n    };\n    KingPiece.prototype.getMoves = function () {\n        return this.getCastlingMoves([[-1, 0, 4], [1, 0, 3]], 2, 'R');\n    };\n    KingPiece.prototype.getCastlingMoves = function (vectors, distance, castlingPieceType) {\n        var moves = this.getMovesByVectors(Piece_1.MovementVectors.Omni, 1);\n        if (this.moves > 0)\n            return moves;\n        var steps, vector, square;\n        for (var i = 0, l = vectors.length; i < l; i++) {\n            steps = 0;\n            vector = vectors[i];\n            square = this.square;\n            // Check if the castling piece is available\n            var castlingTarget = this.square.getSibling(vector[0] * vector[2], vector[1] * vector[2]);\n            if (castlingTarget && castlingTarget.piece && castlingTarget.piece.type == castlingPieceType && castlingTarget.piece.color == this.color && castlingTarget.piece.moves == 0) {\n                // Add all squares in path\n                while (square = square.getSibling(vector[0], vector[1])) {\n                    // Square is occupied\n                    if (square.getPiece()) {\n                        break;\n                    }\n                    moves.push(square);\n                    steps++;\n                    // Check if steps limit exceeded\n                    if (distance && steps >= distance)\n                        break;\n                }\n            }\n        }\n        return moves;\n    };\n    KingPiece.prototype.castle = function (rookPosition, kingPosition, castlePosition) {\n        var rookSquare = this.square.getSibling(rookPosition, 0);\n        var kingSquare = this.square.getSibling(kingPosition, 0);\n        var castlingSquare = this.square.getSibling(castlePosition, 0);\n        // this.addHistory({\n        // \tcastling: {\n        // \t\trookSquare: rookSquare,\n        // \t\tkingSquare: kingSquare,\n        // \t\tcastlingSquare: castlingSquare,\n        // \t},\n        // \tcastling: this.canCastle,\n        // });\n        //this.setCastling(rookSquare, kingSquare, current, castlingSquare);\n        rookSquare.piece.move(kingSquare);\n        return _super.prototype.move.call(this, castlingSquare);\n    };\n    return KingPiece;\n}(Piece_1.Piece));\nexports.KingPiece = KingPiece;\n;\n\n//# sourceMappingURL=King.js.map\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Piece_1 = require(\"../Piece\");\nvar KnightPiece = /** @class */ (function (_super) {\n    __extends(KnightPiece, _super);\n    function KnightPiece() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.name = \"Knight\";\n        _this.type = \"N\";\n        return _this;\n    }\n    KnightPiece.prototype.getMoves = function () {\n        return this.getMovesByVectors(KnightPiece.MovementVectors, 1);\n    };\n    KnightPiece.MovementVectors = [[1, 2], [1, -2], [-1, 2], [-1, -2], [2, 1], [2, -1], [-2, 1], [-2, -1]];\n    return KnightPiece;\n}(Piece_1.Piece));\nexports.KnightPiece = KnightPiece;\n;\n\n//# sourceMappingURL=Knight.js.map\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Piece_1 = require(\"../Piece\");\nvar Events_1 = require(\"../Events\");\nvar PawnPiece = /** @class */ (function (_super) {\n    __extends(PawnPiece, _super);\n    function PawnPiece() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.name = \"Pawn\";\n        _this.type = \"P\";\n        _this.enpassant = false;\n        return _this;\n    }\n    PawnPiece.prototype.move = function (square) {\n        var current = this.square;\n        // Set enpassant flag if it was a big move\n        if (Math.abs(current.getPosition().y - square.getPosition().y) > 1) {\n            this.enpassant = true;\n        }\n        else {\n            this.enpassant = false;\n        }\n        if (!_super.prototype.move.call(this, square))\n            return false;\n        // Check if the move was enpassant capture\n        var back = this.square.getSibling(0, (this.color == Piece_1.COLORS.WHITE ? 1 : -1));\n        if (back && back.piece && back.piece.color != this.color && back.piece.enpassant) {\n            this.capture(back);\n        }\n        // Queening\n        var forwardSquare = this.square.getSibling(0, (this.color == Piece_1.COLORS.WHITE ? -1 : 1));\n        if (!forwardSquare) {\n            var newPiece = this.board.createPiece(\"Q\", this.color);\n            newPiece.setSquare(this.square);\n            this.board.onPromote.emit(new Events_1.ChessPromoteEvent(this.square, newPiece, this.board.SquareToFEN(this.square)));\n        }\n        return true;\n    };\n    PawnPiece.prototype.onMoved = function (square) {\n        this.board.addToHistory(\"move\", {\n            lastMoved: this.lastMoved,\n            moves: this.moves,\n            enpassant: this.enpassant,\n            piece: this,\n            from: this.square,\n            to: square\n        });\n    };\n    PawnPiece.prototype.undoMove = function (move) {\n        this.enpassant = move.enpassant;\n        this.lastMoved = move.lastMoved;\n        this.moves = move.moves;\n        this.setSquare(move.from);\n    };\n    PawnPiece.prototype.AfterPieceMoved = function (piece, square) {\n        // If any piece is moved no enpassant moves are allowed\n        // if(piece.color != this.color)\n        // {\n        // \tthis.enpassant = false;\n        // }\n    };\n    PawnPiece.prototype.getMoves = function () {\n        var moves = [];\n        var direction = (this.color == Piece_1.COLORS.WHITE ? -1 : 1);\n        // 1 Forward\n        var square1 = this.square.getSibling(0, direction);\n        if (square1 && !square1.piece) {\n            moves.push(square1);\n        }\n        // 2 Forward (if didn't move yet)\n        var square2 = this.square.getSibling(0, direction * 2);\n        if (square2 && !square2.piece && this.moves == 0 && !square1.piece) {\n            moves.push(square2);\n        }\n        // Capture 1\n        var capture1 = this.square.getSibling(1, direction);\n        if (capture1 && capture1.piece && capture1.piece.color != this.color) {\n            moves.push(capture1);\n        }\n        // Capture 2\n        var capture2 = this.square.getSibling(-1, direction);\n        if (capture2 && capture2.piece && capture2.piece.color != this.color) {\n            moves.push(capture2);\n        }\n        // En passant capture 1\n        var enpassant1 = this.square.getSibling(1, 0);\n        if (enpassant1 && enpassant1.piece && enpassant1.piece.color != this.color && enpassant1.piece.moves == 1 && enpassant1.piece.enpassant) {\n            moves.push(this.square.getSibling(1, direction));\n        }\n        /// En passant capture 2\n        var enpassant2 = this.square.getSibling(-1, 0);\n        if (enpassant2 && enpassant2.piece && enpassant2.piece.color != this.color && enpassant2.piece.moves == 1 && enpassant2.piece.enpassant) {\n            moves.push(this.square.getSibling(-1, direction));\n        }\n        return moves;\n    };\n    return PawnPiece;\n}(Piece_1.Piece));\nexports.PawnPiece = PawnPiece;\n;\n\n//# sourceMappingURL=Pawn.js.map\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Piece_1 = require(\"../Piece\");\nvar QueenPiece = /** @class */ (function (_super) {\n    __extends(QueenPiece, _super);\n    function QueenPiece() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.name = \"Queen\";\n        _this.type = \"Q\";\n        return _this;\n    }\n    QueenPiece.prototype.getMoves = function () {\n        return this.getMovesByVectors(Piece_1.MovementVectors.Omni);\n    };\n    return QueenPiece;\n}(Piece_1.Piece));\nexports.QueenPiece = QueenPiece;\n;\n\n//# sourceMappingURL=Queen.js.map\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Piece_1 = require(\"../Piece\");\nvar RookPiece = /** @class */ (function (_super) {\n    __extends(RookPiece, _super);\n    function RookPiece() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.name = \"Rook\";\n        _this.type = \"R\";\n        return _this;\n    }\n    RookPiece.prototype.getMoves = function () {\n        return this.getMovesByVectors(Piece_1.MovementVectors.Lateral);\n    };\n    return RookPiece;\n}(Piece_1.Piece));\nexports.RookPiece = RookPiece;\n;\n\n//# sourceMappingURL=Rook.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Positions = /** @class */ (function () {\n    function Positions() {\n    }\n    Positions.default = [\n        [\"bR\", \"bN\", \"bB\", \"bQ\", \"bK\", \"bB\", \"bN\", \"bR\"],\n        [\"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\"],\n        [\"wR\", \"wN\", \"wB\", \"wQ\", \"wK\", \"wB\", \"wN\", \"wR\"],\n    ];\n    Positions.castling = [\n        [\"bR\", \"\", \"\", \"\", \"bK\", \"\", \"\", \"bR\"],\n        [\"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\"],\n        [\"wR\", \"\", \"\", \"\", \"wK\", \"\", \"\", \"wR\"],\n    ];\n    Positions.singlePawn = [\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"wP\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n    ];\n    Positions.pawnSacrafice = [\n        [\"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\"],\n        [\"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\", \"bP\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\"],\n        [\"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\", \"wP\"],\n    ];\n    Positions.singleQueen = [\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"wQ\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n    ];\n    Positions.queenSacrafice = [\n        [\"bQ\", \"bQ\", \"bQ\", \"bQ\", \"bQ\", \"bQ\", \"bQ\", \"bQ\"],\n        [\"bQ\", \"bQ\", \"bQ\", \"bQ\", \"bQ\", \"bQ\", \"bQ\", \"bQ\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"wQ\", \"wQ\", \"wQ\", \"wQ\", \"wQ\", \"wQ\", \"wQ\", \"wQ\"],\n        [\"wQ\", \"wQ\", \"wQ\", \"wQ\", \"wQ\", \"wQ\", \"wQ\", \"wQ\"],\n    ];\n    Positions.singleBishop = [\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"bP\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"bP\", \"wB\", \"bP\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"bP\", \"\", \"\", \"\", \"\"],\n        [\"\", \"bP\", \"\", \"bP\", \"\", \"bP\", \"\", \"bP\"],\n        [\"bP\", \"\", \"bP\", \"\", \"bP\", \"\", \"bP\", \"\"],\n        [\"\", \"bP\", \"\", \"bP\", \"\", \"bP\", \"\", \"bP\"],\n    ];\n    Positions.singleRook = [\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"wR\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n    ];\n    Positions.singleKing = [\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"wK\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n    ];\n    Positions.singleKnight = [\n        [\"\", \"\", \"bP\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"bP\", \"\", \"bP\", \"\", \"\", \"\", \"\"],\n        [\"\", \"bP\", \"bP\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"wN\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n    ];\n    return Positions;\n}());\nexports.Positions = Positions;\n;\n\n//# sourceMappingURL=Positions.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Square = /** @class */ (function () {\n    function Square(board, x, y) {\n        this.piece = null;\n        this.board = null;\n        this.x = -1;\n        this.y = -1;\n        this.board = board;\n        this.x = x;\n        this.y = y;\n    }\n    Square.prototype.setPiece = function (piece) {\n        this.piece = piece;\n    };\n    Square.prototype.getPiece = function () {\n        return this.piece;\n    };\n    Square.prototype.getSibling = function (offsetX, offsetY) {\n        return this.board.getSquare(this.x + offsetX, this.y + offsetY);\n    };\n    Square.prototype.getColor = function () {\n        var xor = function (a, b) { return !a != !b; };\n        return xor(this.x % 2, this.y % 2) ? 'w' : 'b';\n    };\n    Square.prototype.getPosition = function () {\n        return {\n            x: this.x,\n            y: this.y\n        };\n    };\n    Square.prototype.getFENPosition = function () {\n        return this.board.PositionToFEN(this.x, this.y);\n    };\n    return Square;\n}());\nexports.Square = Square;\n\n//# sourceMappingURL=Square.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ChessEvent = /** @class */ (function () {\n    function ChessEvent() {\n        this.messageObject = null;\n        this._defaultPervented = false;\n        this._shouldPropagate = true;\n    }\n    ChessEvent.prototype.preventDefault = function () {\n        this._defaultPervented = true;\n    };\n    ChessEvent.prototype.isPrevented = function () {\n        return this._defaultPervented;\n    };\n    ChessEvent.prototype.trigger = function () {\n        if (this.messageObject) {\n            this.messageObject();\n        }\n    };\n    ChessEvent.prototype.stopPropagation = function () {\n        this._shouldPropagate = false;\n    };\n    ChessEvent.prototype.shouldPropagate = function () {\n        return this._shouldPropagate;\n    };\n    return ChessEvent;\n}());\nexports.ChessEvent = ChessEvent;\n;\nvar ChessEventEmitter = /** @class */ (function () {\n    function ChessEventEmitter() {\n        this.listeners = [];\n    }\n    ChessEventEmitter.prototype.emit = function (event, messageObject) {\n        if (messageObject === void 0) { messageObject = null; }\n        event.messageObject = messageObject;\n        this.listeners.forEach(function (callback) {\n            if (event.shouldPropagate()) {\n                callback(event);\n            }\n        });\n    };\n    ChessEventEmitter.prototype.broadcast = function (messsage) {\n        this.listeners.forEach(function (callback) {\n            callback(event);\n        });\n    };\n    ChessEventEmitter.prototype.on = function (callback) {\n        this.listeners.push(callback);\n    };\n    ChessEventEmitter.prototype.off = function (callback) {\n        this.listeners.splice(this.listeners.indexOf(callback), 1);\n    };\n    return ChessEventEmitter;\n}());\nexports.ChessEventEmitter = ChessEventEmitter;\n;\n\n//# sourceMappingURL=Utils.js.map\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./Chessboard\"));\n__export(require(\"./Square\"));\n__export(require(\"./Piece\"));\n__export(require(\"./Positions\"));\n__export(require(\"./Events\"));\n\n//# sourceMappingURL=index.js.map\n","exports.Chess = {\r\n\tChess: require(\"./build/Chess/index.js\"),\r\n\tChessAI: require(\"./build/ChessAI/index.js\"),\r\n};","export class AIWorker\r\n{\r\n\tconstructor()\r\n\t{\r\n\t\tself.onmessage = (input) => {\r\n\t\t\tvar evt = input.data;\r\n\t\t\tif(evt.method)\r\n\t\t\t{\r\n\t\t\t\tthis[evt.method].apply(this, evt.arguments);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\temit(event, ... args:any[] )\r\n\t{\r\n\t\tconsole.log({\r\n\t\t\tevent: event,\r\n\t\t\targuments: args\r\n\t\t});\r\n\t\tself.postMessage({\r\n\t\t\tevent: event,\r\n\t\t\targuments: args\r\n\t\t}, undefined);\r\n\r\n\t\t\r\n\t}\r\n};","import { Chessboard, Positions, COLORS } from \"@chesslib/core\";\r\nimport { ChessAI } from \"../ChessAI\";\r\nimport { AIWorker } from \"./Utils/AIWorker\";\r\n\r\nexport class ChessAIWorker extends AIWorker\r\n{\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\t\tconsole.log(\"ChessAIWorker running.\");\r\n\t}\r\n\r\n\tgetBestMoves(boardData, color, searchDepth, moveCount)\r\n\t{\r\n\t\tvar board = new Chessboard();\r\n\t\tboard.setBoard(boardData);\r\n\t\tvar ai = new ChessAI(board, color, 2);\r\n\t\tvar moves = ai.getBestMoves(searchDepth, moveCount);\r\n\t\tthis.emit(\"moves\", moves);\r\n\t\t\r\n\t}\r\n};\r\n\r\n// Launch AI Worker\r\nvar aiWorker = new ChessAIWorker();","\r\nfunction reverseArray(array)\r\n{\r\n    return array.slice().reverse();\r\n};\r\n\r\nexport var boardEvalsWhite = {\r\n\tP: [\r\n\t\t[10.0,  10.0,  10.0,  10.0,  10.0,  10.0,  10.0,  10.0],\r\n\t\t[5.0,  5.0,  5.0,  5.0,  5.0,  5.0,  5.0,  5.0],\r\n\t\t[1.0,  1.0,  2.0,  3.0,  3.0,  2.0,  1.0,  1.0],\r\n\t\t[0.5,  0.5,  1.0,  2.5,  2.5,  1.0,  0.5,  0.5],\r\n\t\t[0.0,  0.0,  0.0,  2.0,  2.0,  0.0,  0.0,  0.0],\r\n\t\t[0.5, -0.5, -1.0,  0.0,  0.0, -1.0, -0.5,  0.5],\r\n\t\t[0.5,  1.0, 1.0,  -2.0, -2.0,  1.0,  1.0,  0.5],\r\n\t\t[0.0,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0]\r\n\t],\r\n\r\n\tN: [\r\n\t\t[-5.0, -4.0, -3.0, -3.0, -3.0, -3.0, -4.0, -5.0],\r\n\t\t[-4.0, -2.0,  0.0,  0.0,  0.0,  0.0, -2.0, -4.0],\r\n\t\t[-3.0,  0.0,  1.0,  1.5,  1.5,  1.0,  0.0, -3.0],\r\n\t\t[-3.0,  0.5,  1.5,  2.0,  2.0,  1.5,  0.5, -3.0],\r\n\t\t[-3.0,  0.0,  1.5,  2.0,  2.0,  1.5,  0.0, -3.0],\r\n\t\t[-3.0,  0.5,  1.0,  1.5,  1.5,  1.0,  0.5, -3.0],\r\n\t\t[-4.0, -2.0,  0.0,  0.5,  0.5,  0.0, -2.0, -4.0],\r\n\t\t[-5.0, -4.0, -3.0, -3.0, -3.0, -3.0, -4.0, -5.0]\r\n\t\t],\r\n\r\n\tB: [\r\n\t\t[ -2.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -2.0],\r\n\t\t[ -1.0,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0, -1.0],\r\n\t\t[ -1.0,  0.0,  0.5,  1.0,  1.0,  0.5,  0.0, -1.0],\r\n\t\t[ -1.0,  0.5,  0.5,  1.0,  1.0,  0.5,  0.5, -1.0],\r\n\t\t[ -1.0,  0.0,  1.0,  1.0,  1.0,  1.0,  0.0, -1.0],\r\n\t\t[ -1.0,  1.0,  1.0,  1.0,  1.0,  1.0,  1.0, -1.0],\r\n\t\t[ -1.0,  0.5,  0.0,  0.0,  0.0,  0.0,  0.5, -1.0],\r\n\t\t[ -2.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -2.0]\r\n\t],\r\n\r\n\r\n\tR: [\r\n\t\t[  0.0,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0],\r\n\t\t[  0.5,  1.0,  1.0,  1.0,  1.0,  1.0,  1.0,  0.5],\r\n\t\t[ -0.5,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0, -0.5],\r\n\t\t[ -0.5,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0, -0.5],\r\n\t\t[ -0.5,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0, -0.5],\r\n\t\t[ -0.5,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0, -0.5],\r\n\t\t[ -0.5,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0, -0.5],\r\n\t\t[  0.0,   0.0, 0.0,  0.5,  0.5,  0.0,  0.0,  0.0]\r\n\t],\r\n\r\n\r\n\tQ: [\r\n\t\t[ -2.0, -1.0, -1.0, -0.5, -0.5, -1.0, -1.0, -2.0],\r\n\t\t[ -1.0,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0, -1.0],\r\n\t\t[ -1.0,  0.0,  0.5,  0.5,  0.5,  0.5,  0.0, -1.0],\r\n\t\t[ -0.5,  0.0,  0.5,  0.5,  0.5,  0.5,  0.0, -0.5],\r\n\t\t[  0.0,  0.0,  0.5,  0.5,  0.5,  0.5,  0.0, -0.5],\r\n\t\t[ -1.0,  0.5,  0.5,  0.5,  0.5,  0.5,  0.0, -1.0],\r\n\t\t[ -1.0,  0.0,  0.5,  0.0,  0.0,  0.0,  0.0, -1.0],\r\n\t\t[ -2.0, -1.0, -1.0, -0.5, -0.5, -1.0, -1.0, -2.0]\r\n\t],\r\n\r\n\tK: [\r\n\r\n\t\t[ -3.0, -4.0, -4.0, -5.0, -5.0, -4.0, -4.0, -3.0],\r\n\t\t[ -3.0, -4.0, -4.0, -5.0, -5.0, -4.0, -4.0, -3.0],\r\n\t\t[ -3.0, -4.0, -4.0, -5.0, -5.0, -4.0, -4.0, -3.0],\r\n\t\t[ -3.0, -4.0, -4.0, -5.0, -5.0, -4.0, -4.0, -3.0],\r\n\t\t[ -2.0, -3.0, -3.0, -4.0, -4.0, -3.0, -3.0, -2.0],\r\n\t\t[ -1.0, -2.0, -2.0, -2.0, -2.0, -2.0, -2.0, -1.0],\r\n\t\t[  2.0,  2.0,  0.0,  0.0,  0.0,  0.0,  2.0,  2.0 ],\r\n\t\t[  2.0,  3.0,  1.0,  0.0,  0.0,  1.0,  3.0,  2.0 ]\r\n\t]\r\n};\r\n\r\nexport var boardEvalsBlack = {\r\n\tP: reverseArray(boardEvalsWhite.P),\r\n\tN: reverseArray(boardEvalsWhite.N),\r\n\tB: reverseArray(boardEvalsWhite.B),\r\n\tR: reverseArray(boardEvalsWhite.R),\r\n\tQ: reverseArray(boardEvalsWhite.Q),\r\n\tK: reverseArray(boardEvalsWhite.K),\r\n};\r\n\r\nexport var BoardEvaluations = [\r\n\tboardEvalsBlack,\r\n\tboardEvalsWhite,\r\n];","import { Chessboard, Positions, COLORS } from \"@chesslib/core\";\r\nimport { BoardEvaluations } from \"./BoardEvals\";\r\n\r\nconst PIECE_VALUES = {\r\n\tP: 10,\r\n\tB: 30,\r\n\tN: 30,\r\n\tR: 50,\r\n\tQ: 80,\r\n\tK: 900,\r\n};\r\n\r\nexport class ChessAI\r\n{\r\n\tchessboard:Chessboard = null;\r\n\r\n\tmoves = [];\r\n\tplayingSide = 0;\r\n\tplayerCount = 2;\r\n\tsearchTime = 0;\r\n\r\n\tconstructor(chessboard, playingSide, playerCount)\r\n\t{\r\n\t\tthis.chessboard = chessboard;\r\n\t\tthis.playingSide = playingSide;\r\n\t\tthis.playerCount = playerCount;\r\n\t}\r\n\r\n\tsetBoard(chessboard)\r\n\t{\r\n\t\tthis.chessboard = chessboard;\r\n\t}\r\n\r\n\tloadBoard(positions)\r\n\t{\r\n\t\tthis.chessboard = Chessboard.fromPosition(positions);\r\n\t}\r\n\r\n\tdoMove(move)\r\n\t{\r\n\t\tif(!this.chessboard.doMove(move))\r\n\t\t{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tdoMoveFEN(move)\r\n\t{\r\n\t\tif(!this.chessboard.doMoveFEN(move))\r\n\t\t{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tmakeMoves(searchDepth=4, amount = 1)\r\n\t{\r\n\t\tvar bestMoves = this.getBestMoves(searchDepth, amount);\r\n\t\tif(!bestMoves.length)\r\n\t\t{\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tfor(var bestMove of bestMoves)\r\n\t\t{\r\n\t\t\tthis.doMove(bestMove);\r\n\t\t}\r\n\t\treturn bestMoves;\r\n\t}\r\n\r\n\tgetBestMove(side, searchDepth)\r\n\t{\r\n\t\t\r\n\t\tvar bestMoves = this.getBestMoves(searchDepth);\r\n\r\n\t\tif(!bestMoves.length)\r\n\t\t{\r\n\t\t \treturn this.getRandomMove();\r\n\t\t}\r\n\t\t\r\n\t\t// var bestMove = null;\r\n\t\t// var bestValue = -9999;\r\n\t\t// if(move.score > bestValue)\r\n\t\t// {\r\n\t\t// \tbestMove = move;\r\n\t\t// \tbestValue = move.score;\r\n\t\t// }\r\n\t\t\r\n\t\treturn bestMoves[0];\r\n\t}\r\n\r\n\tgetBestMoves(searchDepth, limit=5)\r\n\t{\r\n\t\tthis.searchTime = Date.now() + 100;\r\n\t\tvar moves = this.chessboard.getMovesFEN(this.playingSide);\r\n\t\t\r\n\t\tfor(let move of moves)\r\n\t\t{\r\n\t\t\tthis.chessboard.moveFEN(move.from, move.to);\r\n\t\t\t\r\n\t\t\t// Do not allow the king to be killed?\r\n\t\t\tmove.score = this.evaluateBestMove(this.playingSide, searchDepth - 1, -10000, 10000, false);\r\n\t\t\tthis.chessboard.undo();\r\n\r\n\t\t}\r\n\r\n\t\treturn moves.sort( (a, b) => {\r\n\t\t\tif(a.score < b.score)\r\n\t\t\t\treturn 1;\r\n\t\t\tif(a.score > b.score)\r\n\t\t\t\treturn -1;\r\n\t\t\treturn 0;\r\n\t\t}).slice(0, limit);\r\n\t}\r\n\t\r\n\tgetNextPlayerSide(playerSide)\r\n\t{\r\n\t\treturn (playerSide + 1) % this.playerCount;\r\n\t}\r\n\r\n\tevaluateBestMove(playerSide, depth, alpha, beta, isMaximisingPlayer)\r\n\t{\r\n\t\tif (depth === 0)\r\n\t\t{\r\n\t\t\treturn this.evaluateBoard(this.playingSide);\r\n\t\t}\r\n\t\tvar currentPlayer = this.getNextPlayerSide(playerSide);\r\n\t\tvar moves = this.chessboard.getMoves(currentPlayer);\r\n\r\n\t\tif (isMaximisingPlayer)\r\n\t\t{\r\n\t\t\tvar bestValue = -9999;\r\n\t\t\tfor (let move of moves)\r\n\t\t\t{\r\n\t\t\t\tthis.chessboard.move(move.from, move.to);\r\n\t\t\t\tbestValue = Math.max(bestValue, this.evaluateBestMove(currentPlayer, depth - 1, alpha, beta, !isMaximisingPlayer));\r\n\t\t\t\tthis.chessboard.undo();\r\n\t\t\t\talpha = Math.max(alpha, bestValue);\r\n\t\t\t\tif (beta <= alpha)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn bestValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn bestValue;\r\n\t\t} else {\r\n\t\t\tvar bestValue = 9999;\r\n\t\t\tfor (let move of moves)\r\n\t\t\t{\r\n\t\t\t\tthis.chessboard.move(move.from, move.to);\r\n\t\t\t\tbestValue = Math.min(bestValue, this.evaluateBestMove(currentPlayer, depth - 1, alpha, beta, !isMaximisingPlayer));\r\n\t\t\t\tthis.chessboard.undo();\r\n\t\t\t\t\r\n\t\t\t\tbeta = Math.min(beta, bestValue);\r\n\t\t\t\tif (beta <= alpha)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn bestValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn bestValue;\r\n\t\t}\r\n\t}\r\n\r\n\tgetRandomMove()\r\n\t{\r\n\t\tvar moves = this.chessboard.getMovesFEN(this.playingSide);\r\n\t\tif(!moves.length)\r\n\t\t\treturn null;\r\n\t\tvar randMove = moves[Math.floor(Math.random() * moves.length)];\r\n\t\trandMove.score = 0;\r\n\t\treturn randMove;\r\n\t}\r\n\r\n\tevaluateBoard(side)\r\n\t{\r\n\t\tvar boardValue = 0;\r\n\t\tthis.chessboard.forEachPiece( piece => {\r\n\t\t\tif(side == piece.color)\r\n\t\t\t{\r\n\t\t\t\tboardValue += PIECE_VALUES[piece.type] + BoardEvaluations[piece.color][piece.type][piece.square.y][piece.square.x];\r\n\t\t\t}else{\r\n\t\t\t\tboardValue -= PIECE_VALUES[piece.type] + BoardEvaluations[piece.color][piece.type][piece.square.y][piece.square.x];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t});\r\n\t\treturn boardValue;\r\n\t}\r\n\t\r\n};","export class ChessAIWorker\r\n{\r\n\tworker: Worker = null;\r\n\t\r\n\tlisteners = [];\r\n\tconstructor(workerPath)\r\n\t{\r\n\t\tthis.worker = new Worker( workerPath );\r\n\t\tthis.worker.onmessage = (message) => {\r\n\t\t\t\r\n\t\t\tif(this.listeners[message.data.event])\r\n\t\t\t{\r\n\t\t\t\tfor(var event of this.listeners[message.data.event])\r\n\t\t\t\t{\r\n\t\t\t\t\tevent.apply(event, message.data.arguments);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\temit(event, data)\r\n\t{\r\n\t\tthis.worker.postMessage(event);\r\n\t}\r\n\t\r\n\ton(type, callback)\r\n\t{\r\n\t\tif(!this.listeners[type])\r\n\t\t{\r\n\t\t\tthis.listeners[type] = [];\r\n\t\t}\r\n\r\n\t\tthis.listeners[type].push(callback);\r\n\t}\r\n\t\r\n\texec(method, ...args: any[])\r\n\t{\r\n\t\tthis.worker.postMessage({\r\n\t\t\tmethod: method,\r\n\t\t\targuments: Array.prototype.slice.call(arguments).slice(1)\r\n\t\t});\r\n\t}\r\n\r\n\tdestroy()\r\n\t{\r\n\t\tthis.worker.terminate();\r\n\t}\r\n};\r\n\r\n","export * from \"./ChessAI\";\r\nexport * from \"./ChessAIWorker\";"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvQGNoZXNzbGliL2NvcmUvYnVpbGQvQ2hlc3NBSS9Cb2FyZEV2YWxzLmpzIiwibm9kZV9tb2R1bGVzL0BjaGVzc2xpYi9jb3JlL2J1aWxkL0NoZXNzQUkvQ2hlc3NBSS5qcyIsIm5vZGVfbW9kdWxlcy9AY2hlc3NsaWIvY29yZS9idWlsZC9DaGVzc0FJL0NoZXNzQUlXb3JrZXIuanMiLCJub2RlX21vZHVsZXMvQGNoZXNzbGliL2NvcmUvYnVpbGQvQ2hlc3NBSS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9AY2hlc3NsaWIvY29yZS9idWlsZC9DaGVzcy9DaGVzc2JvYXJkLmpzIiwibm9kZV9tb2R1bGVzL0BjaGVzc2xpYi9jb3JlL2J1aWxkL0NoZXNzL0V2ZW50cy5qcyIsIm5vZGVfbW9kdWxlcy9AY2hlc3NsaWIvY29yZS9idWlsZC9DaGVzcy9QaWVjZS5qcyIsIm5vZGVfbW9kdWxlcy9AY2hlc3NsaWIvY29yZS9idWlsZC9DaGVzcy9QaWVjZXMvQmlzaG9wLmpzIiwibm9kZV9tb2R1bGVzL0BjaGVzc2xpYi9jb3JlL2J1aWxkL0NoZXNzL1BpZWNlcy9LaW5nLmpzIiwibm9kZV9tb2R1bGVzL0BjaGVzc2xpYi9jb3JlL2J1aWxkL0NoZXNzL1BpZWNlcy9LbmlnaHQuanMiLCJub2RlX21vZHVsZXMvQGNoZXNzbGliL2NvcmUvYnVpbGQvQ2hlc3MvUGllY2VzL1Bhd24uanMiLCJub2RlX21vZHVsZXMvQGNoZXNzbGliL2NvcmUvYnVpbGQvQ2hlc3MvUGllY2VzL1F1ZWVuLmpzIiwibm9kZV9tb2R1bGVzL0BjaGVzc2xpYi9jb3JlL2J1aWxkL0NoZXNzL1BpZWNlcy9Sb29rLmpzIiwibm9kZV9tb2R1bGVzL0BjaGVzc2xpYi9jb3JlL2J1aWxkL0NoZXNzL1Bvc2l0aW9ucy5qcyIsIm5vZGVfbW9kdWxlcy9AY2hlc3NsaWIvY29yZS9idWlsZC9DaGVzcy9TcXVhcmUuanMiLCJub2RlX21vZHVsZXMvQGNoZXNzbGliL2NvcmUvYnVpbGQvQ2hlc3MvVXRpbHMuanMiLCJub2RlX21vZHVsZXMvQGNoZXNzbGliL2NvcmUvYnVpbGQvQ2hlc3MvaW5kZXguanMiLCJub2RlX21vZHVsZXMvQGNoZXNzbGliL2NvcmUvaW5kZXguanMiLCJzb3VyY2UvQUlXb3JrZXIvVXRpbHMvQUlXb3JrZXIudHMiLCJzb3VyY2UvQUlXb3JrZXIvd29ya2VyLnRzIiwic291cmNlL0NoZXNzQUkvQm9hcmRFdmFscy50cyIsInNvdXJjZS9DaGVzc0FJL0NoZXNzQUkudHMiLCJzb3VyY2UvQ2hlc3NBSS9DaGVzc0FJV29ya2VyLnRzIiwic291cmNlL0NoZXNzQUkvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNIQTtJQUVDO1FBQUEsaUJBU0M7UUFQQSxJQUFJLENBQUMsU0FBUyxHQUFHLFVBQUMsS0FBSztZQUN0QixJQUFJLEdBQUcsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDO1lBQ3JCLEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FDZCxDQUFDO2dCQUNBLEtBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUksRUFBRSxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDN0MsQ0FBQztRQUNGLENBQUMsQ0FBQTtJQUNGLENBQUM7SUFFRCx1QkFBSSxHQUFKLFVBQUssS0FBSztRQUFFLGNBQWM7YUFBZCxVQUFjLEVBQWQscUJBQWMsRUFBZCxJQUFjO1lBQWQsNkJBQWM7O1FBRXpCLE9BQU8sQ0FBQyxHQUFHLENBQUM7WUFDWCxLQUFLLEVBQUUsS0FBSztZQUNaLFNBQVMsRUFBRSxJQUFJO1NBQ2YsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLFdBQVcsQ0FBQztZQUNoQixLQUFLLEVBQUUsS0FBSztZQUNaLFNBQVMsRUFBRSxJQUFJO1NBQ2YsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUdmLENBQUM7SUFDRixlQUFDO0FBQUQsQ0ExQkEsQUEwQkMsSUFBQTtBQTFCWSw0QkFBUTtBQTBCcEIsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7QUMxQkYsdUNBQStEO0FBQy9ELHNDQUFxQztBQUNyQyw2Q0FBNEM7QUFFNUM7SUFBbUMsaUNBQVE7SUFFMUM7UUFBQSxZQUVDLGlCQUFPLFNBRVA7UUFEQSxPQUFPLENBQUMsR0FBRyxDQUFDLHdCQUF3QixDQUFDLENBQUM7O0lBQ3ZDLENBQUM7SUFFRCxvQ0FBWSxHQUFaLFVBQWEsU0FBUyxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsU0FBUztRQUVwRCxJQUFJLEtBQUssR0FBRyxJQUFJLGlCQUFVLEVBQUUsQ0FBQztRQUM3QixLQUFLLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzFCLElBQUksRUFBRSxHQUFHLElBQUksaUJBQU8sQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLElBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQyxZQUFZLENBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQ3BELElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBRTNCLENBQUM7SUFDRixvQkFBQztBQUFELENBakJBLEFBaUJDLENBakJrQyxtQkFBUSxHQWlCMUM7QUFqQlksc0NBQWE7QUFpQnpCLENBQUM7QUFFRixtQkFBbUI7QUFDbkIsSUFBSSxRQUFRLEdBQUcsSUFBSSxhQUFhLEVBQUUsQ0FBQzs7OztBQ3ZCbkMsc0JBQXNCLEtBQUs7SUFFdkIsTUFBTSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUNuQyxDQUFDO0FBQUEsQ0FBQztBQUVTLFFBQUEsZUFBZSxHQUFHO0lBQzVCLENBQUMsRUFBRTtRQUNGLENBQUMsSUFBSSxFQUFHLElBQUksRUFBRyxJQUFJLEVBQUcsSUFBSSxFQUFHLElBQUksRUFBRyxJQUFJLEVBQUcsSUFBSSxFQUFHLElBQUksQ0FBQztRQUN2RCxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLENBQUM7UUFDL0MsQ0FBQyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxDQUFDO1FBQy9DLENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsQ0FBQztRQUMvQyxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLENBQUM7UUFDL0MsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRyxHQUFHLENBQUM7UUFDL0MsQ0FBQyxHQUFHLEVBQUcsR0FBRyxFQUFFLEdBQUcsRUFBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsQ0FBQztRQUMvQyxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLENBQUM7S0FDL0M7SUFFRCxDQUFDLEVBQUU7UUFDRixDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2hELENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2hELENBQUMsQ0FBQyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDaEQsQ0FBQyxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNoRCxDQUFDLENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2hELENBQUMsQ0FBQyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDaEQsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDaEQsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztLQUMvQztJQUVGLENBQUMsRUFBRTtRQUNGLENBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDakQsQ0FBRSxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNqRCxDQUFFLENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2pELENBQUUsQ0FBQyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDakQsQ0FBRSxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNqRCxDQUFFLENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2pELENBQUUsQ0FBQyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDakQsQ0FBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztLQUNqRDtJQUdELENBQUMsRUFBRTtRQUNGLENBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsQ0FBQztRQUNqRCxDQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLENBQUM7UUFDakQsQ0FBRSxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNqRCxDQUFFLENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2pELENBQUUsQ0FBQyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDakQsQ0FBRSxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNqRCxDQUFFLENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2pELENBQUcsR0FBRyxFQUFJLEdBQUcsRUFBRSxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsQ0FBQztLQUNqRDtJQUdELENBQUMsRUFBRTtRQUNGLENBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDakQsQ0FBRSxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNqRCxDQUFFLENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2pELENBQUUsQ0FBQyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDakQsQ0FBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDakQsQ0FBRSxDQUFDLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNqRCxDQUFFLENBQUMsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2pELENBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7S0FDakQ7SUFFRCxDQUFDLEVBQUU7UUFFRixDQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2pELENBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDakQsQ0FBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNqRCxDQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBQ2pELENBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDakQsQ0FBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQztRQUNqRCxDQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLENBQUU7UUFDbEQsQ0FBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxFQUFHLEdBQUcsRUFBRyxHQUFHLEVBQUcsR0FBRyxDQUFFO0tBQ2xEO0NBQ0QsQ0FBQztBQUVTLFFBQUEsZUFB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QUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQ3pCLENBQUM7WUFDQSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUMzQixDQUFDO1FBRUQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDckMsQ0FBQztJQUVELDRCQUFJLEdBQUosVUFBSyxNQUFNO1FBQUUsY0FBYzthQUFkLFVBQWMsRUFBZCxxQkFBYyxFQUFkLElBQWM7WUFBZCw2QkFBYzs7UUFFMUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUM7WUFDdkIsTUFBTSxFQUFFLE1BQU07WUFDZCxTQUFTLEVBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7U0FDekQsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQUVELCtCQUFPLEdBQVA7UUFFQyxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ3pCLENBQUM7SUFDRixvQkFBQztBQUFELENBL0NBLEFBK0NDLElBQUE7QUEvQ1ksc0NBQWE7QUErQ3pCLENBQUM7Ozs7Ozs7QUMvQ0YsK0JBQTBCO0FBQzFCLHFDQUFnQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmZ1bmN0aW9uIHJldmVyc2VBcnJheShhcnJheSkge1xuICAgIHJldHVybiBhcnJheS5zbGljZSgpLnJldmVyc2UoKTtcbn1cbjtcbmV4cG9ydHMuYm9hcmRFdmFsc1doaXRlID0ge1xuICAgIFA6IFtcbiAgICAgICAgWzEwLjAsIDEwLjAsIDEwLjAsIDEwLjAsIDEwLjAsIDEwLjAsIDEwLjAsIDEwLjBdLFxuICAgICAgICBbNS4wLCA1LjAsIDUuMCwgNS4wLCA1LjAsIDUuMCwgNS4wLCA1LjBdLFxuICAgICAgICBbMS4wLCAxLjAsIDIuMCwgMy4wLCAzLjAsIDIuMCwgMS4wLCAxLjBdLFxuICAgICAgICBbMC41LCAwLjUsIDEuMCwgMi41LCAyLjUsIDEuMCwgMC41LCAwLjVdLFxuICAgICAgICBbMC4wLCAwLjAsIDAuMCwgMi4wLCAyLjAsIDAuMCwgMC4wLCAwLjBdLFxuICAgICAgICBbMC41LCAtMC41LCAtMS4wLCAwLjAsIDAuMCwgLTEuMCwgLTAuNSwgMC41XSxcbiAgICAgICAgWzAuNSwgMS4wLCAxLjAsIC0yLjAsIC0yLjAsIDEuMCwgMS4wLCAwLjVdLFxuICAgICAgICBbMC4wLCAwLjAsIDAuMCwgMC4wLCAwLjAsIDAuMCwgMC4wLCAwLjBdXG4gICAgXSxcbiAgICBOOiBbXG4gICAgICAgIFstNS4wLCAtNC4wLCAtMy4wLCAtMy4wLCAtMy4wLCAtMy4wLCAtNC4wLCAtNS4wXSxcbiAgICAgICAgWy00LjAsIC0yLjAsIDAuMCwgMC4wLCAwLjAsIDAuMCwgLTIuMCwgLTQuMF0sXG4gICAgICAgIFstMy4wLCAwLjAsIDEuMCwgMS41LCAxLjUsIDEuMCwgMC4wLCAtMy4wXSxcbiAgICAgICAgWy0zLjAsIDAuNSwgMS41LCAyLjAsIDIuMCwgMS41LCAwLjUsIC0zLjBdLFxuICAgICAgICBbLTMuMCwgMC4wLCAxLjUsIDIuMCwgMi4wLCAxLjUsIDAuMCwgLTMuMF0sXG4gICAgICAgIFstMy4wLCAwLjUsIDEuMCwgMS41LCAxLjUsIDEuMCwgMC41LCAtMy4wXSxcbiAgICAgICAgWy00LjAsIC0yLjAsIDAuMCwgMC41LCAwLjUsIDAuMCwgLTIuMCwgLTQuMF0sXG4gICAgICAgIFstNS4wLCAtNC4wLCAtMy4wLCAtMy4wLCAtMy4wLCAtMy4wLCAtNC4wLCAtNS4wXVxuICAgIF0sXG4gICAgQjogW1xuICAgICAgICBbLTIuMCwgLTEuMCwgLTEuMCwgLTEuMCwgLTEuMCwgLTEuMCwgLTEuMCwgLTIuMF0sXG4gICAgICAgIFstMS4wLCAwLjAsIDAuMCwgMC4wLCAwLjAsIDAuMCwgMC4wLCAtMS4wXSxcbiAgICAgICAgWy0xLjAsIDAuMCwgMC41LCAxLjAsIDEuMCwgMC41LCAwLjAsIC0xLjBdLFxuICAgICAgICBbLTEuMCwgMC41LCAwLjUsIDEuMCwgMS4wLCAwLjUsIDAuNSwgLTEuMF0sXG4gICAgICAgIFstMS4wLCAwLjAsIDEuMCwgMS4wLCAxLjAsIDEuMCwgMC4wLCAtMS4wXSxcbiAgICAgICAgWy0xLjAsIDEuMCwgMS4wLCAxLjAsIDEuMCwgMS4wLCAxLjAsIC0xLjBdLFxuICAgICAgICBbLTEuMCwgMC41LCAwLjAsIDAuMCwgMC4wLCAwLjAsIDAuNSwgLTEuMF0sXG4gICAgICAgIFstMi4wLCAtMS4wLCAtMS4wLCAtMS4wLCAtMS4wLCAtMS4wLCAtMS4wLCAtMi4wXVxuICAgIF0sXG4gICAgUjogW1xuICAgICAgICBbMC4wLCAwLjAsIDAuMCwgMC4wLCAwLjAsIDAuMCwgMC4wLCAwLjBdLFxuICAgICAgICBbMC41LCAxLjAsIDEuMCwgMS4wLCAxLjAsIDEuMCwgMS4wLCAwLjVdLFxuICAgICAgICBbLTAuNSwgMC4wLCAwLjAsIDAuMCwgMC4wLCAwLjAsIDAuMCwgLTAuNV0sXG4gICAgICAgIFstMC41LCAwLjAsIDAuMCwgMC4wLCAwLjAsIDAuMCwgMC4wLCAtMC41XSxcbiAgICAgICAgWy0wLjUsIDAuMCwgMC4wLCAwLjAsIDAuMCwgMC4wLCAwLjAsIC0wLjVdLFxuICAgICAgICBbLTAuNSwgMC4wLCAwLjAsIDAuMCwgMC4wLCAwLjAsIDAuMCwgLTAuNV0sXG4gICAgICAgIFstMC41LCAwLjAsIDAuMCwgMC4wLCAwLjAsIDAuMCwgMC4wLCAtMC41XSxcbiAgICAgICAgWzAuMCwgMC4wLCAwLjAsIDAuNSwgMC41LCAwLjAsIDAuMCwgMC4wXVxuICAgIF0sXG4gICAgUTogW1xuICAgICAgICBbLTIuMCwgLTEuMCwgLTEuMCwgLTAuNSwgLTAuNSwgLTEuMCwgLTEuMCwgLTIuMF0sXG4gICAgICAgIFstMS4wLCAwLjAsIDAuMCwgMC4wLCAwLjAsIDAuMCwgMC4wLCAtMS4wXSxcbiAgICAgICAgWy0xLjAsIDAuMCwgMC41LCAwLjUsIDAuNSwgMC41LCAwLjAsIC0xLjBdLFxuICAgICAgICBbLTAuNSwgMC4wLCAwLjUsIDAuNSwgMC41LCAwLjUsIDAuMCwgLTAuNV0sXG4gICAgICAgIFswLjAsIDAuMCwgMC41LCAwLjUsIDAuNSwgMC41LCAwLjAsIC0wLjVdLFxuICAgICAgICBbLTEuMCwgMC41LCAwLjUsIDAuNSwgMC41LCAwLjUsIDAuMCwgLTEuMF0sXG4gICAgICAgIFstMS4wLCAwLjAsIDAuNSwgMC4wLCAwLjAsIDAuMCwgMC4wLCAtMS4wXSxcbiAgICAgICAgWy0yLjAsIC0xLjAsIC0xLjAsIC0wLjUsIC0wLjUsIC0xLjAsIC0xLjAsIC0yLjBdXG4gICAgXSxcbiAgICBLOiBbXG4gICAgICAgIFstMy4wLCAtNC4wLCAtNC4wLCAtNS4wLCAtNS4wLCAtNC4wLCAtNC4wLCAtMy4wXSxcbiAgICAgICAgWy0zLjAsIC00LjAsIC00LjAsIC01LjAsIC01LjAsIC00LjAsIC00LjAsIC0zLjBdLFxuICAgICAgICBbLTMuMCwgLTQuMCwgLTQuMCwgLTUuMCwgLTUuMCwgLTQuMCwgLTQuMCwgLTMuMF0sXG4gICAgICAgIFstMy4wLCAtNC4wLCAtNC4wLCAtNS4wLCAtNS4wLCAtNC4wLCAtNC4wLCAtMy4wXSxcbiAgICAgICAgWy0yLjAsIC0zLjAsIC0zLjAsIC00LjAsIC00LjAsIC0zLjAsIC0zLjAsIC0yLjBdLFxuICAgICAgICBbLTEuMCwgLTIuMCwgLTIuMCwgLTIuMCwgLTIuMCwgLTIuMCwgLTIuMCwgLTEuMF0sXG4gICAgICAgIFsyLjAsIDIuMCwgMC4wLCAwLjAsIDAuMCwgMC4wLCAyLjAsIDIuMF0sXG4gICAgICAgIFsyLjAsIDMuMCwgMS4wLCAwLjAsIDAuMCwgMS4wLCAzLjAsIDIuMF1cbiAgICBdXG59O1xuZXhwb3J0cy5ib2FyZEV2YWxzQmxhY2sgPSB7XG4gICAgUDogcmV2ZXJzZUFycmF5KGV4cG9ydHMuYm9hcmRFdmFsc1doaXRlLlApLFxuICAgIE46IHJldmVyc2VBcnJheShleHBvcnRzLmJvYXJkRXZhbHNXaGl0ZS5OKSxcbiAgICBCOiByZXZlcnNlQXJyYXkoZXhwb3J0cy5ib2FyZEV2YWxzV2hpdGUuQiksXG4gICAgUjogcmV2ZXJzZUFycmF5KGV4cG9ydHMuYm9hcmRFdmFsc1doaXRlLlIpLFxuICAgIFE6IHJldmVyc2VBcnJheShleHBvcnRzLmJvYXJkRXZhbHNXaGl0ZS5RKSxcbiAgICBLOiByZXZlcnNlQXJyYXkoZXhwb3J0cy5ib2FyZEV2YWxzV2hpdGUuSyksXG59O1xuZXhwb3J0cy5Cb2FyZEV2YWx1YXRpb25zID0gW1xuICAgIGV4cG9ydHMuYm9hcmRFdmFsc0JsYWNrLFxuICAgIGV4cG9ydHMuYm9hcmRFdmFsc1doaXRlLFxuXTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Qm9hcmRFdmFscy5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIENoZXNzXzEgPSByZXF1aXJlKFwiLi4vQ2hlc3NcIik7XG52YXIgQm9hcmRFdmFsc18xID0gcmVxdWlyZShcIi4vQm9hcmRFdmFsc1wiKTtcbnZhciBQSUVDRV9WQUxVRVMgPSB7XG4gICAgUDogMTAsXG4gICAgQjogMzAsXG4gICAgTjogMzAsXG4gICAgUjogNTAsXG4gICAgUTogODAsXG4gICAgSzogOTAwLFxufTtcbnZhciBDaGVzc0FJID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENoZXNzQUkoY2hlc3Nib2FyZCwgcGxheWluZ1NpZGUsIHBsYXllckNvdW50KSB7XG4gICAgICAgIHRoaXMuY2hlc3Nib2FyZCA9IG51bGw7XG4gICAgICAgIHRoaXMubW92ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5wbGF5aW5nU2lkZSA9IDA7XG4gICAgICAgIHRoaXMucGxheWVyQ291bnQgPSAyO1xuICAgICAgICB0aGlzLnNlYXJjaFRpbWUgPSAwO1xuICAgICAgICB0aGlzLmNoZXNzYm9hcmQgPSBjaGVzc2JvYXJkO1xuICAgICAgICB0aGlzLnBsYXlpbmdTaWRlID0gcGxheWluZ1NpZGU7XG4gICAgICAgIHRoaXMucGxheWVyQ291bnQgPSBwbGF5ZXJDb3VudDtcbiAgICB9XG4gICAgQ2hlc3NBSS5wcm90b3R5cGUuc2V0Qm9hcmQgPSBmdW5jdGlvbiAoY2hlc3Nib2FyZCkge1xuICAgICAgICB0aGlzLmNoZXNzYm9hcmQgPSBjaGVzc2JvYXJkO1xuICAgIH07XG4gICAgQ2hlc3NBSS5wcm90b3R5cGUubG9hZEJvYXJkID0gZnVuY3Rpb24gKHBvc2l0aW9ucykge1xuICAgICAgICB0aGlzLmNoZXNzYm9hcmQgPSBDaGVzc18xLkNoZXNzYm9hcmQuZnJvbVBvc2l0aW9uKHBvc2l0aW9ucyk7XG4gICAgfTtcbiAgICBDaGVzc0FJLnByb3RvdHlwZS5kb01vdmUgPSBmdW5jdGlvbiAobW92ZSkge1xuICAgICAgICBpZiAoIXRoaXMuY2hlc3Nib2FyZC5kb01vdmUobW92ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIENoZXNzQUkucHJvdG90eXBlLmRvTW92ZUZFTiA9IGZ1bmN0aW9uIChtb3ZlKSB7XG4gICAgICAgIGlmICghdGhpcy5jaGVzc2JvYXJkLmRvTW92ZUZFTihtb3ZlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgQ2hlc3NBSS5wcm90b3R5cGUubWFrZU1vdmVzID0gZnVuY3Rpb24gKHNlYXJjaERlcHRoLCBhbW91bnQpIHtcbiAgICAgICAgaWYgKHNlYXJjaERlcHRoID09PSB2b2lkIDApIHsgc2VhcmNoRGVwdGggPSA0OyB9XG4gICAgICAgIGlmIChhbW91bnQgPT09IHZvaWQgMCkgeyBhbW91bnQgPSAxOyB9XG4gICAgICAgIHZhciBiZXN0TW92ZXMgPSB0aGlzLmdldEJlc3RNb3ZlcyhzZWFyY2hEZXB0aCwgYW1vdW50KTtcbiAgICAgICAgaWYgKCFiZXN0TW92ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGJlc3RNb3Zlc18xID0gYmVzdE1vdmVzOyBfaSA8IGJlc3RNb3Zlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGJlc3RNb3ZlID0gYmVzdE1vdmVzXzFbX2ldO1xuICAgICAgICAgICAgdGhpcy5kb01vdmUoYmVzdE1vdmUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiZXN0TW92ZXM7XG4gICAgfTtcbiAgICBDaGVzc0FJLnByb3RvdHlwZS5nZXRCZXN0TW92ZSA9IGZ1bmN0aW9uIChzaWRlLCBzZWFyY2hEZXB0aCkge1xuICAgICAgICB2YXIgYmVzdE1vdmVzID0gdGhpcy5nZXRCZXN0TW92ZXMoc2VhcmNoRGVwdGgpO1xuICAgICAgICBpZiAoIWJlc3RNb3Zlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFJhbmRvbU1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB2YXIgYmVzdE1vdmUgPSBudWxsO1xuICAgICAgICAvLyB2YXIgYmVzdFZhbHVlID0gLTk5OTk7XG4gICAgICAgIC8vIGlmKG1vdmUuc2NvcmUgPiBiZXN0VmFsdWUpXG4gICAgICAgIC8vIHtcbiAgICAgICAgLy8gXHRiZXN0TW92ZSA9IG1vdmU7XG4gICAgICAgIC8vIFx0YmVzdFZhbHVlID0gbW92ZS5zY29yZTtcbiAgICAgICAgLy8gfVxuICAgICAgICByZXR1cm4gYmVzdE1vdmVzWzBdO1xuICAgIH07XG4gICAgQ2hlc3NBSS5wcm90b3R5cGUuZ2V0QmVzdE1vdmVzID0gZnVuY3Rpb24gKHNlYXJjaERlcHRoLCBsaW1pdCkge1xuICAgICAgICBpZiAobGltaXQgPT09IHZvaWQgMCkgeyBsaW1pdCA9IDU7IH1cbiAgICAgICAgdGhpcy5zZWFyY2hUaW1lID0gRGF0ZS5ub3coKSArIDEwMDtcbiAgICAgICAgdmFyIG1vdmVzID0gdGhpcy5jaGVzc2JvYXJkLmdldE1vdmVzRkVOKHRoaXMucGxheWluZ1NpZGUpO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIG1vdmVzXzEgPSBtb3ZlczsgX2kgPCBtb3Zlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIG1vdmUgPSBtb3Zlc18xW19pXTtcbiAgICAgICAgICAgIHRoaXMuY2hlc3Nib2FyZC5tb3ZlRkVOKG1vdmUuZnJvbSwgbW92ZS50byk7XG4gICAgICAgICAgICAvLyBEbyBub3QgYWxsb3cgdGhlIGtpbmcgdG8gYmUga2lsbGVkP1xuICAgICAgICAgICAgbW92ZS5zY29yZSA9IHRoaXMuZXZhbHVhdGVCZXN0TW92ZSh0aGlzLnBsYXlpbmdTaWRlLCBzZWFyY2hEZXB0aCAtIDEsIC0xMDAwMCwgMTAwMDAsIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuY2hlc3Nib2FyZC51bmRvKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1vdmVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIGlmIChhLnNjb3JlIDwgYi5zY29yZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIGlmIChhLnNjb3JlID4gYi5zY29yZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSkuc2xpY2UoMCwgbGltaXQpO1xuICAgIH07XG4gICAgQ2hlc3NBSS5wcm90b3R5cGUuZ2V0TmV4dFBsYXllclNpZGUgPSBmdW5jdGlvbiAocGxheWVyU2lkZSkge1xuICAgICAgICByZXR1cm4gKHBsYXllclNpZGUgKyAxKSAlIHRoaXMucGxheWVyQ291bnQ7XG4gICAgfTtcbiAgICBDaGVzc0FJLnByb3RvdHlwZS5ldmFsdWF0ZUJlc3RNb3ZlID0gZnVuY3Rpb24gKHBsYXllclNpZGUsIGRlcHRoLCBhbHBoYSwgYmV0YSwgaXNNYXhpbWlzaW5nUGxheWVyKSB7XG4gICAgICAgIGlmIChkZXB0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZhbHVhdGVCb2FyZCh0aGlzLnBsYXlpbmdTaWRlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY3VycmVudFBsYXllciA9IHRoaXMuZ2V0TmV4dFBsYXllclNpZGUocGxheWVyU2lkZSk7XG4gICAgICAgIHZhciBtb3ZlcyA9IHRoaXMuY2hlc3Nib2FyZC5nZXRNb3ZlcyhjdXJyZW50UGxheWVyKTtcbiAgICAgICAgaWYgKGlzTWF4aW1pc2luZ1BsYXllcikge1xuICAgICAgICAgICAgdmFyIGJlc3RWYWx1ZSA9IC05OTk5O1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBtb3Zlc18yID0gbW92ZXM7IF9pIDwgbW92ZXNfMi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbW92ZSA9IG1vdmVzXzJbX2ldO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlc3Nib2FyZC5tb3ZlKG1vdmUuZnJvbSwgbW92ZS50byk7XG4gICAgICAgICAgICAgICAgYmVzdFZhbHVlID0gTWF0aC5tYXgoYmVzdFZhbHVlLCB0aGlzLmV2YWx1YXRlQmVzdE1vdmUoY3VycmVudFBsYXllciwgZGVwdGggLSAxLCBhbHBoYSwgYmV0YSwgIWlzTWF4aW1pc2luZ1BsYXllcikpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlc3Nib2FyZC51bmRvKCk7XG4gICAgICAgICAgICAgICAgYWxwaGEgPSBNYXRoLm1heChhbHBoYSwgYmVzdFZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAoYmV0YSA8PSBhbHBoYSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmVzdFZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBiZXN0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgYmVzdFZhbHVlID0gOTk5OTtcbiAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgbW92ZXNfMyA9IG1vdmVzOyBfYSA8IG1vdmVzXzMubGVuZ3RoOyBfYSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1vdmUgPSBtb3Zlc18zW19hXTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZXNzYm9hcmQubW92ZShtb3ZlLmZyb20sIG1vdmUudG8pO1xuICAgICAgICAgICAgICAgIGJlc3RWYWx1ZSA9IE1hdGgubWluKGJlc3RWYWx1ZSwgdGhpcy5ldmFsdWF0ZUJlc3RNb3ZlKGN1cnJlbnRQbGF5ZXIsIGRlcHRoIC0gMSwgYWxwaGEsIGJldGEsICFpc01heGltaXNpbmdQbGF5ZXIpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZXNzYm9hcmQudW5kbygpO1xuICAgICAgICAgICAgICAgIGJldGEgPSBNYXRoLm1pbihiZXRhLCBiZXN0VmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChiZXRhIDw9IGFscGhhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiZXN0VmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGJlc3RWYWx1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ2hlc3NBSS5wcm90b3R5cGUuZ2V0UmFuZG9tTW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1vdmVzID0gdGhpcy5jaGVzc2JvYXJkLmdldE1vdmVzRkVOKHRoaXMucGxheWluZ1NpZGUpO1xuICAgICAgICBpZiAoIW1vdmVzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgcmFuZE1vdmUgPSBtb3Zlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtb3Zlcy5sZW5ndGgpXTtcbiAgICAgICAgcmFuZE1vdmUuc2NvcmUgPSAwO1xuICAgICAgICByZXR1cm4gcmFuZE1vdmU7XG4gICAgfTtcbiAgICBDaGVzc0FJLnByb3RvdHlwZS5ldmFsdWF0ZUJvYXJkID0gZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgdmFyIGJvYXJkVmFsdWUgPSAwO1xuICAgICAgICB0aGlzLmNoZXNzYm9hcmQuZm9yRWFjaFBpZWNlKGZ1bmN0aW9uIChwaWVjZSkge1xuICAgICAgICAgICAgaWYgKHNpZGUgPT0gcGllY2UuY29sb3IpIHtcbiAgICAgICAgICAgICAgICBib2FyZFZhbHVlICs9IFBJRUNFX1ZBTFVFU1twaWVjZS50eXBlXSArIEJvYXJkRXZhbHNfMS5Cb2FyZEV2YWx1YXRpb25zW3BpZWNlLmNvbG9yXVtwaWVjZS50eXBlXVtwaWVjZS5zcXVhcmUueV1bcGllY2Uuc3F1YXJlLnhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYm9hcmRWYWx1ZSAtPSBQSUVDRV9WQUxVRVNbcGllY2UudHlwZV0gKyBCb2FyZEV2YWxzXzEuQm9hcmRFdmFsdWF0aW9uc1twaWVjZS5jb2xvcl1bcGllY2UudHlwZV1bcGllY2Uuc3F1YXJlLnldW3BpZWNlLnNxdWFyZS54XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBib2FyZFZhbHVlO1xuICAgIH07XG4gICAgcmV0dXJuIENoZXNzQUk7XG59KCkpO1xuZXhwb3J0cy5DaGVzc0FJID0gQ2hlc3NBSTtcbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q2hlc3NBSS5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIENoZXNzQUlXb3JrZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ2hlc3NBSVdvcmtlcih3b3JrZXJQYXRoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMud29ya2VyID0gbnVsbDtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy53b3JrZXIgPSBuZXcgV29ya2VyKHdvcmtlclBhdGgpO1xuICAgICAgICB0aGlzLndvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKF90aGlzLmxpc3RlbmVyc1ttZXNzYWdlLmRhdGEuZXZlbnRdKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLmxpc3RlbmVyc1ttZXNzYWdlLmRhdGEuZXZlbnRdOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnQgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LmFwcGx5KGV2ZW50LCBtZXNzYWdlLmRhdGEuYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIENoZXNzQUlXb3JrZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiAoZXZlbnQsIGRhdGEpIHtcbiAgICAgICAgdGhpcy53b3JrZXIucG9zdE1lc3NhZ2UoZXZlbnQpO1xuICAgIH07XG4gICAgQ2hlc3NBSVdvcmtlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAodHlwZSwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc1t0eXBlXSkge1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnNbdHlwZV0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpc3RlbmVyc1t0eXBlXS5wdXNoKGNhbGxiYWNrKTtcbiAgICB9O1xuICAgIENoZXNzQUlXb3JrZXIucHJvdG90eXBlLmV4ZWMgPSBmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgICAgICAgYXJndW1lbnRzOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLnNsaWNlKDEpXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ2hlc3NBSVdvcmtlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy53b3JrZXIudGVybWluYXRlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gQ2hlc3NBSVdvcmtlcjtcbn0oKSk7XG5leHBvcnRzLkNoZXNzQUlXb3JrZXIgPSBDaGVzc0FJV29ya2VyO1xuO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1DaGVzc0FJV29ya2VyLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xufVxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuX19leHBvcnQocmVxdWlyZShcIi4vQ2hlc3NBSVwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9DaGVzc0FJV29ya2VyXCIpKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBTcXVhcmVfMSA9IHJlcXVpcmUoXCIuL1NxdWFyZVwiKTtcbnZhciBQaWVjZV8xID0gcmVxdWlyZShcIi4vUGllY2VcIik7XG4vLyBQaWVjZXNcbnZhciBQYXduXzEgPSByZXF1aXJlKFwiLi9QaWVjZXMvUGF3blwiKTtcbnZhciBCaXNob3BfMSA9IHJlcXVpcmUoXCIuL1BpZWNlcy9CaXNob3BcIik7XG52YXIgS25pZ2h0XzEgPSByZXF1aXJlKFwiLi9QaWVjZXMvS25pZ2h0XCIpO1xudmFyIFJvb2tfMSA9IHJlcXVpcmUoXCIuL1BpZWNlcy9Sb29rXCIpO1xudmFyIFF1ZWVuXzEgPSByZXF1aXJlKFwiLi9QaWVjZXMvUXVlZW5cIik7XG52YXIgS2luZ18xID0gcmVxdWlyZShcIi4vUGllY2VzL0tpbmdcIik7XG4vLyBUaGlyZCBQYXJ0eVxudmFyIFV0aWxzXzEgPSByZXF1aXJlKFwiLi9VdGlsc1wiKTtcbnZhciBDaGVzc2JvYXJkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENoZXNzYm9hcmQoc2l6ZVgsIHNpemVZKSB7XG4gICAgICAgIGlmIChzaXplWCA9PT0gdm9pZCAwKSB7IHNpemVYID0gODsgfVxuICAgICAgICBpZiAoc2l6ZVkgPT09IHZvaWQgMCkgeyBzaXplWSA9IDg7IH1cbiAgICAgICAgdGhpcy5ib2FyZFNpemUgPSB7XG4gICAgICAgICAgICB4OiA4LFxuICAgICAgICAgICAgeTogOCxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oaXN0b3J5ID0gW107XG4gICAgICAgIHRoaXMuc3F1YXJlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzLm9uUHJvbW90ZSA9IG5ldyBVdGlsc18xLkNoZXNzRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuYm9hcmRTaXplLnggPSBzaXplWDtcbiAgICAgICAgdGhpcy5ib2FyZFNpemUueSA9IHNpemVZO1xuICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfVxuICAgIENoZXNzYm9hcmQuZnJvbVBvc2l0aW9uID0gZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgIHZhciBzaXplWSA9IHBvc2l0aW9uLmxlbmd0aDtcbiAgICAgICAgdmFyIHNpemVYID0gcG9zaXRpb25bMF0ubGVuZ3RoO1xuICAgICAgICB2YXIgYm9hcmQgPSBuZXcgQ2hlc3Nib2FyZChzaXplWCwgc2l6ZVkpO1xuICAgICAgICBib2FyZC5sb2FkUG9zaXRpb25zKHBvc2l0aW9uKTtcbiAgICAgICAgcmV0dXJuIGJvYXJkO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBDaGVzc2JvYXJkLmZyb21Qb3NpdGlvbih0aGlzLnNhdmVQb3NpdGlvbnMoKSk7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zcXVhcmVzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgdGhpcy5ib2FyZFNpemUueTsgKyt5KSB7XG4gICAgICAgICAgICB0aGlzLnNxdWFyZXNbeV0gPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy5ib2FyZFNpemUueDsgKyt4KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zcXVhcmVzW3ldW3hdID0gbmV3IFNxdWFyZV8xLlNxdWFyZSh0aGlzLCB4LCB5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhpc3RvcnkgPSBbXTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmJvYXJkU2l6ZS55OyArK3kpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy5ib2FyZFNpemUueDsgKyt4KSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sodGhpcy5zcXVhcmVzW3ldW3hdLCB4LCB5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuZm9yRWFjaFBpZWNlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoc3F1YXJlLCB4LCB5KSB7XG4gICAgICAgICAgICBpZiAoc3F1YXJlLnBpZWNlKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soc3F1YXJlLnBpZWNlLCB4LCB5LCBzcXVhcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLmZpbmRQaWVjZXMgPSBmdW5jdGlvbiAocGllY2VUeXBlLCBjb2xvcikge1xuICAgICAgICBpZiAocGllY2VUeXBlID09PSB2b2lkIDApIHsgcGllY2VUeXBlID0gbnVsbDsgfVxuICAgICAgICBpZiAoY29sb3IgPT09IHZvaWQgMCkgeyBjb2xvciA9IG51bGw7IH1cbiAgICAgICAgdmFyIHBpZWNlcyA9IFtdO1xuICAgICAgICB0aGlzLmZvckVhY2hQaWVjZShmdW5jdGlvbiAocGllY2UpIHtcbiAgICAgICAgICAgIGlmIChwaWVjZVR5cGUgJiYgcGllY2UudHlwZSAhPSBwaWVjZVR5cGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKGNvbG9yICYmIHBpZWNlLmNvbG9yICE9IGNvbG9yKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHBpZWNlcy5wdXNoKHBpZWNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwaWVjZXM7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIG5ld1NxdWFyZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmJvYXJkU2l6ZS55OyArK3kpIHtcbiAgICAgICAgICAgIG5ld1NxdWFyZXNbeV0gPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy5ib2FyZFNpemUueDsgKyt4KSB7XG4gICAgICAgICAgICAgICAgbmV3U3F1YXJlc1t5XVt4XSA9IGNhbGxiYWNrKHRoaXMuc3F1YXJlc1t5XVt4XSwgeCwgeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld1NxdWFyZXM7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5sb2FkUG9zaXRpb25zID0gZnVuY3Rpb24gKHBvc2l0aW9ucykge1xuICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgIGlmIChwb3NpdGlvbnMubGVuZ3RoID4gdGhpcy5ib2FyZFNpemUueSB8fCBwb3NpdGlvbnNbMF0ubGVuZ3RoID4gdGhpcy5ib2FyZFNpemUueCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgcG9zaXRpb25zLmxlbmd0aDsgKyt5KSB7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHBvc2l0aW9uc1t5XS5sZW5ndGg7ICsreCkge1xuICAgICAgICAgICAgICAgIHZhciBzcXVhcmUgPSB0aGlzLmdldFNxdWFyZSh4LCB5KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNxdWFyZShzcXVhcmUsIHBvc2l0aW9uc1t5XVt4XVsxXSwgUGllY2VfMS5DT0xPUlMuZ2V0Q29sb3IocG9zaXRpb25zW3ldW3hdWzBdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5zYXZlUG9zaXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcG9zaXRpb25zID0gW107XG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgdGhpcy5ib2FyZFNpemUueTsgKyt5KSB7XG4gICAgICAgICAgICBwb3NpdGlvbnNbeV0gPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy5ib2FyZFNpemUueDsgKyt4KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3F1YXJlc1t5XVt4XS5waWVjZSkge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbnNbeV1beF0gPSBQaWVjZV8xLkNPTE9SUy5nZXROYW1lKHRoaXMuc3F1YXJlc1t5XVt4XS5waWVjZS5jb2xvcikgKyB0aGlzLnNxdWFyZXNbeV1beF0ucGllY2UudHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uc1t5XVt4XSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwb3NpdGlvbnM7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5zZXRCb2FyZCA9IGZ1bmN0aW9uIChib2FyZCkge1xuICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoYm9hcmQpO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGtleXNfMSA9IGtleXM7IF9pIDwga2V5c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGtleSA9IGtleXNfMVtfaV07XG4gICAgICAgICAgICB2YXIgc3F1YXJlID0gdGhpcy5GRU5Ub1NxdWFyZShrZXkpO1xuICAgICAgICAgICAgaWYgKCFzcXVhcmUpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGNvbG9yID0gYm9hcmRba2V5XVswXTtcbiAgICAgICAgICAgIHZhciBwaWVjZSA9IGJvYXJkW2tleV1bMV07XG4gICAgICAgICAgICB0aGlzLnNldFNxdWFyZShzcXVhcmUsIHBpZWNlLCBQaWVjZV8xLkNPTE9SUy5nZXRDb2xvcihjb2xvcikpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5nZXRCb2FyZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHBvc2l0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHNxdWFyZSkge1xuICAgICAgICAgICAgaWYgKHNxdWFyZS5waWVjZSkge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uc1tfdGhpcy5TcXVhcmVUb0ZFTihzcXVhcmUpXSA9IHNxdWFyZS5waWVjZS5nZXRTeW1ib2woKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwb3NpdGlvbnM7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5nZXRTcXVhcmUgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICBpZiAoeCA+PSAodGhpcy5ib2FyZFNpemUueCkgfHwgeCA8IDAgfHwgeSA+PSAodGhpcy5ib2FyZFNpemUueSkgfHwgeSA8IDApXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3F1YXJlc1t5XVt4XTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLnNldFNxdWFyZSA9IGZ1bmN0aW9uIChzcXVhcmUsIHR5cGUsIGNvbG9yKSB7XG4gICAgICAgIGlmICghc3F1YXJlKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmICghdHlwZSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsZWFyU3F1YXJlKHNxdWFyZSk7XG4gICAgICAgIGlmICghQ2hlc3Nib2FyZC5QSUVDRVNbdHlwZV0pXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlUGllY2UodHlwZSwgY29sb3IsIHNxdWFyZSk7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5jcmVhdGVQaWVjZSA9IGZ1bmN0aW9uICh0eXBlLCBjb2xvciwgc3F1YXJlKSB7XG4gICAgICAgIHZhciBuZXdQaWVjZSA9IG5ldyBDaGVzc2JvYXJkLlBJRUNFU1t0eXBlXSh0aGlzLCBzcXVhcmUpO1xuICAgICAgICBuZXdQaWVjZS5zZXRDb2xvcihjb2xvcik7XG4gICAgICAgIG5ld1BpZWNlLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIG5ld1BpZWNlO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuc2V0UGllY2UgPSBmdW5jdGlvbiAoc3F1YXJlLCBwaWVjZSkge1xuICAgICAgICBpZiAoIXNxdWFyZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBvbGQgcGllY2UgZnJvbSB0aGUgc3F1YXJlXG4gICAgICAgIGlmIChzcXVhcmUucGllY2UpIHtcbiAgICAgICAgICAgIHNxdWFyZS5waWVjZS5zcXVhcmUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNldCB0aGUgbmV3IHBpZWNlXG4gICAgICAgIHNxdWFyZS5waWVjZSA9IHBpZWNlO1xuICAgICAgICBpZiAocGllY2UpIHtcbiAgICAgICAgICAgIHBpZWNlLnNxdWFyZSA9IHNxdWFyZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLmNsZWFyU3F1YXJlID0gZnVuY3Rpb24gKHNxdWFyZSkge1xuICAgICAgICBpZiAoc3F1YXJlLnBpZWNlKSB7XG4gICAgICAgICAgICBzcXVhcmUucGllY2Uuc2V0U3F1YXJlKG51bGwpO1xuICAgICAgICAgICAgc3F1YXJlLnNldFBpZWNlKG51bGwpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5pc1ZhbGlkTW92ZUZFTiA9IGZ1bmN0aW9uIChmcm9tLCB0bykge1xuICAgICAgICB2YXIgZnJvbVNxdWFyZSA9IHRoaXMuRkVOVG9TcXVhcmUoZnJvbSk7XG4gICAgICAgIHZhciB0b1NxdWFyZSA9IHRoaXMuRkVOVG9TcXVhcmUodG8pO1xuICAgICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkTW92ZShmcm9tU3F1YXJlLCB0b1NxdWFyZSk7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5pc1ZhbGlkTW92ZSA9IGZ1bmN0aW9uIChmcm9tLCB0bykge1xuICAgICAgICBpZiAoIWZyb20gfHwgIXRvKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIWZyb20ucGllY2UpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZ2V0QWxsb3dlZE1vdmVzT2YoZnJvbS5waWVjZSkuZmluZChmdW5jdGlvbiAobW92ZSkge1xuICAgICAgICAgICAgaWYgKGZyb20gPT0gbW92ZS5mcm9tICYmIHRvID09IG1vdmUudG8pXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuZG9Nb3ZlID0gZnVuY3Rpb24gKG1vdmUpIHtcbiAgICAgICAgdGhpcy5tb3ZlKG1vdmUuZnJvbSwgbW92ZS50byk7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5kb01vdmVGRU4gPSBmdW5jdGlvbiAobW92ZSkge1xuICAgICAgICB0aGlzLnRyeU1vdmVGRU4obW92ZS5mcm9tLCBtb3ZlLnRvKTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLm1vdmUgPSBmdW5jdGlvbiAoZnJvbSwgdG8sIHNpbXVsYXRlZE1vdmUpIHtcbiAgICAgICAgaWYgKHNpbXVsYXRlZE1vdmUgPT09IHZvaWQgMCkgeyBzaW11bGF0ZWRNb3ZlID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKCFmcm9tIHx8ICF0bylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCFmcm9tLnBpZWNlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIgbW92aW5nUGllY2UgPSBmcm9tLnBpZWNlO1xuICAgICAgICAvLyBBZGQgdGhlIG1vdmUgdG8gdGhlIGhpc3RvcnlcbiAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2goW10pO1xuICAgICAgICAvLyB0aGlzLmZvckVhY2hQaWVjZSggcGllY2UgPT4ge1xuICAgICAgICAvLyBcdHBpZWNlLkJlZm9yZVBpZWNlTW92ZWQobW92aW5nUGllY2UsIHRvKTtcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIHZhciByZXN1bHQgPSBtb3ZpbmdQaWVjZS5tb3ZlKHRvKTtcbiAgICAgICAgLy8gdGhpcy5mb3JFYWNoUGllY2UoIHBpZWNlID0+IHtcbiAgICAgICAgLy8gXHRwaWVjZS5BZnRlclBpZWNlTW92ZWQobW92aW5nUGllY2UsIHRvKTtcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5hZGRIaXN0b3J5ID0gZnVuY3Rpb24gKHBpZWNlLCBkYXRhKSB7XG4gICAgICAgIHZhciBoaXN0b3J5ID0ge1xuICAgICAgICAgICAgcGllY2U6IHBpZWNlLFxuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeS5sZW5ndGggLSAxXS5wdXNoKGhpc3RvcnkpO1xuICAgIH07XG4gICAgLy8gcHVzaEhpc3RvcnkocGllY2UsIGRhdGEpXG4gICAgLy8ge1xuICAgIC8vIFx0dmFyIGhpc3RvcnlFdmVudCA9IHtcbiAgICAvLyBcdFx0cGllY2U6IHBpZWNlLFxuICAgIC8vIFx0XHR0eXBlOiB0eXBlLFxuICAgIC8vIFx0XHRkYXRhOiBkYXRhLFxuICAgIC8vIFx0fTtcbiAgICAvLyBcdHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMV0ucHVzaChoaXN0b3J5RXZlbnQpO1xuICAgIC8vIH1cbiAgICAvLyBwb3BIaXN0b3J5KClcbiAgICAvLyB7XG4gICAgLy8gXHR2YXIgaGlzdG9yeSA9IHRoaXMuaGlzdG9yeS5wb3AoKVxuICAgIC8vIFx0aGlzdG9yeS5waWVjZS51bmRvKGhpc3RvcnkuZGF0YSk7XG4gICAgLy8gXHRyZXR1cm4gaGlzdG9yeTtcbiAgICAvLyB9XG4gICAgLy8gbmV3SGlzdG9yeSgpXG4gICAgLy8ge1xuICAgIC8vIFx0dGhpcy5oaXN0b3J5LnB1c2goW10pO1xuICAgIC8vIH1cbiAgICAvLyBVbmRvIHRoZSBsYXN0IGFjdGlvbnMuXG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUudW5kbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGhpc3RvcnkgPSB0aGlzLmhpc3RvcnkucG9wKCk7XG4gICAgICAgIGlmICghaGlzdG9yeSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGhpc3RvcnlTaXplID0gaGlzdG9yeS5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGlzdG9yeVNpemU7ICsraSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50ID0gaGlzdG9yeS5wb3AoKTtcbiAgICAgICAgICAgIGV2ZW50LnBpZWNlLnVuZG8oZXZlbnQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhpc3Rvcnk7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5tb3ZlRkVOID0gZnVuY3Rpb24gKGZyb20sIHRvLCBzaW11bGF0ZWRNb3ZlKSB7XG4gICAgICAgIGlmIChzaW11bGF0ZWRNb3ZlID09PSB2b2lkIDApIHsgc2ltdWxhdGVkTW92ZSA9IGZhbHNlOyB9XG4gICAgICAgIHZhciBmcm9tU3F1YXJlID0gdGhpcy5GRU5Ub1NxdWFyZShmcm9tKTtcbiAgICAgICAgdmFyIHRvU3F1YXJlID0gdGhpcy5GRU5Ub1NxdWFyZSh0byk7XG4gICAgICAgIHJldHVybiB0aGlzLm1vdmUoZnJvbVNxdWFyZSwgdG9TcXVhcmUsIHNpbXVsYXRlZE1vdmUpO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUudHJ5TW92ZSA9IGZ1bmN0aW9uIChmcm9tLCB0bywgc2ltdWxhdGVkTW92ZSkge1xuICAgICAgICBpZiAoc2ltdWxhdGVkTW92ZSA9PT0gdm9pZCAwKSB7IHNpbXVsYXRlZE1vdmUgPSBmYWxzZTsgfVxuICAgICAgICBpZiAoIXRoaXMuaXNWYWxpZE1vdmUoZnJvbSwgdG8pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5tb3ZlKGZyb20sIHRvLCBzaW11bGF0ZWRNb3ZlKTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLnRyeU1vdmVGRU4gPSBmdW5jdGlvbiAoZnJvbSwgdG8sIHNpbXVsYXRlZE1vdmUpIHtcbiAgICAgICAgaWYgKHNpbXVsYXRlZE1vdmUgPT09IHZvaWQgMCkgeyBzaW11bGF0ZWRNb3ZlID0gZmFsc2U7IH1cbiAgICAgICAgdmFyIGZyb21TcXVhcmUgPSB0aGlzLkZFTlRvU3F1YXJlKGZyb20pO1xuICAgICAgICB2YXIgdG9TcXVhcmUgPSB0aGlzLkZFTlRvU3F1YXJlKHRvKTtcbiAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWRNb3ZlKGZyb21TcXVhcmUsIHRvU3F1YXJlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm1vdmUoZnJvbVNxdWFyZSwgdG9TcXVhcmUsIHNpbXVsYXRlZE1vdmUpO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuZ2V0QWxsb3dlZE1vdmVzT2YgPSBmdW5jdGlvbiAocGllY2UpIHtcbiAgICAgICAgcmV0dXJuIHBpZWNlLmdldEFsbG93ZWRNb3ZlcygpLm1hcChmdW5jdGlvbiAodG9TcXVhcmUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZnJvbTogcGllY2Uuc3F1YXJlLFxuICAgICAgICAgICAgICAgIHRvOiB0b1NxdWFyZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuZ2V0TW92ZXNPZiA9IGZ1bmN0aW9uIChwaWVjZSkge1xuICAgICAgICByZXR1cm4gcGllY2UuZ2V0TGVnYWxNb3ZlcygpLm1hcChmdW5jdGlvbiAodG9TcXVhcmUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZnJvbTogcGllY2Uuc3F1YXJlLFxuICAgICAgICAgICAgICAgIHRvOiB0b1NxdWFyZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuZ2V0TW92ZXNBdEZFTiA9IGZ1bmN0aW9uIChmZW4pIHtcbiAgICAgICAgdmFyIHNxdWFyZSA9IHRoaXMuRkVOVG9TcXVhcmUoZmVuKTtcbiAgICAgICAgaWYgKHNxdWFyZSAmJiBzcXVhcmUucGllY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEFsbG93ZWRNb3Zlc09mKHNxdWFyZS5waWVjZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuZ2V0RkVOTW92ZXNhdEZFTiA9IGZ1bmN0aW9uIChmZW4pIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TW92ZXNBdEZFTihmZW4pLm1hcChmdW5jdGlvbiAobW92ZSkge1xuICAgICAgICAgICAgbW92ZS5mcm9tID0gX3RoaXMuUG9zaXRpb25Ub0ZFTihtb3ZlLmZyb20ueCwgbW92ZS5mcm9tLnkpO1xuICAgICAgICAgICAgbW92ZS50byA9IF90aGlzLlBvc2l0aW9uVG9GRU4obW92ZS50by54LCBtb3ZlLnRvLnkpO1xuICAgICAgICAgICAgcmV0dXJuIG1vdmU7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuZ2V0TW92ZXMgPSBmdW5jdGlvbiAoY29sb3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGNvbG9yID09PSB2b2lkIDApIHsgY29sb3IgPSBudWxsOyB9XG4gICAgICAgIHZhciBtb3ZlcyA9IFtdO1xuICAgICAgICB0aGlzLmZvckVhY2hQaWVjZShmdW5jdGlvbiAocGllY2UpIHtcbiAgICAgICAgICAgIGlmIChjb2xvciAhPT0gbnVsbCAmJiBjb2xvciAhPSBwaWVjZS5jb2xvcikge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJub3Qgc2FtZSBjb2xvcj9cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW92ZXMucHVzaC5hcHBseShtb3ZlcywgX3RoaXMuZ2V0QWxsb3dlZE1vdmVzT2YocGllY2UpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtb3ZlcztcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLmdldE1vdmVzRkVOID0gZnVuY3Rpb24gKGNvbG9yKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChjb2xvciA9PT0gdm9pZCAwKSB7IGNvbG9yID0gbnVsbDsgfVxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNb3Zlcyhjb2xvcikubWFwKGZ1bmN0aW9uIChtb3ZlKSB7XG4gICAgICAgICAgICBtb3ZlLmZyb20gPSBfdGhpcy5Qb3NpdGlvblRvRkVOKG1vdmUuZnJvbS54LCBtb3ZlLmZyb20ueSk7XG4gICAgICAgICAgICBtb3ZlLnRvID0gX3RoaXMuUG9zaXRpb25Ub0ZFTihtb3ZlLnRvLngsIG1vdmUudG8ueSk7XG4gICAgICAgICAgICByZXR1cm4gbW92ZTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5Qb3NpdGlvblRvRkVOID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhckluZGV4KHgpICsgKHRoaXMuYm9hcmRTaXplLnkgLSB5KTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLkZFTnRvUG9zaXRpb24gPSBmdW5jdGlvbiAoZmVuKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiB0aGlzLmluZGV4T2ZDaGFyKGZlblswXSksXG4gICAgICAgICAgICB5OiAodGhpcy5ib2FyZFNpemUueSAtIGZlblsxXSlcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIENoZXNzYm9hcmQucHJvdG90eXBlLkZFTlRvU3F1YXJlID0gZnVuY3Rpb24gKGZlbikge1xuICAgICAgICB2YXIgcG9zaXRpb24gPSB0aGlzLkZFTnRvUG9zaXRpb24oZmVuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3F1YXJlKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuU3F1YXJlVG9GRU4gPSBmdW5jdGlvbiAoc3F1YXJlKSB7XG4gICAgICAgIHZhciBwb3NpdGlvbiA9IHNxdWFyZS5nZXRQb3NpdGlvbigpO1xuICAgICAgICByZXR1cm4gdGhpcy5Qb3NpdGlvblRvRkVOKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuY2hhckluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHJldHVybiBDaGVzc2JvYXJkLlNJREVbaW5kZXhdO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuaW5kZXhPZkNoYXIgPSBmdW5jdGlvbiAoY2hhcikge1xuICAgICAgICByZXR1cm4gQ2hlc3Nib2FyZC5TSURFLmluZGV4T2YoY2hhcik7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5jbGVhckRlYnVnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHNxdWFyZSkge1xuICAgICAgICAgICAgc3F1YXJlLmRlYnVnID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuZGVidWdTcXVhcmUgPSBmdW5jdGlvbiAoc3F1YXJlLCBkZWJ1Z0NvbG9yKSB7XG4gICAgICAgIHNxdWFyZS5kZWJ1ZyA9IGRlYnVnQ29sb3I7XG4gICAgfTtcbiAgICBDaGVzc2JvYXJkLnByb3RvdHlwZS5kZWJ1Z0ZFTiA9IGZ1bmN0aW9uIChmZW4sIGRlYnVnQ29sb3IpIHtcbiAgICAgICAgdmFyIHNxdWFyZSA9IHRoaXMuRkVOVG9TcXVhcmUoZmVuKTtcbiAgICAgICAgaWYgKHNxdWFyZSkge1xuICAgICAgICAgICAgc3F1YXJlLmRlYnVnID0gZGVidWdDb2xvcjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5wcm90b3R5cGUuZGVidWdNb3ZlcyA9IGZ1bmN0aW9uIChmZW4sIGRlYnVnQ29sb3IpIHtcbiAgICAgICAgdmFyIHNxdWFyZSA9IHRoaXMuRkVOVG9TcXVhcmUoZmVuKTtcbiAgICAgICAgaWYgKHNxdWFyZSAmJiBzcXVhcmUucGllY2UpIHtcbiAgICAgICAgICAgIHZhciBwaWVjZSA9IHNxdWFyZS5nZXRQaWVjZSgpO1xuICAgICAgICAgICAgdmFyIG1vdmVzID0gcGllY2UuZ2V0TGVnYWxNb3ZlcygpO1xuICAgICAgICAgICAgbW92ZXMuZm9yRWFjaChmdW5jdGlvbiAoc3F1YXJlKSB7XG4gICAgICAgICAgICAgICAgc3F1YXJlLmRlYnVnID0gZGVidWdDb2xvcjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgQ2hlc3Nib2FyZC5TSURFID0gXCJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5elwiO1xuICAgIENoZXNzYm9hcmQuUkFOS1MgPSBbXCJQYXduXCIsIFwiS25pZ2h0XCIsIFwiQmlzaG9wXCIsIFwiUm9va1wiLCBcIlF1ZWVuXCIsIFwiS2luZ1wiXTtcbiAgICBDaGVzc2JvYXJkLlBJRUNFUyA9IHtcbiAgICAgICAgUDogUGF3bl8xLlBhd25QaWVjZSxcbiAgICAgICAgQjogQmlzaG9wXzEuQmlzaG9wUGllY2UsXG4gICAgICAgIE46IEtuaWdodF8xLktuaWdodFBpZWNlLFxuICAgICAgICBSOiBSb29rXzEuUm9va1BpZWNlLFxuICAgICAgICBROiBRdWVlbl8xLlF1ZWVuUGllY2UsXG4gICAgICAgIEs6IEtpbmdfMS5LaW5nUGllY2UsXG4gICAgfTtcbiAgICByZXR1cm4gQ2hlc3Nib2FyZDtcbn0oKSk7XG5leHBvcnRzLkNoZXNzYm9hcmQgPSBDaGVzc2JvYXJkO1xuO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1DaGVzc2JvYXJkLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBVdGlsc18xID0gcmVxdWlyZShcIi4vVXRpbHNcIik7XG52YXIgQ2hlc3NNb3ZlRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENoZXNzTW92ZUV2ZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENoZXNzTW92ZUV2ZW50KGZyb20sIHRvKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmZyb20gPSBudWxsO1xuICAgICAgICBfdGhpcy50byA9IG51bGw7XG4gICAgICAgIF90aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICBfdGhpcy50byA9IHRvO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBDaGVzc01vdmVFdmVudDtcbn0oVXRpbHNfMS5DaGVzc0V2ZW50KSk7XG5leHBvcnRzLkNoZXNzTW92ZUV2ZW50ID0gQ2hlc3NNb3ZlRXZlbnQ7XG47XG52YXIgQ2hlc3NQcm9tb3RlRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENoZXNzUHJvbW90ZUV2ZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENoZXNzUHJvbW90ZUV2ZW50KHNxdWFyZSwgcGllY2UsIGZlbikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5mZW4gPSBudWxsO1xuICAgICAgICBfdGhpcy5waWVjZSA9IG51bGw7XG4gICAgICAgIF90aGlzLnNxdWFyZSA9IG51bGw7XG4gICAgICAgIF90aGlzLmZlbiA9IGZlbjtcbiAgICAgICAgX3RoaXMucGllY2UgPSBwaWVjZTtcbiAgICAgICAgX3RoaXMuc3F1YXJlID0gc3F1YXJlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBDaGVzc1Byb21vdGVFdmVudDtcbn0oVXRpbHNfMS5DaGVzc0V2ZW50KSk7XG5leHBvcnRzLkNoZXNzUHJvbW90ZUV2ZW50ID0gQ2hlc3NQcm9tb3RlRXZlbnQ7XG47XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50cy5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8gRGVmaW5lIE1vdmVtZW50IFZlY3RvcnNcbnZhciBNb3ZlbWVudFZlY3RvcnMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTW92ZW1lbnRWZWN0b3JzKCkge1xuICAgIH1cbiAgICBNb3ZlbWVudFZlY3RvcnMuRGlhZ29uYWwgPSBbWzEsIDFdLCBbMSwgLTFdLCBbLTEsIC0xXSwgWy0xLCAxXV07XG4gICAgTW92ZW1lbnRWZWN0b3JzLkxhdGVyYWwgPSBbWzAsIDFdLCBbMCwgLTFdLCBbMSwgMF0sIFstMSwgMF1dO1xuICAgIE1vdmVtZW50VmVjdG9ycy5PbW5pID0gTW92ZW1lbnRWZWN0b3JzLkRpYWdvbmFsLmNvbmNhdChNb3ZlbWVudFZlY3RvcnMuTGF0ZXJhbCk7XG4gICAgcmV0dXJuIE1vdmVtZW50VmVjdG9ycztcbn0oKSk7XG5leHBvcnRzLk1vdmVtZW50VmVjdG9ycyA9IE1vdmVtZW50VmVjdG9ycztcbjtcbnZhciBDT0xPUlMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ09MT1JTKCkge1xuICAgIH1cbiAgICBDT0xPUlMuZ2V0Q29sb3IgPSBmdW5jdGlvbiAoY29sb3IpIHtcbiAgICAgICAgcmV0dXJuIENPTE9STUFQW2NvbG9yXTtcbiAgICB9O1xuICAgIENPTE9SUy5nZXROYW1lID0gZnVuY3Rpb24gKGNvbG9yKSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoQ09MT1JNQVApO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGtleXNfMSA9IGtleXM7IF9pIDwga2V5c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGtleSA9IGtleXNfMVtfaV07XG4gICAgICAgICAgICBpZiAoQ09MT1JNQVBba2V5XSA9PSBjb2xvcilcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIH07XG4gICAgQ09MT1JTLkJMQUNLID0gMDtcbiAgICBDT0xPUlMuV0hJVEUgPSAxO1xuICAgIENPTE9SUy5HUkVFTiA9IDI7XG4gICAgQ09MT1JTLk9SQU5HRSA9IDM7XG4gICAgcmV0dXJuIENPTE9SUztcbn0oKSk7XG5leHBvcnRzLkNPTE9SUyA9IENPTE9SUztcbjtcbnZhciBDT0xPUk1BUCA9IHtcbiAgICB3OiBDT0xPUlMuV0hJVEUsXG4gICAgYjogQ09MT1JTLkJMQUNLLFxuICAgIGc6IENPTE9SUy5HUkVFTixcbiAgICBvOiBDT0xPUlMuT1JBTkdFXG59O1xuLy8gU2ltcGxvZSBQaWVjZSBpbm1wbGVtZW50YXRpb25cbnZhciBQaWVjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQaWVjZShib2FyZCwgc3F1YXJlKSB7XG4gICAgICAgIC8vIEJvYXJkICYgU3F1YXJlIFxuICAgICAgICB0aGlzLmJvYXJkID0gbnVsbDtcbiAgICAgICAgdGhpcy5zcXVhcmUgPSBudWxsO1xuICAgICAgICAvLyBQaWVjZSBkZXNjcmlwdGlvblxuICAgICAgICB0aGlzLm5hbWUgPSBcIlBpZWNlXCI7XG4gICAgICAgIHRoaXMuY29sb3IgPSBudWxsO1xuICAgICAgICB0aGlzLnR5cGUgPSBudWxsO1xuICAgICAgICAvLyBNb3ZlbWVudCBpbmZvcm1hdGlvblxuICAgICAgICB0aGlzLm1vdmVzID0gMDtcbiAgICAgICAgdGhpcy5pbmRleCA9IG51bGw7XG4gICAgICAgIHRoaXMucGllY2VUaW1lciA9IG51bGw7XG4gICAgICAgIHRoaXMubW92ZURlbGF5ID0gNTAwMDtcbiAgICAgICAgdGhpcy5sYXN0TW92ZWQgPSAwO1xuICAgICAgICB0aGlzLmJvYXJkID0gYm9hcmQ7XG4gICAgICAgIHRoaXMuc2V0U3F1YXJlKHNxdWFyZSk7XG4gICAgfVxuICAgIFBpZWNlLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBOb3QgaW1wbGVtZW50ZWRcbiAgICB9O1xuICAgIFBpZWNlLnByb3RvdHlwZS5zZXRTcXVhcmUgPSBmdW5jdGlvbiAoc3F1YXJlKSB7XG4gICAgICAgIGlmICh0aGlzLnNxdWFyZSkge1xuICAgICAgICAgICAgdGhpcy5zcXVhcmUucGllY2UgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzcXVhcmUpIHtcbiAgICAgICAgICAgIHNxdWFyZS5waWVjZSA9IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zcXVhcmUgPSBzcXVhcmU7XG4gICAgfTtcbiAgICBQaWVjZS5wcm90b3R5cGUuc2V0Q29sb3IgPSBmdW5jdGlvbiAoY29sb3IpIHtcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgIH07XG4gICAgUGllY2UucHJvdG90eXBlLmdldENvbG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xvcjtcbiAgICB9O1xuICAgIC8vIE1vdmVzIHBpZWNlIHRvIGEgbmV3IHNxdWFyZVxuICAgIFBpZWNlLnByb3RvdHlwZS5tb3ZlID0gZnVuY3Rpb24gKHNxdWFyZSkge1xuICAgICAgICBpZiAoIXNxdWFyZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gSWYgc3F1YXJlIGhhcyBwaWVjZSBjYXB0dXJlIGl0LlxuICAgICAgICB0aGlzLmNhcHR1cmUoc3F1YXJlKTtcbiAgICAgICAgdGhpcy5hZGRIaXN0b3J5KHtcbiAgICAgICAgICAgIG1vdmU6IHtcbiAgICAgICAgICAgICAgICBmcm9tOiB0aGlzLnNxdWFyZSxcbiAgICAgICAgICAgICAgICB0bzogc3F1YXJlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxhc3RNb3ZlZDogdGhpcy5sYXN0TW92ZWRcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIENoYW5nZSBwb3NpdGlvbnNcbiAgICAgICAgdGhpcy5tb3ZlcysrO1xuICAgICAgICAvLyBDbGVhciBwcmV2aW91cyBzcXVhcmVcbiAgICAgICAgdGhpcy5zcXVhcmUuc2V0UGllY2UobnVsbCk7XG4gICAgICAgIC8vIHNldCBuZXcgcG9zaXRpb25cbiAgICAgICAgdGhpcy5zZXRTcXVhcmUoc3F1YXJlKTtcbiAgICAgICAgdGhpcy5sYXN0TW92ZWQgPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIFBpZWNlLnByb3RvdHlwZS51bmRvID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5tb3ZlKSB7XG4gICAgICAgICAgICB0aGlzLnNxdWFyZS5zZXRQaWVjZShudWxsKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3F1YXJlKGV2ZW50Lm1vdmUuZnJvbSk7XG4gICAgICAgICAgICB0aGlzLmxhc3RNb3ZlZCA9IGV2ZW50Lmxhc3RNb3ZlZDtcbiAgICAgICAgICAgIHRoaXMubW92ZXMtLTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQuY2FwdHVyZWQpIHtcbiAgICAgICAgICAgIGV2ZW50LnNxdWFyZS5zZXRQaWVjZShldmVudC5jYXB0dXJlZCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFBpZWNlLnByb3RvdHlwZS5jYXB0dXJlID0gZnVuY3Rpb24gKHNxdWFyZSkge1xuICAgICAgICBpZiAoIXNxdWFyZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHNxdWFyZS5waWVjZSkge1xuICAgICAgICAgICAgLy8gQWRkIGNhcHR1cmUgdG8gdGhlIGhpc3RvcnlcbiAgICAgICAgICAgIHRoaXMuYWRkSGlzdG9yeSh7XG4gICAgICAgICAgICAgICAgY2FwdHVyZWQ6IHNxdWFyZS5waWVjZSxcbiAgICAgICAgICAgICAgICBzcXVhcmU6IHNxdWFyZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHNxdWFyZS5zZXRQaWVjZShudWxsKTtcbiAgICB9O1xuICAgIFBpZWNlLnByb3RvdHlwZS5nZXRBbGxvd2VkTW92ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmxhc3RNb3ZlZCA+IERhdGUubm93KCkgLSB0aGlzLm1vdmVEZWxheSlcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TGVnYWxNb3ZlcygpO1xuICAgIH07XG4gICAgUGllY2UucHJvdG90eXBlLmdldExlZ2FsTW92ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1vdmVzKCkuZmlsdGVyKGZ1bmN0aW9uIChzcXVhcmUpIHtcbiAgICAgICAgICAgIGlmIChzcXVhcmUucGllY2UgJiYgc3F1YXJlLnBpZWNlLmNvbG9yID09IF90aGlzLmNvbG9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFBpZWNlLnByb3RvdHlwZS5nZXRNb3ZlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpO1xuICAgIH07XG4gICAgUGllY2UucHJvdG90eXBlLmdldE1vdmVzQnlWZWN0b3JzID0gZnVuY3Rpb24gKHZlY3RvcnMsIGxpbWl0KSB7XG4gICAgICAgIGlmIChsaW1pdCA9PT0gdm9pZCAwKSB7IGxpbWl0ID0gdW5kZWZpbmVkOyB9XG4gICAgICAgIHZhciBtb3ZlcyA9IFtdLCBzdGVwcywgdmVjdG9yLCBzcXVhcmU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmVjdG9ycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHN0ZXBzID0gMDtcbiAgICAgICAgICAgIHZlY3RvciA9IHZlY3RvcnNbaV07XG4gICAgICAgICAgICBzcXVhcmUgPSB0aGlzLnNxdWFyZTtcbiAgICAgICAgICAgIC8vIEFkZCBhbGwgc3F1YXJlcyBpbiBwYXRoXG4gICAgICAgICAgICB3aGlsZSAoc3F1YXJlID0gc3F1YXJlLmdldFNpYmxpbmcodmVjdG9yWzBdLCB2ZWN0b3JbMV0pKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNxdWFyZS5nZXRQaWVjZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNxdWFyZSBpcyBvY2N1cGllZCBieSBvcHBvbmVudFxuICAgICAgICAgICAgICAgICAgICBpZiAoc3F1YXJlLmdldFBpZWNlKCkuY29sb3IgIT0gdGhpcy5jb2xvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT2NjdXBpZWQgYnkgb3RoZXIgcGxheWVyIC0gcGllY2UgY2FuIGJlIGNhcHR1cmVkXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3Zlcy5wdXNoKHNxdWFyZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1vdmVzLnB1c2goc3F1YXJlKTtcbiAgICAgICAgICAgICAgICBzdGVwcysrO1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHN0ZXBzIGxpbWl0IGV4Y2VlZGVkXG4gICAgICAgICAgICAgICAgaWYgKGxpbWl0ICYmIHN0ZXBzID49IGxpbWl0KVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbW92ZXM7XG4gICAgfTtcbiAgICBQaWVjZS5wcm90b3R5cGUuZ2V0U3ltYm9sID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gQ09MT1JTLmdldE5hbWUodGhpcy5jb2xvcikgKyB0aGlzLnR5cGU7XG4gICAgfTtcbiAgICBQaWVjZS5wcm90b3R5cGUuQmVmb3JlUGllY2VNb3ZlZCA9IGZ1bmN0aW9uIChwaWVjZSwgc3F1YXJlKSB7XG4gICAgICAgIC8vIE5vdCBpbXBsZW1lbnRlZFxuICAgIH07XG4gICAgUGllY2UucHJvdG90eXBlLkFmdGVyUGllY2VNb3ZlZCA9IGZ1bmN0aW9uIChwaWVjZSwgc3F1YXJlKSB7XG4gICAgICAgIC8vIE5vdCBpbXBsZW1lbnRlZFxuICAgIH07XG4gICAgUGllY2UucHJvdG90eXBlLmFkZEhpc3RvcnkgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICB0aGlzLmJvYXJkLmFkZEhpc3RvcnkodGhpcywgZGF0YSk7XG4gICAgfTtcbiAgICByZXR1cm4gUGllY2U7XG59KCkpO1xuZXhwb3J0cy5QaWVjZSA9IFBpZWNlO1xuO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1QaWVjZS5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgUGllY2VfMSA9IHJlcXVpcmUoXCIuLi9QaWVjZVwiKTtcbnZhciBCaXNob3BQaWVjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQmlzaG9wUGllY2UsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQmlzaG9wUGllY2UoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5uYW1lID0gXCJCaXNob3BcIjtcbiAgICAgICAgX3RoaXMudHlwZSA9IFwiQlwiO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIEJpc2hvcFBpZWNlLnByb3RvdHlwZS5nZXRNb3ZlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TW92ZXNCeVZlY3RvcnMoUGllY2VfMS5Nb3ZlbWVudFZlY3RvcnMuRGlhZ29uYWwpO1xuICAgIH07XG4gICAgcmV0dXJuIEJpc2hvcFBpZWNlO1xufShQaWVjZV8xLlBpZWNlKSk7XG5leHBvcnRzLkJpc2hvcFBpZWNlID0gQmlzaG9wUGllY2U7XG47XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJpc2hvcC5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgUGllY2VfMSA9IHJlcXVpcmUoXCIuLi9QaWVjZVwiKTtcbnZhciBLaW5nUGllY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEtpbmdQaWVjZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBLaW5nUGllY2UoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5uYW1lID0gXCJLaW5nXCI7XG4gICAgICAgIF90aGlzLnR5cGUgPSBcIktcIjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICAvLyBzZXRDYXN0bGluZyhmcm9tLCB0bywgY2FzdGxlZEZyb20sIGNhc3RsZWRUbylcbiAgICAgICAgLy8ge1xuICAgICAgICAvLyBcdHRoaXMuY2FzdGxpbmcgPSB7XG4gICAgICAgIC8vIFx0XHRjYXN0bGluZ2Zyb206IGZyb20sXG4gICAgICAgIC8vIFx0XHRjYXN0bGluZ1RvOiB0byxcbiAgICAgICAgLy8gXHRcdGNhc3RsZWRQaWVjZTogdGhpcyxcbiAgICAgICAgLy8gXHRcdGNhc3RsZWRGcm9tOiBjYXN0bGVkRnJvbSxcbiAgICAgICAgLy8gXHRcdGNhc3RsZWRUbzogY2FzdGxlZFRvLFxuICAgICAgICAvLyBcdH07XG4gICAgICAgIC8vIH1cbiAgICB9XG4gICAgS2luZ1BpZWNlLnByb3RvdHlwZS5tb3ZlID0gZnVuY3Rpb24gKHNxdWFyZSkge1xuICAgICAgICBpZiAoTWF0aC5hYnMoc3F1YXJlLmdldFBvc2l0aW9uKCkueCAtIHRoaXMuc3F1YXJlLmdldFBvc2l0aW9uKCkueCkgPiAxKSB7XG4gICAgICAgICAgICAvLyBDYXN0bGUgTGVmdCByb29rXG4gICAgICAgICAgICBpZiAoc3F1YXJlLmdldFBvc2l0aW9uKCkueCAtIHRoaXMuc3F1YXJlLmdldFBvc2l0aW9uKCkueCA8IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYXN0bGUoLTQsIC0xLCAtMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDYXN0bGUgUmlnaHQgcm9va1xuICAgICAgICAgICAgaWYgKHNxdWFyZS5nZXRQb3NpdGlvbigpLnggLSB0aGlzLnNxdWFyZS5nZXRQb3NpdGlvbigpLnggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FzdGxlKDMsIDEsIDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghX3N1cGVyLnByb3RvdHlwZS5tb3ZlLmNhbGwodGhpcywgc3F1YXJlKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBLaW5nUGllY2UucHJvdG90eXBlLmdldE1vdmVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDYXN0bGluZ01vdmVzKFtbLTEsIDAsIDRdLCBbMSwgMCwgM11dLCAyLCAnUicpO1xuICAgIH07XG4gICAgS2luZ1BpZWNlLnByb3RvdHlwZS5nZXRDYXN0bGluZ01vdmVzID0gZnVuY3Rpb24gKHZlY3RvcnMsIGRpc3RhbmNlLCBjYXN0bGluZ1BpZWNlVHlwZSkge1xuICAgICAgICB2YXIgbW92ZXMgPSB0aGlzLmdldE1vdmVzQnlWZWN0b3JzKFBpZWNlXzEuTW92ZW1lbnRWZWN0b3JzLk9tbmksIDEpO1xuICAgICAgICBpZiAodGhpcy5tb3ZlcyA+IDApXG4gICAgICAgICAgICByZXR1cm4gbW92ZXM7XG4gICAgICAgIHZhciBzdGVwcywgdmVjdG9yLCBzcXVhcmU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmVjdG9ycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHN0ZXBzID0gMDtcbiAgICAgICAgICAgIHZlY3RvciA9IHZlY3RvcnNbaV07XG4gICAgICAgICAgICBzcXVhcmUgPSB0aGlzLnNxdWFyZTtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBjYXN0bGluZyBwaWVjZSBpcyBhdmFpbGFibGVcbiAgICAgICAgICAgIHZhciBjYXN0bGluZ1RhcmdldCA9IHRoaXMuc3F1YXJlLmdldFNpYmxpbmcodmVjdG9yWzBdICogdmVjdG9yWzJdLCB2ZWN0b3JbMV0gKiB2ZWN0b3JbMl0pO1xuICAgICAgICAgICAgaWYgKGNhc3RsaW5nVGFyZ2V0ICYmIGNhc3RsaW5nVGFyZ2V0LnBpZWNlICYmIGNhc3RsaW5nVGFyZ2V0LnBpZWNlLnR5cGUgPT0gY2FzdGxpbmdQaWVjZVR5cGUgJiYgY2FzdGxpbmdUYXJnZXQucGllY2UuY29sb3IgPT0gdGhpcy5jb2xvciAmJiBjYXN0bGluZ1RhcmdldC5waWVjZS5tb3ZlcyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gQWRkIGFsbCBzcXVhcmVzIGluIHBhdGhcbiAgICAgICAgICAgICAgICB3aGlsZSAoc3F1YXJlID0gc3F1YXJlLmdldFNpYmxpbmcodmVjdG9yWzBdLCB2ZWN0b3JbMV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNxdWFyZSBpcyBvY2N1cGllZFxuICAgICAgICAgICAgICAgICAgICBpZiAoc3F1YXJlLmdldFBpZWNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1vdmVzLnB1c2goc3F1YXJlKTtcbiAgICAgICAgICAgICAgICAgICAgc3RlcHMrKztcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc3RlcHMgbGltaXQgZXhjZWVkZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlICYmIHN0ZXBzID49IGRpc3RhbmNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtb3ZlcztcbiAgICB9O1xuICAgIEtpbmdQaWVjZS5wcm90b3R5cGUuY2FzdGxlID0gZnVuY3Rpb24gKHJvb2tQb3NpdGlvbiwga2luZ1Bvc2l0aW9uLCBjYXN0bGVQb3NpdGlvbikge1xuICAgICAgICB2YXIgcm9va1NxdWFyZSA9IHRoaXMuc3F1YXJlLmdldFNpYmxpbmcocm9va1Bvc2l0aW9uLCAwKTtcbiAgICAgICAgdmFyIGtpbmdTcXVhcmUgPSB0aGlzLnNxdWFyZS5nZXRTaWJsaW5nKGtpbmdQb3NpdGlvbiwgMCk7XG4gICAgICAgIHZhciBjYXN0bGluZ1NxdWFyZSA9IHRoaXMuc3F1YXJlLmdldFNpYmxpbmcoY2FzdGxlUG9zaXRpb24sIDApO1xuICAgICAgICAvLyB0aGlzLmFkZEhpc3Rvcnkoe1xuICAgICAgICAvLyBcdGNhc3RsaW5nOiB7XG4gICAgICAgIC8vIFx0XHRyb29rU3F1YXJlOiByb29rU3F1YXJlLFxuICAgICAgICAvLyBcdFx0a2luZ1NxdWFyZToga2luZ1NxdWFyZSxcbiAgICAgICAgLy8gXHRcdGNhc3RsaW5nU3F1YXJlOiBjYXN0bGluZ1NxdWFyZSxcbiAgICAgICAgLy8gXHR9LFxuICAgICAgICAvLyBcdGNhc3RsaW5nOiB0aGlzLmNhbkNhc3RsZSxcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIC8vdGhpcy5zZXRDYXN0bGluZyhyb29rU3F1YXJlLCBraW5nU3F1YXJlLCBjdXJyZW50LCBjYXN0bGluZ1NxdWFyZSk7XG4gICAgICAgIHJvb2tTcXVhcmUucGllY2UubW92ZShraW5nU3F1YXJlKTtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUubW92ZS5jYWxsKHRoaXMsIGNhc3RsaW5nU3F1YXJlKTtcbiAgICB9O1xuICAgIHJldHVybiBLaW5nUGllY2U7XG59KFBpZWNlXzEuUGllY2UpKTtcbmV4cG9ydHMuS2luZ1BpZWNlID0gS2luZ1BpZWNlO1xuO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1LaW5nLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBQaWVjZV8xID0gcmVxdWlyZShcIi4uL1BpZWNlXCIpO1xudmFyIEtuaWdodFBpZWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhLbmlnaHRQaWVjZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBLbmlnaHRQaWVjZSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm5hbWUgPSBcIktuaWdodFwiO1xuICAgICAgICBfdGhpcy50eXBlID0gXCJOXCI7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgS25pZ2h0UGllY2UucHJvdG90eXBlLmdldE1vdmVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNb3Zlc0J5VmVjdG9ycyhLbmlnaHRQaWVjZS5Nb3ZlbWVudFZlY3RvcnMsIDEpO1xuICAgIH07XG4gICAgS25pZ2h0UGllY2UuTW92ZW1lbnRWZWN0b3JzID0gW1sxLCAyXSwgWzEsIC0yXSwgWy0xLCAyXSwgWy0xLCAtMl0sIFsyLCAxXSwgWzIsIC0xXSwgWy0yLCAxXSwgWy0yLCAtMV1dO1xuICAgIHJldHVybiBLbmlnaHRQaWVjZTtcbn0oUGllY2VfMS5QaWVjZSkpO1xuZXhwb3J0cy5LbmlnaHRQaWVjZSA9IEtuaWdodFBpZWNlO1xuO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1LbmlnaHQuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFBpZWNlXzEgPSByZXF1aXJlKFwiLi4vUGllY2VcIik7XG52YXIgRXZlbnRzXzEgPSByZXF1aXJlKFwiLi4vRXZlbnRzXCIpO1xudmFyIFBhd25QaWVjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUGF3blBpZWNlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFBhd25QaWVjZSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm5hbWUgPSBcIlBhd25cIjtcbiAgICAgICAgX3RoaXMudHlwZSA9IFwiUFwiO1xuICAgICAgICBfdGhpcy5lbnBhc3NhbnQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBQYXduUGllY2UucHJvdG90eXBlLm1vdmUgPSBmdW5jdGlvbiAoc3F1YXJlKSB7XG4gICAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5zcXVhcmU7XG4gICAgICAgIC8vIFNldCBlbnBhc3NhbnQgZmxhZyBpZiBpdCB3YXMgYSBiaWcgbW92ZVxuICAgICAgICBpZiAoTWF0aC5hYnMoY3VycmVudC5nZXRQb3NpdGlvbigpLnkgLSBzcXVhcmUuZ2V0UG9zaXRpb24oKS55KSA+IDEpIHtcbiAgICAgICAgICAgIHRoaXMuZW5wYXNzYW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZW5wYXNzYW50ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFfc3VwZXIucHJvdG90eXBlLm1vdmUuY2FsbCh0aGlzLCBzcXVhcmUpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgbW92ZSB3YXMgZW5wYXNzYW50IGNhcHR1cmVcbiAgICAgICAgdmFyIGJhY2sgPSB0aGlzLnNxdWFyZS5nZXRTaWJsaW5nKDAsICh0aGlzLmNvbG9yID09IFBpZWNlXzEuQ09MT1JTLldISVRFID8gMSA6IC0xKSk7XG4gICAgICAgIGlmIChiYWNrICYmIGJhY2sucGllY2UgJiYgYmFjay5waWVjZS5jb2xvciAhPSB0aGlzLmNvbG9yICYmIGJhY2sucGllY2UuZW5wYXNzYW50KSB7XG4gICAgICAgICAgICB0aGlzLmNhcHR1cmUoYmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUXVlZW5pbmdcbiAgICAgICAgdmFyIGZvcndhcmRTcXVhcmUgPSB0aGlzLnNxdWFyZS5nZXRTaWJsaW5nKDAsICh0aGlzLmNvbG9yID09IFBpZWNlXzEuQ09MT1JTLldISVRFID8gLTEgOiAxKSk7XG4gICAgICAgIGlmICghZm9yd2FyZFNxdWFyZSkge1xuICAgICAgICAgICAgdmFyIG5ld1BpZWNlID0gdGhpcy5ib2FyZC5jcmVhdGVQaWVjZShcIlFcIiwgdGhpcy5jb2xvcik7XG4gICAgICAgICAgICBuZXdQaWVjZS5zZXRTcXVhcmUodGhpcy5zcXVhcmUpO1xuICAgICAgICAgICAgdGhpcy5ib2FyZC5vblByb21vdGUuZW1pdChuZXcgRXZlbnRzXzEuQ2hlc3NQcm9tb3RlRXZlbnQodGhpcy5zcXVhcmUsIG5ld1BpZWNlLCB0aGlzLmJvYXJkLlNxdWFyZVRvRkVOKHRoaXMuc3F1YXJlKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgUGF3blBpZWNlLnByb3RvdHlwZS5vbk1vdmVkID0gZnVuY3Rpb24gKHNxdWFyZSkge1xuICAgICAgICB0aGlzLmJvYXJkLmFkZFRvSGlzdG9yeShcIm1vdmVcIiwge1xuICAgICAgICAgICAgbGFzdE1vdmVkOiB0aGlzLmxhc3RNb3ZlZCxcbiAgICAgICAgICAgIG1vdmVzOiB0aGlzLm1vdmVzLFxuICAgICAgICAgICAgZW5wYXNzYW50OiB0aGlzLmVucGFzc2FudCxcbiAgICAgICAgICAgIHBpZWNlOiB0aGlzLFxuICAgICAgICAgICAgZnJvbTogdGhpcy5zcXVhcmUsXG4gICAgICAgICAgICB0bzogc3F1YXJlXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgUGF3blBpZWNlLnByb3RvdHlwZS51bmRvTW92ZSA9IGZ1bmN0aW9uIChtb3ZlKSB7XG4gICAgICAgIHRoaXMuZW5wYXNzYW50ID0gbW92ZS5lbnBhc3NhbnQ7XG4gICAgICAgIHRoaXMubGFzdE1vdmVkID0gbW92ZS5sYXN0TW92ZWQ7XG4gICAgICAgIHRoaXMubW92ZXMgPSBtb3ZlLm1vdmVzO1xuICAgICAgICB0aGlzLnNldFNxdWFyZShtb3ZlLmZyb20pO1xuICAgIH07XG4gICAgUGF3blBpZWNlLnByb3RvdHlwZS5BZnRlclBpZWNlTW92ZWQgPSBmdW5jdGlvbiAocGllY2UsIHNxdWFyZSkge1xuICAgICAgICAvLyBJZiBhbnkgcGllY2UgaXMgbW92ZWQgbm8gZW5wYXNzYW50IG1vdmVzIGFyZSBhbGxvd2VkXG4gICAgICAgIC8vIGlmKHBpZWNlLmNvbG9yICE9IHRoaXMuY29sb3IpXG4gICAgICAgIC8vIHtcbiAgICAgICAgLy8gXHR0aGlzLmVucGFzc2FudCA9IGZhbHNlO1xuICAgICAgICAvLyB9XG4gICAgfTtcbiAgICBQYXduUGllY2UucHJvdG90eXBlLmdldE1vdmVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbW92ZXMgPSBbXTtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICh0aGlzLmNvbG9yID09IFBpZWNlXzEuQ09MT1JTLldISVRFID8gLTEgOiAxKTtcbiAgICAgICAgLy8gMSBGb3J3YXJkXG4gICAgICAgIHZhciBzcXVhcmUxID0gdGhpcy5zcXVhcmUuZ2V0U2libGluZygwLCBkaXJlY3Rpb24pO1xuICAgICAgICBpZiAoc3F1YXJlMSAmJiAhc3F1YXJlMS5waWVjZSkge1xuICAgICAgICAgICAgbW92ZXMucHVzaChzcXVhcmUxKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAyIEZvcndhcmQgKGlmIGRpZG4ndCBtb3ZlIHlldClcbiAgICAgICAgdmFyIHNxdWFyZTIgPSB0aGlzLnNxdWFyZS5nZXRTaWJsaW5nKDAsIGRpcmVjdGlvbiAqIDIpO1xuICAgICAgICBpZiAoc3F1YXJlMiAmJiAhc3F1YXJlMi5waWVjZSAmJiB0aGlzLm1vdmVzID09IDAgJiYgIXNxdWFyZTEucGllY2UpIHtcbiAgICAgICAgICAgIG1vdmVzLnB1c2goc3F1YXJlMik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2FwdHVyZSAxXG4gICAgICAgIHZhciBjYXB0dXJlMSA9IHRoaXMuc3F1YXJlLmdldFNpYmxpbmcoMSwgZGlyZWN0aW9uKTtcbiAgICAgICAgaWYgKGNhcHR1cmUxICYmIGNhcHR1cmUxLnBpZWNlICYmIGNhcHR1cmUxLnBpZWNlLmNvbG9yICE9IHRoaXMuY29sb3IpIHtcbiAgICAgICAgICAgIG1vdmVzLnB1c2goY2FwdHVyZTEpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENhcHR1cmUgMlxuICAgICAgICB2YXIgY2FwdHVyZTIgPSB0aGlzLnNxdWFyZS5nZXRTaWJsaW5nKC0xLCBkaXJlY3Rpb24pO1xuICAgICAgICBpZiAoY2FwdHVyZTIgJiYgY2FwdHVyZTIucGllY2UgJiYgY2FwdHVyZTIucGllY2UuY29sb3IgIT0gdGhpcy5jb2xvcikge1xuICAgICAgICAgICAgbW92ZXMucHVzaChjYXB0dXJlMik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRW4gcGFzc2FudCBjYXB0dXJlIDFcbiAgICAgICAgdmFyIGVucGFzc2FudDEgPSB0aGlzLnNxdWFyZS5nZXRTaWJsaW5nKDEsIDApO1xuICAgICAgICBpZiAoZW5wYXNzYW50MSAmJiBlbnBhc3NhbnQxLnBpZWNlICYmIGVucGFzc2FudDEucGllY2UuY29sb3IgIT0gdGhpcy5jb2xvciAmJiBlbnBhc3NhbnQxLnBpZWNlLm1vdmVzID09IDEgJiYgZW5wYXNzYW50MS5waWVjZS5lbnBhc3NhbnQpIHtcbiAgICAgICAgICAgIG1vdmVzLnB1c2godGhpcy5zcXVhcmUuZ2V0U2libGluZygxLCBkaXJlY3Rpb24pKTtcbiAgICAgICAgfVxuICAgICAgICAvLy8gRW4gcGFzc2FudCBjYXB0dXJlIDJcbiAgICAgICAgdmFyIGVucGFzc2FudDIgPSB0aGlzLnNxdWFyZS5nZXRTaWJsaW5nKC0xLCAwKTtcbiAgICAgICAgaWYgKGVucGFzc2FudDIgJiYgZW5wYXNzYW50Mi5waWVjZSAmJiBlbnBhc3NhbnQyLnBpZWNlLmNvbG9yICE9IHRoaXMuY29sb3IgJiYgZW5wYXNzYW50Mi5waWVjZS5tb3ZlcyA9PSAxICYmIGVucGFzc2FudDIucGllY2UuZW5wYXNzYW50KSB7XG4gICAgICAgICAgICBtb3Zlcy5wdXNoKHRoaXMuc3F1YXJlLmdldFNpYmxpbmcoLTEsIGRpcmVjdGlvbikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtb3ZlcztcbiAgICB9O1xuICAgIHJldHVybiBQYXduUGllY2U7XG59KFBpZWNlXzEuUGllY2UpKTtcbmV4cG9ydHMuUGF3blBpZWNlID0gUGF3blBpZWNlO1xuO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1QYXduLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBQaWVjZV8xID0gcmVxdWlyZShcIi4uL1BpZWNlXCIpO1xudmFyIFF1ZWVuUGllY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFF1ZWVuUGllY2UsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUXVlZW5QaWVjZSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm5hbWUgPSBcIlF1ZWVuXCI7XG4gICAgICAgIF90aGlzLnR5cGUgPSBcIlFcIjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBRdWVlblBpZWNlLnByb3RvdHlwZS5nZXRNb3ZlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TW92ZXNCeVZlY3RvcnMoUGllY2VfMS5Nb3ZlbWVudFZlY3RvcnMuT21uaSk7XG4gICAgfTtcbiAgICByZXR1cm4gUXVlZW5QaWVjZTtcbn0oUGllY2VfMS5QaWVjZSkpO1xuZXhwb3J0cy5RdWVlblBpZWNlID0gUXVlZW5QaWVjZTtcbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UXVlZW4uanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFBpZWNlXzEgPSByZXF1aXJlKFwiLi4vUGllY2VcIik7XG52YXIgUm9va1BpZWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSb29rUGllY2UsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUm9va1BpZWNlKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMubmFtZSA9IFwiUm9va1wiO1xuICAgICAgICBfdGhpcy50eXBlID0gXCJSXCI7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgUm9va1BpZWNlLnByb3RvdHlwZS5nZXRNb3ZlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TW92ZXNCeVZlY3RvcnMoUGllY2VfMS5Nb3ZlbWVudFZlY3RvcnMuTGF0ZXJhbCk7XG4gICAgfTtcbiAgICByZXR1cm4gUm9va1BpZWNlO1xufShQaWVjZV8xLlBpZWNlKSk7XG5leHBvcnRzLlJvb2tQaWVjZSA9IFJvb2tQaWVjZTtcbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Um9vay5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFBvc2l0aW9ucyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQb3NpdGlvbnMoKSB7XG4gICAgfVxuICAgIFBvc2l0aW9ucy5kZWZhdWx0ID0gW1xuICAgICAgICBbXCJiUlwiLCBcImJOXCIsIFwiYkJcIiwgXCJiUVwiLCBcImJLXCIsIFwiYkJcIiwgXCJiTlwiLCBcImJSXCJdLFxuICAgICAgICBbXCJiUFwiLCBcImJQXCIsIFwiYlBcIiwgXCJiUFwiLCBcImJQXCIsIFwiYlBcIiwgXCJiUFwiLCBcImJQXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIndQXCIsIFwid1BcIiwgXCJ3UFwiLCBcIndQXCIsIFwid1BcIiwgXCJ3UFwiLCBcIndQXCIsIFwid1BcIl0sXG4gICAgICAgIFtcIndSXCIsIFwid05cIiwgXCJ3QlwiLCBcIndRXCIsIFwid0tcIiwgXCJ3QlwiLCBcIndOXCIsIFwid1JcIl0sXG4gICAgXTtcbiAgICBQb3NpdGlvbnMuY2FzdGxpbmcgPSBbXG4gICAgICAgIFtcImJSXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiYktcIiwgXCJcIiwgXCJcIiwgXCJiUlwiXSxcbiAgICAgICAgW1wiYlBcIiwgXCJiUFwiLCBcImJQXCIsIFwiYlBcIiwgXCJiUFwiLCBcImJQXCIsIFwiYlBcIiwgXCJiUFwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJ3UFwiLCBcIndQXCIsIFwid1BcIiwgXCJ3UFwiLCBcIndQXCIsIFwid1BcIiwgXCJ3UFwiLCBcIndQXCJdLFxuICAgICAgICBbXCJ3UlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIndLXCIsIFwiXCIsIFwiXCIsIFwid1JcIl0sXG4gICAgXTtcbiAgICBQb3NpdGlvbnMuc2luZ2xlUGF3biA9IFtcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwid1BcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICBdO1xuICAgIFBvc2l0aW9ucy5wYXduU2FjcmFmaWNlID0gW1xuICAgICAgICBbXCJiUFwiLCBcImJQXCIsIFwiYlBcIiwgXCJiUFwiLCBcImJQXCIsIFwiYlBcIiwgXCJiUFwiLCBcImJQXCJdLFxuICAgICAgICBbXCJiUFwiLCBcImJQXCIsIFwiYlBcIiwgXCJiUFwiLCBcImJQXCIsIFwiYlBcIiwgXCJiUFwiLCBcImJQXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIndQXCIsIFwid1BcIiwgXCJ3UFwiLCBcIndQXCIsIFwid1BcIiwgXCJ3UFwiLCBcIndQXCIsIFwid1BcIl0sXG4gICAgICAgIFtcIndQXCIsIFwid1BcIiwgXCJ3UFwiLCBcIndQXCIsIFwid1BcIiwgXCJ3UFwiLCBcIndQXCIsIFwid1BcIl0sXG4gICAgXTtcbiAgICBQb3NpdGlvbnMuc2luZ2xlUXVlZW4gPSBbXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwid1FcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgXTtcbiAgICBQb3NpdGlvbnMucXVlZW5TYWNyYWZpY2UgPSBbXG4gICAgICAgIFtcImJRXCIsIFwiYlFcIiwgXCJiUVwiLCBcImJRXCIsIFwiYlFcIiwgXCJiUVwiLCBcImJRXCIsIFwiYlFcIl0sXG4gICAgICAgIFtcImJRXCIsIFwiYlFcIiwgXCJiUVwiLCBcImJRXCIsIFwiYlFcIiwgXCJiUVwiLCBcImJRXCIsIFwiYlFcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wid1FcIiwgXCJ3UVwiLCBcIndRXCIsIFwid1FcIiwgXCJ3UVwiLCBcIndRXCIsIFwid1FcIiwgXCJ3UVwiXSxcbiAgICAgICAgW1wid1FcIiwgXCJ3UVwiLCBcIndRXCIsIFwid1FcIiwgXCJ3UVwiLCBcIndRXCIsIFwid1FcIiwgXCJ3UVwiXSxcbiAgICBdO1xuICAgIFBvc2l0aW9ucy5zaW5nbGVCaXNob3AgPSBbXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJiUFwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiYlBcIiwgXCJ3QlwiLCBcImJQXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJiUFwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiYlBcIiwgXCJcIiwgXCJiUFwiLCBcIlwiLCBcImJQXCIsIFwiXCIsIFwiYlBcIl0sXG4gICAgICAgIFtcImJQXCIsIFwiXCIsIFwiYlBcIiwgXCJcIiwgXCJiUFwiLCBcIlwiLCBcImJQXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJiUFwiLCBcIlwiLCBcImJQXCIsIFwiXCIsIFwiYlBcIiwgXCJcIiwgXCJiUFwiXSxcbiAgICBdO1xuICAgIFBvc2l0aW9ucy5zaW5nbGVSb29rID0gW1xuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJ3UlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgIF07XG4gICAgUG9zaXRpb25zLnNpbmdsZUtpbmcgPSBbXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIndLXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgXTtcbiAgICBQb3NpdGlvbnMuc2luZ2xlS25pZ2h0ID0gW1xuICAgICAgICBbXCJcIiwgXCJcIiwgXCJiUFwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiYlBcIiwgXCJcIiwgXCJiUFwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiYlBcIiwgXCJiUFwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwid05cIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICBdO1xuICAgIHJldHVybiBQb3NpdGlvbnM7XG59KCkpO1xuZXhwb3J0cy5Qb3NpdGlvbnMgPSBQb3NpdGlvbnM7XG47XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBvc2l0aW9ucy5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFNxdWFyZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTcXVhcmUoYm9hcmQsIHgsIHkpIHtcbiAgICAgICAgdGhpcy5waWVjZSA9IG51bGw7XG4gICAgICAgIHRoaXMuYm9hcmQgPSBudWxsO1xuICAgICAgICB0aGlzLnggPSAtMTtcbiAgICAgICAgdGhpcy55ID0gLTE7XG4gICAgICAgIHRoaXMuYm9hcmQgPSBib2FyZDtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICB9XG4gICAgU3F1YXJlLnByb3RvdHlwZS5zZXRQaWVjZSA9IGZ1bmN0aW9uIChwaWVjZSkge1xuICAgICAgICB0aGlzLnBpZWNlID0gcGllY2U7XG4gICAgfTtcbiAgICBTcXVhcmUucHJvdG90eXBlLmdldFBpZWNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5waWVjZTtcbiAgICB9O1xuICAgIFNxdWFyZS5wcm90b3R5cGUuZ2V0U2libGluZyA9IGZ1bmN0aW9uIChvZmZzZXRYLCBvZmZzZXRZKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJvYXJkLmdldFNxdWFyZSh0aGlzLnggKyBvZmZzZXRYLCB0aGlzLnkgKyBvZmZzZXRZKTtcbiAgICB9O1xuICAgIFNxdWFyZS5wcm90b3R5cGUuZ2V0Q29sb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB4b3IgPSBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gIWEgIT0gIWI7IH07XG4gICAgICAgIHJldHVybiB4b3IodGhpcy54ICUgMiwgdGhpcy55ICUgMikgPyAndycgOiAnYic7XG4gICAgfTtcbiAgICBTcXVhcmUucHJvdG90eXBlLmdldFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogdGhpcy54LFxuICAgICAgICAgICAgeTogdGhpcy55XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBTcXVhcmUucHJvdG90eXBlLmdldEZFTlBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ib2FyZC5Qb3NpdGlvblRvRkVOKHRoaXMueCwgdGhpcy55KTtcbiAgICB9O1xuICAgIHJldHVybiBTcXVhcmU7XG59KCkpO1xuZXhwb3J0cy5TcXVhcmUgPSBTcXVhcmU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNxdWFyZS5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIENoZXNzRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ2hlc3NFdmVudCgpIHtcbiAgICAgICAgdGhpcy5tZXNzYWdlT2JqZWN0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fZGVmYXVsdFBlcnZlbnRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9zaG91bGRQcm9wYWdhdGUgPSB0cnVlO1xuICAgIH1cbiAgICBDaGVzc0V2ZW50LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fZGVmYXVsdFBlcnZlbnRlZCA9IHRydWU7XG4gICAgfTtcbiAgICBDaGVzc0V2ZW50LnByb3RvdHlwZS5pc1ByZXZlbnRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZmF1bHRQZXJ2ZW50ZWQ7XG4gICAgfTtcbiAgICBDaGVzc0V2ZW50LnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5tZXNzYWdlT2JqZWN0KSB7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VPYmplY3QoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ2hlc3NFdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9zaG91bGRQcm9wYWdhdGUgPSBmYWxzZTtcbiAgICB9O1xuICAgIENoZXNzRXZlbnQucHJvdG90eXBlLnNob3VsZFByb3BhZ2F0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Nob3VsZFByb3BhZ2F0ZTtcbiAgICB9O1xuICAgIHJldHVybiBDaGVzc0V2ZW50O1xufSgpKTtcbmV4cG9ydHMuQ2hlc3NFdmVudCA9IENoZXNzRXZlbnQ7XG47XG52YXIgQ2hlc3NFdmVudEVtaXR0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ2hlc3NFdmVudEVtaXR0ZXIoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gW107XG4gICAgfVxuICAgIENoZXNzRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gKGV2ZW50LCBtZXNzYWdlT2JqZWN0KSB7XG4gICAgICAgIGlmIChtZXNzYWdlT2JqZWN0ID09PSB2b2lkIDApIHsgbWVzc2FnZU9iamVjdCA9IG51bGw7IH1cbiAgICAgICAgZXZlbnQubWVzc2FnZU9iamVjdCA9IG1lc3NhZ2VPYmplY3Q7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc2hvdWxkUHJvcGFnYXRlKCkpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ2hlc3NFdmVudEVtaXR0ZXIucHJvdG90eXBlLmJyb2FkY2FzdCA9IGZ1bmN0aW9uIChtZXNzc2FnZSkge1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2soZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENoZXNzRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgICB9O1xuICAgIENoZXNzRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuc3BsaWNlKHRoaXMubGlzdGVuZXJzLmluZGV4T2YoY2FsbGJhY2spLCAxKTtcbiAgICB9O1xuICAgIHJldHVybiBDaGVzc0V2ZW50RW1pdHRlcjtcbn0oKSk7XG5leHBvcnRzLkNoZXNzRXZlbnRFbWl0dGVyID0gQ2hlc3NFdmVudEVtaXR0ZXI7XG47XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVV0aWxzLmpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xufVxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuX19leHBvcnQocmVxdWlyZShcIi4vQ2hlc3Nib2FyZFwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9TcXVhcmVcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vUGllY2VcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vUG9zaXRpb25zXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL0V2ZW50c1wiKSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwiZXhwb3J0cy5DaGVzcyA9IHtcclxuXHRDaGVzczogcmVxdWlyZShcIi4vYnVpbGQvQ2hlc3MvaW5kZXguanNcIiksXHJcblx0Q2hlc3NBSTogcmVxdWlyZShcIi4vYnVpbGQvQ2hlc3NBSS9pbmRleC5qc1wiKSxcclxufTsiLCJleHBvcnQgY2xhc3MgQUlXb3JrZXJcclxue1xyXG5cdGNvbnN0cnVjdG9yKClcclxuXHR7XHJcblx0XHRzZWxmLm9ubWVzc2FnZSA9IChpbnB1dCkgPT4ge1xyXG5cdFx0XHR2YXIgZXZ0ID0gaW5wdXQuZGF0YTtcclxuXHRcdFx0aWYoZXZ0Lm1ldGhvZClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoaXNbZXZ0Lm1ldGhvZF0uYXBwbHkodGhpcywgZXZ0LmFyZ3VtZW50cyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGVtaXQoZXZlbnQsIC4uLiBhcmdzOmFueVtdIClcclxuXHR7XHJcblx0XHRjb25zb2xlLmxvZyh7XHJcblx0XHRcdGV2ZW50OiBldmVudCxcclxuXHRcdFx0YXJndW1lbnRzOiBhcmdzXHJcblx0XHR9KTtcclxuXHRcdHNlbGYucG9zdE1lc3NhZ2Uoe1xyXG5cdFx0XHRldmVudDogZXZlbnQsXHJcblx0XHRcdGFyZ3VtZW50czogYXJnc1xyXG5cdFx0fSwgdW5kZWZpbmVkKTtcclxuXHJcblx0XHRcclxuXHR9XHJcbn07IiwiaW1wb3J0IHsgQ2hlc3Nib2FyZCwgUG9zaXRpb25zLCBDT0xPUlMgfSBmcm9tIFwiQGNoZXNzbGliL2NvcmVcIjtcclxuaW1wb3J0IHsgQ2hlc3NBSSB9IGZyb20gXCIuLi9DaGVzc0FJXCI7XHJcbmltcG9ydCB7IEFJV29ya2VyIH0gZnJvbSBcIi4vVXRpbHMvQUlXb3JrZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDaGVzc0FJV29ya2VyIGV4dGVuZHMgQUlXb3JrZXJcclxue1xyXG5cdGNvbnN0cnVjdG9yKClcclxuXHR7XHJcblx0XHRzdXBlcigpO1xyXG5cdFx0Y29uc29sZS5sb2coXCJDaGVzc0FJV29ya2VyIHJ1bm5pbmcuXCIpO1xyXG5cdH1cclxuXHJcblx0Z2V0QmVzdE1vdmVzKGJvYXJkRGF0YSwgY29sb3IsIHNlYXJjaERlcHRoLCBtb3ZlQ291bnQpXHJcblx0e1xyXG5cdFx0dmFyIGJvYXJkID0gbmV3IENoZXNzYm9hcmQoKTtcclxuXHRcdGJvYXJkLnNldEJvYXJkKGJvYXJkRGF0YSk7XHJcblx0XHR2YXIgYWkgPSBuZXcgQ2hlc3NBSShib2FyZCwgY29sb3IsIDIpO1xyXG5cdFx0dmFyIG1vdmVzID0gYWkuZ2V0QmVzdE1vdmVzKHNlYXJjaERlcHRoLCBtb3ZlQ291bnQpO1xyXG5cdFx0dGhpcy5lbWl0KFwibW92ZXNcIiwgbW92ZXMpO1xyXG5cdFx0XHJcblx0fVxyXG59O1xyXG5cclxuLy8gTGF1bmNoIEFJIFdvcmtlclxyXG52YXIgYWlXb3JrZXIgPSBuZXcgQ2hlc3NBSVdvcmtlcigpOyIsIlxyXG5mdW5jdGlvbiByZXZlcnNlQXJyYXkoYXJyYXkpXHJcbntcclxuICAgIHJldHVybiBhcnJheS5zbGljZSgpLnJldmVyc2UoKTtcclxufTtcclxuXHJcbmV4cG9ydCB2YXIgYm9hcmRFdmFsc1doaXRlID0ge1xyXG5cdFA6IFtcclxuXHRcdFsxMC4wLCAgMTAuMCwgIDEwLjAsICAxMC4wLCAgMTAuMCwgIDEwLjAsICAxMC4wLCAgMTAuMF0sXHJcblx0XHRbNS4wLCAgNS4wLCAgNS4wLCAgNS4wLCAgNS4wLCAgNS4wLCAgNS4wLCAgNS4wXSxcclxuXHRcdFsxLjAsICAxLjAsICAyLjAsICAzLjAsICAzLjAsICAyLjAsICAxLjAsICAxLjBdLFxyXG5cdFx0WzAuNSwgIDAuNSwgIDEuMCwgIDIuNSwgIDIuNSwgIDEuMCwgIDAuNSwgIDAuNV0sXHJcblx0XHRbMC4wLCAgMC4wLCAgMC4wLCAgMi4wLCAgMi4wLCAgMC4wLCAgMC4wLCAgMC4wXSxcclxuXHRcdFswLjUsIC0wLjUsIC0xLjAsICAwLjAsICAwLjAsIC0xLjAsIC0wLjUsICAwLjVdLFxyXG5cdFx0WzAuNSwgIDEuMCwgMS4wLCAgLTIuMCwgLTIuMCwgIDEuMCwgIDEuMCwgIDAuNV0sXHJcblx0XHRbMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wXVxyXG5cdF0sXHJcblxyXG5cdE46IFtcclxuXHRcdFstNS4wLCAtNC4wLCAtMy4wLCAtMy4wLCAtMy4wLCAtMy4wLCAtNC4wLCAtNS4wXSxcclxuXHRcdFstNC4wLCAtMi4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAtMi4wLCAtNC4wXSxcclxuXHRcdFstMy4wLCAgMC4wLCAgMS4wLCAgMS41LCAgMS41LCAgMS4wLCAgMC4wLCAtMy4wXSxcclxuXHRcdFstMy4wLCAgMC41LCAgMS41LCAgMi4wLCAgMi4wLCAgMS41LCAgMC41LCAtMy4wXSxcclxuXHRcdFstMy4wLCAgMC4wLCAgMS41LCAgMi4wLCAgMi4wLCAgMS41LCAgMC4wLCAtMy4wXSxcclxuXHRcdFstMy4wLCAgMC41LCAgMS4wLCAgMS41LCAgMS41LCAgMS4wLCAgMC41LCAtMy4wXSxcclxuXHRcdFstNC4wLCAtMi4wLCAgMC4wLCAgMC41LCAgMC41LCAgMC4wLCAtMi4wLCAtNC4wXSxcclxuXHRcdFstNS4wLCAtNC4wLCAtMy4wLCAtMy4wLCAtMy4wLCAtMy4wLCAtNC4wLCAtNS4wXVxyXG5cdFx0XSxcclxuXHJcblx0QjogW1xyXG5cdFx0WyAtMi4wLCAtMS4wLCAtMS4wLCAtMS4wLCAtMS4wLCAtMS4wLCAtMS4wLCAtMi4wXSxcclxuXHRcdFsgLTEuMCwgIDAuMCwgIDAuMCwgIDAuMCwgIDAuMCwgIDAuMCwgIDAuMCwgLTEuMF0sXHJcblx0XHRbIC0xLjAsICAwLjAsICAwLjUsICAxLjAsICAxLjAsICAwLjUsICAwLjAsIC0xLjBdLFxyXG5cdFx0WyAtMS4wLCAgMC41LCAgMC41LCAgMS4wLCAgMS4wLCAgMC41LCAgMC41LCAtMS4wXSxcclxuXHRcdFsgLTEuMCwgIDAuMCwgIDEuMCwgIDEuMCwgIDEuMCwgIDEuMCwgIDAuMCwgLTEuMF0sXHJcblx0XHRbIC0xLjAsICAxLjAsICAxLjAsICAxLjAsICAxLjAsICAxLjAsICAxLjAsIC0xLjBdLFxyXG5cdFx0WyAtMS4wLCAgMC41LCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC41LCAtMS4wXSxcclxuXHRcdFsgLTIuMCwgLTEuMCwgLTEuMCwgLTEuMCwgLTEuMCwgLTEuMCwgLTEuMCwgLTIuMF1cclxuXHRdLFxyXG5cclxuXHJcblx0UjogW1xyXG5cdFx0WyAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wXSxcclxuXHRcdFsgIDAuNSwgIDEuMCwgIDEuMCwgIDEuMCwgIDEuMCwgIDEuMCwgIDEuMCwgIDAuNV0sXHJcblx0XHRbIC0wLjUsICAwLjAsICAwLjAsICAwLjAsICAwLjAsICAwLjAsICAwLjAsIC0wLjVdLFxyXG5cdFx0WyAtMC41LCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAtMC41XSxcclxuXHRcdFsgLTAuNSwgIDAuMCwgIDAuMCwgIDAuMCwgIDAuMCwgIDAuMCwgIDAuMCwgLTAuNV0sXHJcblx0XHRbIC0wLjUsICAwLjAsICAwLjAsICAwLjAsICAwLjAsICAwLjAsICAwLjAsIC0wLjVdLFxyXG5cdFx0WyAtMC41LCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAtMC41XSxcclxuXHRcdFsgIDAuMCwgICAwLjAsIDAuMCwgIDAuNSwgIDAuNSwgIDAuMCwgIDAuMCwgIDAuMF1cclxuXHRdLFxyXG5cclxuXHJcblx0UTogW1xyXG5cdFx0WyAtMi4wLCAtMS4wLCAtMS4wLCAtMC41LCAtMC41LCAtMS4wLCAtMS4wLCAtMi4wXSxcclxuXHRcdFsgLTEuMCwgIDAuMCwgIDAuMCwgIDAuMCwgIDAuMCwgIDAuMCwgIDAuMCwgLTEuMF0sXHJcblx0XHRbIC0xLjAsICAwLjAsICAwLjUsICAwLjUsICAwLjUsICAwLjUsICAwLjAsIC0xLjBdLFxyXG5cdFx0WyAtMC41LCAgMC4wLCAgMC41LCAgMC41LCAgMC41LCAgMC41LCAgMC4wLCAtMC41XSxcclxuXHRcdFsgIDAuMCwgIDAuMCwgIDAuNSwgIDAuNSwgIDAuNSwgIDAuNSwgIDAuMCwgLTAuNV0sXHJcblx0XHRbIC0xLjAsICAwLjUsICAwLjUsICAwLjUsICAwLjUsICAwLjUsICAwLjAsIC0xLjBdLFxyXG5cdFx0WyAtMS4wLCAgMC4wLCAgMC41LCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAtMS4wXSxcclxuXHRcdFsgLTIuMCwgLTEuMCwgLTEuMCwgLTAuNSwgLTAuNSwgLTEuMCwgLTEuMCwgLTIuMF1cclxuXHRdLFxyXG5cclxuXHRLOiBbXHJcblxyXG5cdFx0WyAtMy4wLCAtNC4wLCAtNC4wLCAtNS4wLCAtNS4wLCAtNC4wLCAtNC4wLCAtMy4wXSxcclxuXHRcdFsgLTMuMCwgLTQuMCwgLTQuMCwgLTUuMCwgLTUuMCwgLTQuMCwgLTQuMCwgLTMuMF0sXHJcblx0XHRbIC0zLjAsIC00LjAsIC00LjAsIC01LjAsIC01LjAsIC00LjAsIC00LjAsIC0zLjBdLFxyXG5cdFx0WyAtMy4wLCAtNC4wLCAtNC4wLCAtNS4wLCAtNS4wLCAtNC4wLCAtNC4wLCAtMy4wXSxcclxuXHRcdFsgLTIuMCwgLTMuMCwgLTMuMCwgLTQuMCwgLTQuMCwgLTMuMCwgLTMuMCwgLTIuMF0sXHJcblx0XHRbIC0xLjAsIC0yLjAsIC0yLjAsIC0yLjAsIC0yLjAsIC0yLjAsIC0yLjAsIC0xLjBdLFxyXG5cdFx0WyAgMi4wLCAgMi4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMC4wLCAgMi4wLCAgMi4wIF0sXHJcblx0XHRbICAyLjAsICAzLjAsICAxLjAsICAwLjAsICAwLjAsICAxLjAsICAzLjAsICAyLjAgXVxyXG5cdF1cclxufTtcclxuXHJcbmV4cG9ydCB2YXIgYm9hcmRFdmFsc0JsYWNrID0ge1xyXG5cdFA6IHJldmVyc2VBcnJheShib2FyZEV2YWxzV2hpdGUuUCksXHJcblx0TjogcmV2ZXJzZUFycmF5KGJvYXJkRXZhbHNXaGl0ZS5OKSxcclxuXHRCOiByZXZlcnNlQXJyYXkoYm9hcmRFdmFsc1doaXRlLkIpLFxyXG5cdFI6IHJldmVyc2VBcnJheShib2FyZEV2YWxzV2hpdGUuUiksXHJcblx0UTogcmV2ZXJzZUFycmF5KGJvYXJkRXZhbHNXaGl0ZS5RKSxcclxuXHRLOiByZXZlcnNlQXJyYXkoYm9hcmRFdmFsc1doaXRlLkspLFxyXG59O1xyXG5cclxuZXhwb3J0IHZhciBCb2FyZEV2YWx1YXRpb25zID0gW1xyXG5cdGJvYXJkRXZhbHNCbGFjayxcclxuXHRib2FyZEV2YWxzV2hpdGUsXHJcbl07IiwiaW1wb3J0IHsgQ2hlc3Nib2FyZCwgUG9zaXRpb25zLCBDT0xPUlMgfSBmcm9tIFwiQGNoZXNzbGliL2NvcmVcIjtcclxuaW1wb3J0IHsgQm9hcmRFdmFsdWF0aW9ucyB9IGZyb20gXCIuL0JvYXJkRXZhbHNcIjtcclxuXHJcbmNvbnN0IFBJRUNFX1ZBTFVFUyA9IHtcclxuXHRQOiAxMCxcclxuXHRCOiAzMCxcclxuXHROOiAzMCxcclxuXHRSOiA1MCxcclxuXHRROiA4MCxcclxuXHRLOiA5MDAsXHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgQ2hlc3NBSVxyXG57XHJcblx0Y2hlc3Nib2FyZDpDaGVzc2JvYXJkID0gbnVsbDtcclxuXHJcblx0bW92ZXMgPSBbXTtcclxuXHRwbGF5aW5nU2lkZSA9IDA7XHJcblx0cGxheWVyQ291bnQgPSAyO1xyXG5cdHNlYXJjaFRpbWUgPSAwO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihjaGVzc2JvYXJkLCBwbGF5aW5nU2lkZSwgcGxheWVyQ291bnQpXHJcblx0e1xyXG5cdFx0dGhpcy5jaGVzc2JvYXJkID0gY2hlc3Nib2FyZDtcclxuXHRcdHRoaXMucGxheWluZ1NpZGUgPSBwbGF5aW5nU2lkZTtcclxuXHRcdHRoaXMucGxheWVyQ291bnQgPSBwbGF5ZXJDb3VudDtcclxuXHR9XHJcblxyXG5cdHNldEJvYXJkKGNoZXNzYm9hcmQpXHJcblx0e1xyXG5cdFx0dGhpcy5jaGVzc2JvYXJkID0gY2hlc3Nib2FyZDtcclxuXHR9XHJcblxyXG5cdGxvYWRCb2FyZChwb3NpdGlvbnMpXHJcblx0e1xyXG5cdFx0dGhpcy5jaGVzc2JvYXJkID0gQ2hlc3Nib2FyZC5mcm9tUG9zaXRpb24ocG9zaXRpb25zKTtcclxuXHR9XHJcblxyXG5cdGRvTW92ZShtb3ZlKVxyXG5cdHtcclxuXHRcdGlmKCF0aGlzLmNoZXNzYm9hcmQuZG9Nb3ZlKG1vdmUpKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHRkb01vdmVGRU4obW92ZSlcclxuXHR7XHJcblx0XHRpZighdGhpcy5jaGVzc2JvYXJkLmRvTW92ZUZFTihtb3ZlKSlcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0bWFrZU1vdmVzKHNlYXJjaERlcHRoPTQsIGFtb3VudCA9IDEpXHJcblx0e1xyXG5cdFx0dmFyIGJlc3RNb3ZlcyA9IHRoaXMuZ2V0QmVzdE1vdmVzKHNlYXJjaERlcHRoLCBhbW91bnQpO1xyXG5cdFx0aWYoIWJlc3RNb3Zlcy5sZW5ndGgpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZvcih2YXIgYmVzdE1vdmUgb2YgYmVzdE1vdmVzKVxyXG5cdFx0e1xyXG5cdFx0XHR0aGlzLmRvTW92ZShiZXN0TW92ZSk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gYmVzdE1vdmVzO1xyXG5cdH1cclxuXHJcblx0Z2V0QmVzdE1vdmUoc2lkZSwgc2VhcmNoRGVwdGgpXHJcblx0e1xyXG5cdFx0XHJcblx0XHR2YXIgYmVzdE1vdmVzID0gdGhpcy5nZXRCZXN0TW92ZXMoc2VhcmNoRGVwdGgpO1xyXG5cclxuXHRcdGlmKCFiZXN0TW92ZXMubGVuZ3RoKVxyXG5cdFx0e1xyXG5cdFx0IFx0cmV0dXJuIHRoaXMuZ2V0UmFuZG9tTW92ZSgpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyB2YXIgYmVzdE1vdmUgPSBudWxsO1xyXG5cdFx0Ly8gdmFyIGJlc3RWYWx1ZSA9IC05OTk5O1xyXG5cdFx0Ly8gaWYobW92ZS5zY29yZSA+IGJlc3RWYWx1ZSlcclxuXHRcdC8vIHtcclxuXHRcdC8vIFx0YmVzdE1vdmUgPSBtb3ZlO1xyXG5cdFx0Ly8gXHRiZXN0VmFsdWUgPSBtb3ZlLnNjb3JlO1xyXG5cdFx0Ly8gfVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gYmVzdE1vdmVzWzBdO1xyXG5cdH1cclxuXHJcblx0Z2V0QmVzdE1vdmVzKHNlYXJjaERlcHRoLCBsaW1pdD01KVxyXG5cdHtcclxuXHRcdHRoaXMuc2VhcmNoVGltZSA9IERhdGUubm93KCkgKyAxMDA7XHJcblx0XHR2YXIgbW92ZXMgPSB0aGlzLmNoZXNzYm9hcmQuZ2V0TW92ZXNGRU4odGhpcy5wbGF5aW5nU2lkZSk7XHJcblx0XHRcclxuXHRcdGZvcihsZXQgbW92ZSBvZiBtb3ZlcylcclxuXHRcdHtcclxuXHRcdFx0dGhpcy5jaGVzc2JvYXJkLm1vdmVGRU4obW92ZS5mcm9tLCBtb3ZlLnRvKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIERvIG5vdCBhbGxvdyB0aGUga2luZyB0byBiZSBraWxsZWQ/XHJcblx0XHRcdG1vdmUuc2NvcmUgPSB0aGlzLmV2YWx1YXRlQmVzdE1vdmUodGhpcy5wbGF5aW5nU2lkZSwgc2VhcmNoRGVwdGggLSAxLCAtMTAwMDAsIDEwMDAwLCBmYWxzZSk7XHJcblx0XHRcdHRoaXMuY2hlc3Nib2FyZC51bmRvKCk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBtb3Zlcy5zb3J0KCAoYSwgYikgPT4ge1xyXG5cdFx0XHRpZihhLnNjb3JlIDwgYi5zY29yZSlcclxuXHRcdFx0XHRyZXR1cm4gMTtcclxuXHRcdFx0aWYoYS5zY29yZSA+IGIuc2NvcmUpXHJcblx0XHRcdFx0cmV0dXJuIC0xO1xyXG5cdFx0XHRyZXR1cm4gMDtcclxuXHRcdH0pLnNsaWNlKDAsIGxpbWl0KTtcclxuXHR9XHJcblx0XHJcblx0Z2V0TmV4dFBsYXllclNpZGUocGxheWVyU2lkZSlcclxuXHR7XHJcblx0XHRyZXR1cm4gKHBsYXllclNpZGUgKyAxKSAlIHRoaXMucGxheWVyQ291bnQ7XHJcblx0fVxyXG5cclxuXHRldmFsdWF0ZUJlc3RNb3ZlKHBsYXllclNpZGUsIGRlcHRoLCBhbHBoYSwgYmV0YSwgaXNNYXhpbWlzaW5nUGxheWVyKVxyXG5cdHtcclxuXHRcdGlmIChkZXB0aCA9PT0gMClcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuZXZhbHVhdGVCb2FyZCh0aGlzLnBsYXlpbmdTaWRlKTtcclxuXHRcdH1cclxuXHRcdHZhciBjdXJyZW50UGxheWVyID0gdGhpcy5nZXROZXh0UGxheWVyU2lkZShwbGF5ZXJTaWRlKTtcclxuXHRcdHZhciBtb3ZlcyA9IHRoaXMuY2hlc3Nib2FyZC5nZXRNb3ZlcyhjdXJyZW50UGxheWVyKTtcclxuXHJcblx0XHRpZiAoaXNNYXhpbWlzaW5nUGxheWVyKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgYmVzdFZhbHVlID0gLTk5OTk7XHJcblx0XHRcdGZvciAobGV0IG1vdmUgb2YgbW92ZXMpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR0aGlzLmNoZXNzYm9hcmQubW92ZShtb3ZlLmZyb20sIG1vdmUudG8pO1xyXG5cdFx0XHRcdGJlc3RWYWx1ZSA9IE1hdGgubWF4KGJlc3RWYWx1ZSwgdGhpcy5ldmFsdWF0ZUJlc3RNb3ZlKGN1cnJlbnRQbGF5ZXIsIGRlcHRoIC0gMSwgYWxwaGEsIGJldGEsICFpc01heGltaXNpbmdQbGF5ZXIpKTtcclxuXHRcdFx0XHR0aGlzLmNoZXNzYm9hcmQudW5kbygpO1xyXG5cdFx0XHRcdGFscGhhID0gTWF0aC5tYXgoYWxwaGEsIGJlc3RWYWx1ZSk7XHJcblx0XHRcdFx0aWYgKGJldGEgPD0gYWxwaGEpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0cmV0dXJuIGJlc3RWYWx1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGJlc3RWYWx1ZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHZhciBiZXN0VmFsdWUgPSA5OTk5O1xyXG5cdFx0XHRmb3IgKGxldCBtb3ZlIG9mIG1vdmVzKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dGhpcy5jaGVzc2JvYXJkLm1vdmUobW92ZS5mcm9tLCBtb3ZlLnRvKTtcclxuXHRcdFx0XHRiZXN0VmFsdWUgPSBNYXRoLm1pbihiZXN0VmFsdWUsIHRoaXMuZXZhbHVhdGVCZXN0TW92ZShjdXJyZW50UGxheWVyLCBkZXB0aCAtIDEsIGFscGhhLCBiZXRhLCAhaXNNYXhpbWlzaW5nUGxheWVyKSk7XHJcblx0XHRcdFx0dGhpcy5jaGVzc2JvYXJkLnVuZG8oKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRiZXRhID0gTWF0aC5taW4oYmV0YSwgYmVzdFZhbHVlKTtcclxuXHRcdFx0XHRpZiAoYmV0YSA8PSBhbHBoYSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRyZXR1cm4gYmVzdFZhbHVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gYmVzdFZhbHVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Z2V0UmFuZG9tTW92ZSgpXHJcblx0e1xyXG5cdFx0dmFyIG1vdmVzID0gdGhpcy5jaGVzc2JvYXJkLmdldE1vdmVzRkVOKHRoaXMucGxheWluZ1NpZGUpO1xyXG5cdFx0aWYoIW1vdmVzLmxlbmd0aClcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR2YXIgcmFuZE1vdmUgPSBtb3Zlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtb3Zlcy5sZW5ndGgpXTtcclxuXHRcdHJhbmRNb3ZlLnNjb3JlID0gMDtcclxuXHRcdHJldHVybiByYW5kTW92ZTtcclxuXHR9XHJcblxyXG5cdGV2YWx1YXRlQm9hcmQoc2lkZSlcclxuXHR7XHJcblx0XHR2YXIgYm9hcmRWYWx1ZSA9IDA7XHJcblx0XHR0aGlzLmNoZXNzYm9hcmQuZm9yRWFjaFBpZWNlKCBwaWVjZSA9PiB7XHJcblx0XHRcdGlmKHNpZGUgPT0gcGllY2UuY29sb3IpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRib2FyZFZhbHVlICs9IFBJRUNFX1ZBTFVFU1twaWVjZS50eXBlXSArIEJvYXJkRXZhbHVhdGlvbnNbcGllY2UuY29sb3JdW3BpZWNlLnR5cGVdW3BpZWNlLnNxdWFyZS55XVtwaWVjZS5zcXVhcmUueF07XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdGJvYXJkVmFsdWUgLT0gUElFQ0VfVkFMVUVTW3BpZWNlLnR5cGVdICsgQm9hcmRFdmFsdWF0aW9uc1twaWVjZS5jb2xvcl1bcGllY2UudHlwZV1bcGllY2Uuc3F1YXJlLnldW3BpZWNlLnNxdWFyZS54XTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIGJvYXJkVmFsdWU7XHJcblx0fVxyXG5cdFxyXG59OyIsImV4cG9ydCBjbGFzcyBDaGVzc0FJV29ya2VyXHJcbntcclxuXHR3b3JrZXI6IFdvcmtlciA9IG51bGw7XHJcblx0XHJcblx0bGlzdGVuZXJzID0gW107XHJcblx0Y29uc3RydWN0b3Iod29ya2VyUGF0aClcclxuXHR7XHJcblx0XHR0aGlzLndvcmtlciA9IG5ldyBXb3JrZXIoIHdvcmtlclBhdGggKTtcclxuXHRcdHRoaXMud29ya2VyLm9ubWVzc2FnZSA9IChtZXNzYWdlKSA9PiB7XHJcblx0XHRcdFxyXG5cdFx0XHRpZih0aGlzLmxpc3RlbmVyc1ttZXNzYWdlLmRhdGEuZXZlbnRdKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Zm9yKHZhciBldmVudCBvZiB0aGlzLmxpc3RlbmVyc1ttZXNzYWdlLmRhdGEuZXZlbnRdKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGV2ZW50LmFwcGx5KGV2ZW50LCBtZXNzYWdlLmRhdGEuYXJndW1lbnRzKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHRlbWl0KGV2ZW50LCBkYXRhKVxyXG5cdHtcclxuXHRcdHRoaXMud29ya2VyLnBvc3RNZXNzYWdlKGV2ZW50KTtcclxuXHR9XHJcblx0XHJcblx0b24odHlwZSwgY2FsbGJhY2spXHJcblx0e1xyXG5cdFx0aWYoIXRoaXMubGlzdGVuZXJzW3R5cGVdKVxyXG5cdFx0e1xyXG5cdFx0XHR0aGlzLmxpc3RlbmVyc1t0eXBlXSA9IFtdO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMubGlzdGVuZXJzW3R5cGVdLnB1c2goY2FsbGJhY2spO1xyXG5cdH1cclxuXHRcclxuXHRleGVjKG1ldGhvZCwgLi4uYXJnczogYW55W10pXHJcblx0e1xyXG5cdFx0dGhpcy53b3JrZXIucG9zdE1lc3NhZ2Uoe1xyXG5cdFx0XHRtZXRob2Q6IG1ldGhvZCxcclxuXHRcdFx0YXJndW1lbnRzOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLnNsaWNlKDEpXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGRlc3Ryb3koKVxyXG5cdHtcclxuXHRcdHRoaXMud29ya2VyLnRlcm1pbmF0ZSgpO1xyXG5cdH1cclxufTtcclxuXHJcbiIsImV4cG9ydCAqIGZyb20gXCIuL0NoZXNzQUlcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vQ2hlc3NBSVdvcmtlclwiOyJdfQ=="}